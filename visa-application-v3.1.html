<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMBI Immigration - Solicitud de Visa Canadiense</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@600;700&family=Montserrat:wght@700;800;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colores Aguamarina */
            --aqua-primary: #20B2AA;
            --aqua-dark: #178F87;
            --aqua-light: #5FDED6;
            --aqua-pale: #B2F5EA;
            --aqua-bg: #E6FFFA;
            
            /* Colores Terracota (complementarios) */
            --terracota-primary: #C85A4F;
            --terracota-dark: #A74238;
            --terracota-light: #E8998D;
            --terracota-pale: #F4DDD9;
            --terracota-bg: #FFF8F6;
            
            /* Colores Base */
            --cream: #FAF7F5;
            --warm-gray: #718096;
            --dark-text: #2D3748;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--aqua-bg) 0%, var(--cream) 100%);
            min-height: 100vh;
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Header con info del aplicante */
        header {
            background: linear-gradient(120deg, var(--aqua-dark) 0%, var(--aqua-primary) 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(32, 178, 170, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo h1 {
            font-family: 'Space Grotesk', 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.15);
        }

        .logo p {
            font-size: 0.85rem;
            opacity: 0.95;
            font-weight: 300;
        }

        /* Info del aplicante en header */
        .applicant-info {
            display: none;
            align-items: center;
            gap: 1.5rem;
            font-size: 0.85rem;
            flex-wrap: wrap;
        }

        .applicant-info.show {
            display: flex;
        }

        .applicant-info-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        /* Barra de progreso global */
        .global-progress {
            background: white;
            padding: 0.8rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .global-progress-inner {
            max-width: 1400px;
            margin: 0 auto;
        }

        .progress-bar-container {
            background: #E2E8F0;
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--aqua-dark), var(--aqua-primary));
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            font-size: 0.85rem;
            color: var(--warm-gray);
            text-align: center;
            font-weight: 500;
        }

        /* Navegaci√≥n r√°pida */
        .quick-nav {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.06);
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .quick-nav.show {
            display: flex;
        }

        .quick-nav-steps {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            flex: 1;
        }

        .quick-nav-btn {
            padding: 0.5rem 0.8rem;
            background: var(--cream);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: var(--dark-text);
            font-family: 'Poppins', sans-serif;
            white-space: nowrap;
        }

        .quick-nav-btn:hover {
            border-color: var(--aqua-light);
            background: var(--aqua-pale);
        }

        .quick-nav-btn.active {
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            color: white;
            border-color: var(--aqua-primary);
        }

        .home-btn {
            padding: 0.6rem 1.2rem;
            background: white;
            border: 2px solid var(--aqua-primary);
            border-radius: 8px;
            color: var(--aqua-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-family: 'Poppins', sans-serif;
        }

        .home-btn:hover {
            background: var(--aqua-primary);
            color: white;
        }

        /* Language Selector */
        .lang-selector {
            display: flex;
            gap: 0.3rem;
            align-items: center;
        }

        .lang-flag-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.3rem 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            min-width: 36px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .lang-flag-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .lang-flag-btn.active {
            background: rgba(255,255,255,0.95);
            border: 2px solid rgba(255,255,255,0.9);
            color: var(--aqua-dark);
            box-shadow: 0 3px 12px rgba(0,0,0,0.2);
            font-weight: 800;
        }

        .lang-flag-btn.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        }

        /* Container */
        .container {
            max-width: 1300px;
            margin: 2.5rem auto;
            padding: 0 2rem;
        }

        /* Horizontal Navigation Bar (for steps 1-5) */
        .horizontal-nav {
            display: none;
            background: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .horizontal-nav.show {
            display: block;
        }

        .horizontal-steps {
            display: flex;
            gap: 0.5rem;
            min-width: max-content;
        }

        .horizontal-step {
            flex: 1;
            min-width: 140px;
            padding: 0.8rem 1.2rem;
            background: var(--cream);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .horizontal-step:hover {
            background: var(--terracota-pale);
            border-color: var(--terracota-light);
        }

        .horizontal-step.active {
            background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light));
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(200, 90, 79, 0.3);
        }

        .horizontal-step.completed {
            background: white;
            border-color: var(--terracota-primary);
        }

        .horizontal-step-number {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .horizontal-step-label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .horizontal-step.active .horizontal-step-number,
        .horizontal-step.active .horizontal-step-label {
            opacity: 1;
        }

        /* Card */
        .card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
        }

        .card-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }

        /* Step Content */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Page - Process Flow */
        .welcome-intro {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            color: var(--warm-gray);
        }

        .process-flow {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        .process-card {
            background: linear-gradient(135deg, #FFFFFF, var(--cream));
            border: 2px solid var(--aqua-pale);
            border-radius: 12px;
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .process-card:hover {
            border-color: var(--aqua-primary);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.2);
            transform: translateY(-5px);
        }

        .process-number {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.4rem;
            margin: 0 auto 1rem;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
        }

        .process-card h4 {
            font-size: 1.05rem;
            color: var(--dark-text);
            margin-bottom: 0.6rem;
            font-weight: 600;
        }

        .process-card p {
            font-size: 0.88rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Alerts */
        .alert {
            padding: 1.8rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border-left: 4px solid;
        }

        .alert-warning {
            background: #FFF8E1;
            border-color: #FFB74D;
            color: #E65100;
        }

        .alert-info {
            background: #E3F2FD;
            border-color: #64B5F6;
            color: #0D47A1;
        }

        .alert-success {
            background: #E8F5E9;
            border-color: #81C784;
            color: #1B5E20;
        }

        .alert h3 {
            margin-bottom: 1rem;
            font-size: 1.15rem;
            font-weight: 600;
        }

        .alert p, .alert ul {
            line-height: 1.8;
        }

        .alert ul {
            list-style: none;
            padding: 0;
        }

        .alert li {
            margin-bottom: 1rem;
            padding-left: 2rem;
            position: relative;
        }

        .alert-info li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #1976D2;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .alert a {
            color: var(--terracota-primary);
            font-weight: 600;
            text-decoration: none;
        }

        .alert a:hover {
            text-decoration: underline;
        }

        /* Selection Cards */
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .selection-card {
            border: 2px solid var(--aqua-pale);
            border-radius: 12px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .selection-card:hover {
            border-color: var(--aqua-primary);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.15);
            transform: translateY(-3px);
        }

        .selection-card.selected {
            border-color: var(--aqua-dark);
            background: linear-gradient(135deg, var(--aqua-pale), #FFFFFF);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.25);
        }

        .selection-card h3 {
            font-size: 1.2rem;
            color: var(--dark-text);
            margin-bottom: 0.7rem;
            font-weight: 600;
        }

        .selection-card p {
            font-size: 0.95rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Document List */
        .doc-list {
            background: var(--cream);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
        }

        .doc-list h3 {
            color: var(--terracota-dark);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .doc-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.8rem;
            background: white;
            border-radius: 10px;
            border-left: 4px solid var(--terracota-primary);
            transition: all 0.3s ease;
        }

        .doc-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateX(3px);
        }

        .doc-number {
            background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light));
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .doc-content h4 {
            font-size: 1rem;
            color: var(--dark-text);
            margin-bottom: 0.4rem;
            font-weight: 600;
        }

        .doc-content p {
            font-size: 0.88rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Form */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.3rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.6rem;
        }

        .form-group label .required {
            color: var(--terracota-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 2px solid var(--terracota-pale);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--terracota-primary);
            box-shadow: 0 0 0 3px rgba(200, 90, 79, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Upload */
        .upload-grid {
            display: grid;
            gap: 1.8rem;
        }

        .upload-section h4 {
            color: var(--dark-text);
            margin-bottom: 1rem;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .upload-area {
            border: 2px dashed var(--terracota-pale);
            border-radius: 12px;
            padding: 2.5rem;
            text-align: center;
            cursor: pointer;
            background: var(--cream);
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: var(--terracota-primary);
            background: var(--terracota-pale);
        }

        .upload-area.has-file {
            border-color: #4CAF50;
            background: #E8F5E9;
            border-style: solid;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 0.7rem;
        }

        .upload-text {
            font-size: 0.95rem;
            color: var(--warm-gray);
        }

        .file-name {
            margin-top: 0.8rem;
            font-size: 0.9rem;
            color: #2E7D32;
            font-weight: 600;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 2.5rem;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.7rem;
            font-family: 'Poppins', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            color: white;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--aqua-dark), var(--aqua-primary));
            box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--cream);
            color: var(--dark-text);
            border: 2px solid var(--terracota-pale);
        }

        .btn-secondary:hover {
            background: var(--terracota-pale);
            border-color: var(--terracota-primary);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid var(--terracota-pale);
            border-top: 4px solid var(--terracota-primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        /* Print Styles */
        @media print {
            @page {
                size: letter;
                margin: 1.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            #printableChecklist, 
            #printableChecklist * {
                visibility: visible;
            }
            
            #printableChecklist {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white;
                padding: 0;
            }
            
            .no-print {
                display: none !important;
            }
            
            /* Evitar que se corten elementos al imprimir */
            * {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .applicant-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .lang-selector {
                margin-top: 0.5rem;
                gap: 0.25rem;
            }

            .lang-flag-btn {
                min-width: 32px;
                height: 28px;
                font-size: 0.7rem;
                padding: 0.25rem 0.4rem;
            }

            .process-flow {
                grid-template-columns: 1fr;
            }

            .quick-nav {
                flex-direction: column;
            }

            .quick-nav-steps {
                width: 100%;
                flex-direction: column;
            }

            .quick-nav-btn {
                width: 100%;
                text-align: left;
                padding: 0.7rem 1rem;
            }

            .home-btn {
                width: 100%;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .process-flow {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <h1>üçÅ LMBI Immigration</h1>
                <p>Solicitud de Visa de Turismo Canadiense</p>
            </div>
            <div class="applicant-info" id="applicantInfo">
                <div class="applicant-info-item">
                    <span>üë§</span>
                    <span id="headerName">-</span>
                </div>
                <div class="applicant-info-item">
                    <span>üìß</span>
                    <span id="headerEmail">-</span>
                </div>
                <div class="applicant-info-item">
                    <span>üì±</span>
                    <span id="headerPhone">-</span>
                </div>
            </div>
            <div class="lang-selector">
                <button class="lang-flag-btn active" data-lang="es" onclick="changeLanguageFromFlag('es')" title="Espa√±ol">
                    ES
                </button>
                <button class="lang-flag-btn" data-lang="en" onclick="changeLanguageFromFlag('en')" title="English">
                    EN
                </button>
                <button class="lang-flag-btn" data-lang="fr" onclick="changeLanguageFromFlag('fr')" title="Fran√ßais">
                    FR
                </button>
            </div>
        </div>
    </header>

    <!-- Barra de Progreso Global -->
    <div class="global-progress">
        <div class="global-progress-inner">
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="globalProgressBar" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Paso 0 de 6: Bienvenida</div>
        </div>
    </div>

    <div class="container">
        <!-- Navegaci√≥n R√°pida -->
        <div class="quick-nav" id="quickNav">
            <div class="quick-nav-steps">
                <button class="quick-nav-btn" data-step="1" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-1">Paso 1: Tipo de Solicitud</span></button>
                <button class="quick-nav-btn" data-step="2" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-2">Paso 2: Documentos Requeridos</span></button>
                <button class="quick-nav-btn" data-step="3" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-3">Paso 3: Subir Documentos</span></button>
                <button class="quick-nav-btn" data-step="4" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-4">Paso 4: Informaci√≥n Personal</span></button>
                <button class="quick-nav-btn" data-step="5" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-5">Paso 5: Motivo del Viaje</span></button>
                <button class="quick-nav-btn" data-step="6" disabled style="cursor: not-allowed; opacity: 0.6;"><span class="nav-btn-6">Paso 6: Revisi√≥n y Env√≠o</span></button>
            </div>
            <button class="home-btn" onclick="goToStep(0)"><span class="home-btn-text">üè† Inicio</span></button>
        </div>
        <!-- Welcome Page (Step 0) -->
        <div class="step-content active" id="stepWelcome">
            <div class="card">
                <h2 class="card-title"><span class="text-welcomeTitle">üè† Bienvenido a LMBI Immigration</span></h2>
                
                <p class="welcome-intro">
                    <span class="text-welcomeIntro">Le damos la bienvenida a nuestro portal de solicitud de visa de turismo canadiense. 
                    Estamos aqu√≠ para guiarle en cada paso del proceso de manera clara y profesional.</span>
                </p>

                <div class="alert alert-warning">
                    <h3><span class="text-importantTitle">‚ö†Ô∏è Informaci√≥n Importante - IRCC</span></h3>
                    <p>
                        <span class="text-importantText"><strong>Nota Importante:</strong> La decisi√≥n de aprobar o rechazar una solicitud de visa 
                        es exclusivamente responsabilidad de los Agentes de Inmigraci√≥n de <strong>IRCC</strong> 
                        (Immigration, Refugees and Citizenship Canada). LMBI Immigration proporciona asistencia 
                        profesional en la preparaci√≥n de documentos, pero no puede garantizar la aprobaci√≥n de la visa.</span>
                    </p>
                    <p style="margin-top: 1rem;">
                        <span class="text-importantLink">En caso de duda o para informaci√≥n oficial, siempre debe referirse a la p√°gina oficial de IRCC:</span>
                        <a href="https://www.canada.ca/en/immigration-refugees-citizenship.html" target="_blank">www.canada.ca</a>
                    </p>
                </div>

                <h3 style="font-size: 1.3rem; color: var(--terracota-dark); margin: 2.5rem 0 1.5rem; font-weight: 700;">
                    <span class="text-processTitle">üìã Proceso de Solicitud</span>
                </h3>
                <p style="color: var(--warm-gray); margin-bottom: 1.5rem;">
                    <span class="text-processSubtitle">Haga clic en cada paso para navegar directamente a esa secci√≥n:</span>
                </p>

                <div class="process-flow">
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">1</div>
                        <h4><span class="text-process1Title">Tipo de Solicitud</span></h4>
                        <p><span class="text-process1Desc">Seleccione su situaci√≥n actual</span></p>
                    </div>
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">2</div>
                        <h4><span class="text-process2Title">Documentos Requeridos</span></h4>
                        <p><span class="text-process2Desc">Revise la lista completa de documentos</span></p>
                    </div>
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">3</div>
                        <h4><span class="text-process3Title">Subir Documentos</span></h4>
                        <p><span class="text-process3Desc">Suba todos los archivos requeridos</span></p>
                    </div>
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">4</div>
                        <h4><span class="text-process4Title">Informaci√≥n Personal</span></h4>
                        <p><span class="text-process4Desc">Complete el formulario detallado</span></p>
                    </div>
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">5</div>
                        <h4><span class="text-process5Title">Motivo del Viaje</span></h4>
                        <p><span class="text-process5Desc">Describa su viaje a Canad√°</span></p>
                    </div>
                    <div class="process-card" style="cursor: default;">
                        <div class="process-number">6</div>
                        <h4><span class="text-process6Title">Revisi√≥n y Env√≠o</span></h4>
                        <p><span class="text-process6Desc">Revise y env√≠e su solicitud</span></p>
                    </div>
                </div>

                <div class="alert alert-info">
                    <h3><span class="text-considerationsTitle">üí° Aspectos Importantes a Considerar</span></h3>
                    <ul>
                        <li>
                            <span class="text-consideration1"><strong>Documentos Completos:</strong> Recuerde que es importante tener todos los documentos 
                            completos en el momento de enviar, de lo contrario, el proceso de realizaci√≥n de la visa 
                            podr√≠a tomar m√°s tiempo.</span>
                        </li>
                        <li>
                            <span class="text-consideration2"><strong>Arraigo en su Pa√≠s:</strong> Es importante tener en cuenta que el Gobierno de Canad√° 
                            tiene muy en cuenta el arraigo que usted pueda tener en su pa√≠s (familiar, propiedades, 
                            trabajo, empresa, etc.).</span>
                        </li>
                        <li>
                            <span class="text-consideration3"><strong>Aspectos Financieros:</strong> Los aspectos financieros son muy tenidos en cuenta. 
                            Tenga en cuenta que las <strong>tarjetas de cr√©dito NO son consideradas como activos</strong> 
                            para el gobierno de Canad√°.</span>
                        </li>
                        <li>
                            <span class="text-consideration4"><strong>Honestidad:</strong> Es importante siempre decir la verdad en toda la aplicaci√≥n. 
                            La falsificaci√≥n de informaci√≥n puede resultar en la prohibici√≥n permanente de ingresar a Canad√°.</span>
                        </li>
                    </ul>
                </div>

                <div class="btn-group" style="justify-content: center;">
                    <button class="btn btn-primary" onclick="goToStep(1)" style="font-size: 1.15rem; padding: 1.2rem 3rem;">
                        <span class="text-startButton">Iniciar Solicitud ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 1: Application Type -->
        <div class="step-content" id="step1">
            <div class="card">
                <h2 class="card-title"><span class="text-step1Title">üìã Seleccione el tipo de solicitud</span></h2>
                
                <div class="alert alert-info">
                    <span class="text-step1Info">Por favor, seleccione su situaci√≥n para mostrarle los documentos espec√≠ficos que necesita.</span>
                    <br><br>
                    <small style="opacity: 0.8;"><span class="text-step1Tip">üí° <strong>Consejo:</strong> Haga doble click en su opci√≥n para avanzar autom√°ticamente.</span></small>
                </div>

                <div class="selection-grid">
                    <div class="selection-card" data-type="adult-outside">
                        <h3><span class="text-step1Option1Title">üë®‚Äçüíº Adulto fuera de Canad√°</span></h3>
                        <p><span class="text-step1Option1Desc">Para personas adultas que se encuentran actualmente fuera de Canad√°.</span></p>
                    </div>
                    <div class="selection-card" data-type="adult-inside">
                        <h3><span class="text-step1Option2Title">üë®‚Äçüíº Adulto dentro de Canad√°</span></h3>
                        <p><span class="text-step1Option2Desc">Para personas adultas que se encuentran actualmente en Canad√°.</span></p>
                    </div>
                    <div class="selection-card" data-type="child">
                        <h3><span class="text-step1Option3Title">üë∂ Ni√±os/Menores</span></h3>
                        <p><span class="text-step1Option3Desc">Para solicitudes de visa de turismo para ni√±os menores de 18 a√±os.</span></p>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(0)">
                        <span class="text-backToHome">‚Üê Volver a Inicio</span>
                    </button>
                    <button class="btn btn-primary" id="nextStep1" disabled>
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Required Documents -->
        <div class="step-content" id="step2">
            <div class="card">
                <h2 class="card-title"><span class="text-step2Title">üìë Documentos Requeridos</span></h2>
                
                <!-- Botones al inicio -->
                <div class="btn-group" style="margin-top: 0; margin-bottom: 2rem;">
                    <button class="btn btn-secondary" onclick="goToStep(1)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(3)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
                
                <div class="alert alert-success" style="text-align: center; margin: 2rem 0; background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-left: 5px solid #4CAF50;">
                    <h3 style="margin-bottom: 1rem; color: #2E7D32; font-size: 1.4rem;"><span class="text-step2DownloadTitle">üì• Descargue su Checklist en PDF</span></h3>
                    <p style="margin-bottom: 1.5rem; font-size: 1.05rem; color: #1B5E20; line-height: 1.7;">
                        <span class="text-step2DownloadText"><strong>¬°Importante!</strong> Descargue la lista completa de documentos requeridos en formato PDF. 
                        Este checklist incluye el <strong>nombre exacto de cada archivo PDF</strong> que debe preparar, 
                        junto con descripciones detalladas de cada documento.</span>
                    </p>
                    <button class="print-btn" onclick="downloadCurrentChecklist()" style="font-size: 1.1rem; padding: 1.2rem 2.5rem; background: linear-gradient(135deg, #4CAF50, #66BB6A); box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);">
                        <span class="text-step2DownloadButton">üìÑ Descargar Checklist PDF</span>
                    </button>
                    <p style="margin-top: 1.5rem; font-size: 0.95rem; color: #558B2F; line-height: 1.6;">
                        <span class="text-step2DownloadTip">üí° <strong>Tip:</strong> Imprima el checklist y m√°rquelo a medida que re√∫ne cada documento. 
                        Cada documento est√° claramente identificado con su nombre de archivo PDF correspondiente.</span>
                    </p>
                </div>
                
                <div class="alert alert-warning">
                    <h3 style="margin-bottom: 1rem; font-size: 1.05rem;"><span class="text-step2WarningTitle">‚ö†Ô∏è Informaci√≥n Importante sobre Documentos</span></h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #F59E0B;">‚Ä¢</span>
                            <span class="text-step2WarningLanguage"><strong>Idioma:</strong> Todos los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos y acompa√±ados del documento original.</span>
                        </li>
                        <li style="padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #F59E0B;">‚Ä¢</span>
                            <span class="text-step2WarningFormat"><strong>Formato y Tama√±o:</strong> Los documentos deben subirse en formato PDF con un peso m√°ximo de 3.8 MB por archivo. La fotograf√≠a puede subirse tambi√©n en formato JPEG.</span>
                        </li>
                    </ul>
                </div>

                <div id="documentList"></div>

                <!-- Botones al final -->
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(1)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(3)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Checklist Imprimible (hidden) -->
        <div id="printableChecklist" style="display: none;">
            <!-- Contenido generado din√°micamente -->
        </div>

        <!-- Step 3: Upload Documents -->
        <div class="step-content" id="step3">
            <div class="card">
                <h2 class="card-title"><span class="text-step3Title">üì§ Subir Documentos</span></h2>
                
                <!-- Botones al inicio -->
                <div class="btn-group" style="margin-top: 0; margin-bottom: 2rem;">
                    <button class="btn btn-secondary" onclick="goToStep(2)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(4)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
                
                <div class="alert alert-info">
                    <h3 style="margin-bottom: 1rem; font-size: 1.05rem;"><span class="text-step3AlertTitle">üì§ Instrucciones para Subir Documentos</span></h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info1"><strong>Formato PDF:</strong> Todos los documentos deben subirse en formato PDF con un tama√±o m√°ximo de 3.8 MB por archivo.</span>
                        </li>
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info2"><strong>Fotograf√≠a:</strong> La fotograf√≠a es el √∫nico documento que puede subirse tambi√©n en formato JPG/JPEG.</span>
                        </li>
                        <li style="padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info3"><strong>Documentos no aplicables:</strong> Si alg√∫n documento no aplica a su situaci√≥n, puede marcarlo como "No Aplica" para continuar.</span>
                        </li>
                    </ul>
                </div>

                <div class="upload-grid" id="uploadGrid"></div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(2)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(4)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Personal Information -->
        <div class="step-content" id="step4">
            <div class="card">
                <h2 class="card-title" id="step4TitleHeader">‚úèÔ∏è Informaci√≥n Personal</h2>
                
                <form id="personalInfoForm">
                    <!-- INFORMACI√ìN B√ÅSICA -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section1-title">üìã 1. Informaci√≥n del / la Solicitante</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-firstName">Nombres</span> <span class="required">*</span></label>
                            <input type="text" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-lastName">Apellidos</span> <span class="required">*</span></label>
                            <input type="text" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-applicationDate">Fecha de diligenciamiento</span> <span class="required">*</span></label>
                            <input type="date" name="applicationDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-birthDate">Fecha de Nacimiento</span> <span class="required">*</span></label>
                            <input type="date" name="birthDate" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-birthPlace">Lugar de Nacimiento</span> <span class="required">*</span></label>
                            <input type="text" name="birthPlace" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-citizenship">Pa√≠s de Ciudadan√≠a</span> <span class="required">*</span></label>
                            <input type="text" name="citizenship" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-passportNumber">N√∫mero de Pasaporte</span> <span class="required">*</span></label>
                            <input type="text" name="passportNumber" required>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section1" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTADO CIVIL ACTUAL -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section2-title">üíë 2. Estado Civil Actual</span></h3>
                    <div class="form-grid" id="section2-fields">
                        <div class="form-group">
                            <label><span class="label-maritalStatusLabel">A. Estado civil</span> <span class="required">*</span></label>
                            <select name="maritalStatus" required>
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-currentPartnerName">B. Nombres completos de la pareja actual</span> <span class="required">*</span></label>
                            <input type="text" name="currentPartnerName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-relationshipStartDate">C. Fecha inicio de la relaci√≥n</span> <span class="required">*</span></label>
                            <input type="date" name="relationshipStartDate">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section2" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTADO CIVIL ANTERIOR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section3-title">üìú 3. Estado Civil Anterior</span></h3>
                    <div class="form-grid" id="section3-fields">
                        <div class="form-group">
                            <label><span class="label-previousRelationshipLabel">A. ¬øTuvo una relaci√≥n anterior?</span> <span class="required">*</span></label>
                            <select name="previousRelationship" id="previousRelationship">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="no" class="opt-no">No</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                            </select>
                        </div>
                    </div>
                    <div id="previousRelationshipFields" style="display: none;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label><span class="label-previousRelationType">B. Tipo de relaci√≥n</span> <span class="required">*</span></label>
                                <select name="previousRelationType">
                                    <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                    <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                    <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousPartnerName">C. Nombre completo pareja anterior</span> <span class="required">*</span></label>
                                <input type="text" name="previousPartnerName">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousPartnerBirthDate">D. Fecha nacimiento pareja anterior</span> <span class="required">*</span></label>
                                <input type="date" name="previousPartnerBirthDate">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousRelationshipStart">E. Fecha inicio de la relaci√≥n anterior</span> <span class="required">*</span></label>
                                <input type="date" name="previousRelationshipStart">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousRelationshipEnd">F. Fecha de finalizaci√≥n de la relaci√≥n anterior</span> <span class="required">*</span></label>
                                <input type="date" name="previousRelationshipEnd">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section3" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- IDIOMAS -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section4-title">üó£Ô∏è 4. Idiomas</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-nativeLanguage">A. Lengua materna</span> <span class="required">*</span></label>
                            <select name="nativeLanguage">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="spanish" class="opt-nativeLanguageSpanish">Espa√±ol</option>
                                <option value="english" class="opt-nativeLanguageEnglish">Ingl√©s</option>
                                <option value="french" class="opt-nativeLanguageFrench">Franc√©s</option>
                                <option value="portuguese" class="opt-nativeLanguagePortuguese">Portugu√©s</option>
                                <option value="other" class="opt-nativeLanguageOther">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-languageAbility">B. ¬øEn qu√© otro idioma se puede comunicar?</span> <span class="required">*</span></label>
                            <select name="languageAbility">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="english" class="opt-languageAbilityEnglish">Ingl√©s</option>
                                <option value="french" class="opt-languageAbilityFrench">Franc√©s</option>
                                <option value="both" class="opt-languageAbilityBoth">En los dos idiomas</option>
                                <option value="neither" class="opt-languageAbilityNeither">En ninguno</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-preferredLanguage">¬øEn cu√°l idioma se sentir√≠a m√°s confiable?</span> <span class="required">*</span></label>
                            <select name="preferredLanguage">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="english" class="opt-languageAbilityEnglish">Ingl√©s</option>
                                <option value="french" class="opt-languageAbilityFrench">Franc√©s</option>
                                <option value="spanish" class="opt-nativeLanguageSpanish">Espa√±ol</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-languageTest">¬øHa hecho alguna prueba de ingl√©s o franc√©s?</span> <span class="required">*</span></label>
                            <select name="languageTest" id="languageTest">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="no" class="opt-no">No</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                            </select>
                        </div>
                    </div>
                    <div id="languageTestFields" style="display: none;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label><span class="label-languageTestType">¬øCu√°l prueba?</span> <span class="required">*</span></label>
                                <input type="text" name="languageTestType" placeholder="IELTS, TOEFL, TEF, etc.">
                            </div>
                            <div class="form-group">
                                <label><span class="label-languageTestYear">¬øEn qu√© a√±o?</span> <span class="required">*</span></label>
                                <input type="number" name="languageTestYear" min="1990" max="2030">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section4" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- DIRECCI√ìN -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section5-title">üè† 5. Direcci√≥n del / la Solicitante</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-addressLabel">A. Direcci√≥n actual</span> <span class="required">*</span></label>
                            <input type="text" name="address" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-city">B. Ciudad</span> <span class="required">*</span></label>
                            <input type="text" name="city" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-region">C. Regi√≥n, Provincia, Depto</span> <span class="required">*</span></label>
                            <input type="text" name="region">
                        </div>
                        <div class="form-group">
                            <label><span class="label-country">D. Pa√≠s</span> <span class="required">*</span></label>
                            <input type="text" name="country" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-postalCode">E. C√≥digo Postal (si aplica)</span> <span class="required">*</span></label>
                            <input type="text" name="postalCode">
                        </div>
                        <div class="form-group">
                            <label><span class="label-phone">F. N√∫mero telef√≥nico</span> <span class="required">*</span></label>
                            <input type="tel" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-email">G. Email</span> <span class="required">*</span></label>
                            <input type="email" name="email" required>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section5" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- DETALLES DEL VIAJE -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section6-title">‚úàÔ∏è 6. Detalles del Viaje a Canad√°</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-arrivalDate">A. Fecha de llegada a Canad√°</span> <span class="required">*</span></label>
                            <input type="date" name="travelDateStart" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-departureDate">B. Fecha de salida de Canad√°</span> <span class="required">*</span></label>
                            <input type="date" name="travelDateEnd" required>
                        </div>
                        <div class="form-group">
                            <label><span class="label-availableFunds">C. Dinero disponible (en d√≥lares CAD)</span> <span class="required">*</span></label>
                            <input type="number" name="availableFunds" placeholder="">
                        </div>
                        <div class="form-group">
                            <label><span class="label-whoToVisit">D. ¬øA qui√©n visita?</span> <span class="required">*</span></label>
                            <input type="text" name="whoToVisit">
                        </div>
                        <div class="form-group">
                            <label><span class="label-personToVisit">E. Nombre de la persona que visita</span> <span class="required">*</span></label>
                            <input type="text" name="personToVisit">
                        </div>
                        <div class="form-group">
                            <label><span class="label-visitPersonAddress">F. Direcci√≥n de la persona que visita</span> <span class="required">*</span></label>
                            <input type="text" name="visitPersonAddress">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section6" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTUDIOS DE POSTGRADO -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section7-title">üéì 7. Estudios de Postgrado</span></h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;"><span class="section7-subtitle">(comprendre estudios universitarios, diplomados o una formaci√≥n de aprendizaje). Si no tienes, colocar N/A en √°rea de estudios.</span></p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-postgraduateStartDate">Fecha inicio</span></label>
                            <input type="date" name="postgraduateStartDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateEndDate">Fecha final</span></label>
                            <input type="date" name="postgraduateEndDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateCity">Ciudad</span></label>
                            <input type="text" name="postgraduateCity">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateCountry">Pa√≠s</span></label>
                            <input type="text" name="postgraduateCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateArea">√Årea de estudios</span></label>
                            <input type="text" name="postgraduateArea">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateInstitution">Nombre del establecimiento educativo</span></label>
                            <input type="text" name="postgraduateInstitution">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section7" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- EMPLEOS (√∫ltimos 10 a√±os) -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section8-title">üíº 8. Empleos Ocupados en los 10 √öltimos A√±os</span></h3>
                    
                    <div id="employmentContainer">
                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job1StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job1EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job1City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job1Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job1Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job1Company">
                                </div>
                            </div>
                        </div>

                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="employment2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job2StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job2EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job2City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job2Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job2Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job2Company">
                                </div>
                            </div>
                        </div>

                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="employment3">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job3StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job3EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job3City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job3Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job3Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job3Company">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addEmploymentBtn" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-addEmployment">Adicionar otro empleo</span></button>

                    <!-- INFORMACI√ìN FAMILIAR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section9-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ 9. Informaci√≥n Familiar</span></h3>
                    
                    <!-- 9.1 Esposo(a) o Pareja -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section91-title">9.1. Informaci√≥n del Esposo(a) o Pareja actual (si aplica). Si es soltero(a) escribir N/A</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-spouseName">A. Nombre Completo</span></label>
                            <input type="text" name="spouseName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseBirthDate">B. Fecha Nacimiento</span></label>
                            <input type="date" name="spouseBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseBirthCountry">C. Pa√≠s Nacimiento</span></label>
                            <input type="text" name="spouseBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseAddress">D. Direcci√≥n actual</span></label>
                            <input type="text" name="spouseAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="spouseOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseWillTravel">Su pareja lo acompa√±ar√° en el Viaje?</span></label>
                            <select name="spouseWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section91" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.2 Madre -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section92-title">9.2. Informaci√≥n de la Madre. Si su madre esta viva, diligencie las casillas A,B,C,D,F,G,H,I. Si su madre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-motherName">A. Nombre completo</span></label>
                            <input type="text" name="motherName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherBirthDate">B. Fecha nacimiento</span></label>
                            <input type="date" name="motherBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherBirthCountry">C. Pa√≠s nacimiento</span></label>
                            <input type="text" name="motherBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherAlive">D. Su madre vive?</span></label>
                            <select name="motherAlive" id="motherAlive">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherDeceasedDate">E. Fecha deceso</span></label>
                            <input type="date" name="motherDeceasedDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherAddress">F. Direcci√≥n actual</span></label>
                            <input type="text" name="motherAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="motherOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherMaritalStatus">H. Estado Civil</span></label>
                            <select name="motherMaritalStatus">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherWillTravel">I. Su madre lo acompa√±ar√° en el viaje?</span></label>
                            <select name="motherWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section92" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.3 Padre -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section93-title">9.3. Informaci√≥n del Padre. Si su padre esta vivo, diligencie las casillas A,B,C,D,F,G,H,I. Si su padre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-fatherName">A. Nombre completo</span></label>
                            <input type="text" name="fatherName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherBirthDate">B. Fecha nacimiento</span></label>
                            <input type="date" name="fatherBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherBirthCountry">C. Pa√≠s nacimiento</span></label>
                            <input type="text" name="fatherBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherAlive">D. Su padre vive?</span></label>
                            <select name="fatherAlive" id="fatherAlive">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherDeceasedDate">E. Fecha deceso</span></label>
                            <input type="date" name="fatherDeceasedDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherAddress">F. Direcci√≥n actual</span></label>
                            <input type="text" name="fatherAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="fatherOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherMaritalStatus">H. Estado civil</span></label>
                            <select name="fatherMaritalStatus">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherWillTravel">I. Su padre lo acompa√±ar√° en el viaje?</span></label>
                            <select name="fatherWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section93" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.4 Hijos -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section94-title">9.4. Informaci√≥n de Hijos o Hijas. Si su(s) hijo(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hijo(a)s fallecio(eron), diligencie √∫nicamente casillas A,B,C,D,E.</span></h4>
                    
                    <div id="childrenContainer">
                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-childName">A. Nombre completo</span></label>
                                    <input type="text" name="child1Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="child1BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="child1Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="daughter" class="opt-childDaughter">Hija</option>
                                        <option value="son" class="opt-childSon">Hijo</option>
                                        <option value="stepdaughter" class="opt-childStepdaughter">Hijastra</option>
                                        <option value="stepson" class="opt-childStepson">Hijastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAlive">D. Su hijo(a) vive?</span></label>
                                    <select name="child1Alive">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childDeceasedDate">E. Fecha deceso</span></label>
                                    <input type="date" name="child1DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAddress">F. Direcci√≥n actual</span></label>
                                    <input type="text" name="child1Address">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childOccupation">G. Ocupaci√≥n</span></label>
                                    <input type="text" name="child1Occupation">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childMaritalStatus">H. Estado civil</span></label>
                                    <select name="child1MaritalStatus">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                        <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                        <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                        <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                        <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                        <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childWillTravel">I. Su hijo(a) lo acompa√±ara en el viaje?</span></label>
                                    <select name="child1WillTravel">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="child2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-childName">A. Nombre completo</span></label>
                                    <input type="text" name="child2Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="child2BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="child2Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="daughter" class="opt-childDaughter">Hija</option>
                                        <option value="son" class="opt-childSon">Hijo</option>
                                        <option value="stepdaughter" class="opt-childStepdaughter">Hijastra</option>
                                        <option value="stepson" class="opt-childStepson">Hijastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAlive">D. Su hijo(a) vive?</span></label>
                                    <select name="child2Alive">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childDeceasedDate">E. Fecha deceso</span></label>
                                    <input type="date" name="child2DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAddress">F. Direcci√≥n actual</span></label>
                                    <input type="text" name="child2Address">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childOccupation">G. Ocupaci√≥n</span></label>
                                    <input type="text" name="child2Occupation">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childMaritalStatus">H. Estado civil</span></label>
                                    <select name="child2MaritalStatus">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                        <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                        <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                        <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                        <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                        <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childWillTravel">I. Su hijo(a) lo acompa√±ara en el viaje?</span></label>
                                    <select name="child2WillTravel">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addChildBtn" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-addChild">Adicionar otro hijo(a)</span></button>

                    <!-- 9.5 Hermanos -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section95-title">9.5. Informaci√≥n de Hermanos(as). Si su(s) hermano(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hermano(a)s fallecio(eron) diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    
                    <div id="siblingsContainer">
                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-siblingName">A. Nombre completo</span></label>
                                    <input type="text" name="sibling1Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="sibling1BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="sibling1Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="sister" class="opt-siblingSister">Hermana</option>
                                        <option value="brother" class="opt-siblingBrother">Hermano</option>
                                        <option value="stepsister" class="opt-siblingStepsister">Hermanastra</option>
                                        <option value="stepbrother" class="opt-siblingStepbrother">Hermanastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingAlive">D. Hermano(a) vive?</span></label>
                                    <select name="sibling1Alive">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>E. Fecha deceso</label>
                                    <input type="date" name="sibling1DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label>F. Direcci√≥n actual</label>
                                    <input type="text" name="sibling1Address">
                                </div>
                                <div class="form-group">
                                    <label>G. Ocupaci√≥n</label>
                                    <input type="text" name="sibling1Occupation">
                                </div>
                                <div class="form-group">
                                    <label>H. Estado civil</label>
                                    <select name="sibling1MaritalStatus">
                                        <option value="">Seleccione</option>
                                        <option value="married">Casado(a)</option>
                                        <option value="single">Soltero(a)</option>
                                        <option value="common-law">Uni√≥n de hecho</option>
                                        <option value="separated">Separado(a) legalmente</option>
                                        <option value="divorced">Divorciado(a)</option>
                                        <option value="widowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>I. Su hermano(a) lo acompa√±ar√° en el viaje?</label>
                                    <select name="sibling1WillTravel">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="sibling2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>A. Nombre completo</label>
                                    <input type="text" name="sibling2Name">
                                </div>
                                <div class="form-group">
                                    <label>B. Fecha nacimiento</label>
                                    <input type="date" name="sibling2BirthDate">
                                </div>
                                <div class="form-group">
                                    <label>C. Relaci√≥n familiar</label>
                                    <select name="sibling2Relationship">
                                        <option value="">Seleccione</option>
                                        <option value="sister">Hermana</option>
                                        <option value="brother">Hermano</option>
                                        <option value="stepsister">Hermanastra</option>
                                        <option value="stepbrother">Hermanastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>D. Hermano(a) vive?</label>
                                    <select name="sibling2Alive">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>E. Fecha deceso</label>
                                    <input type="date" name="sibling2DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label>F. Direcci√≥n actual</label>
                                    <input type="text" name="sibling2Address">
                                </div>
                                <div class="form-group">
                                    <label>G. Ocupaci√≥n</label>
                                    <input type="text" name="sibling2Occupation">
                                </div>
                                <div class="form-group">
                                    <label>H. Estado civil</label>
                                    <select name="sibling2MaritalStatus">
                                        <option value="">Seleccione</option>
                                        <option value="married">Casado(a)</option>
                                        <option value="single">Soltero(a)</option>
                                        <option value="common-law">Uni√≥n de hecho</option>
                                        <option value="separated">Separado(a) legalmente</option>
                                        <option value="divorced">Divorciado(a)</option>
                                        <option value="widowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>I. Su hermano(a) lo acompa√±ar√° en el viaje?</label>
                                    <select name="sibling2WillTravel">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addSiblingBtn" style="margin-top: 1rem; background-color: #B0B8C4;">Adicionar otro hermano(a)</button>

                    <!-- ANTECEDENTES -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section10-title">‚ö†Ô∏è 10. Antecedentes</span></h3>
                    
                    <div style="overflow-x: auto; margin: 1rem 0;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="background-color: #5C3317; color: white; padding: 1rem; text-align: left; width: 70%;"></th>
                                    <th style="background-color: #5C3317; color: white; padding: 1rem; text-align: center; width: 15%;">SI</th>
                                    <th style="background-color: #5C3317; color: white; padding: 1rem; text-align: center; width: 15%;">NO</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent1">1. Usted o alguien de su familia ha tenido tuberculosis en los √∫ltimos dos a√±os?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="tuberculosis" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="tuberculosis" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent2">2. Tiene alg√∫n desorden f√≠sico o mental que necesite servicios sociales o medicamentos durante su estad√≠a en Canad√° ?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="medicalCondition" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="medicalCondition" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent3">3. Ha permanecido en suelo canadiense despu√©s de la expiraci√≥n de su estatus?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="overstayedCanada" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="overstayedCanada" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent4">4. Le han negado una visa o permiso o le han impedido antes la entrada a territorio canadiense o a otro pa√≠s?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="visaDenied" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="visaDenied" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent5">5. Ha presentado anteriormente una solicitud de entrada a Canad√°?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="previousApplication" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="previousApplication" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent6">6. Ha sido acusado, retenido o reconocido culpable de alguna infracci√≥n penal en alg√∫n otro pa√≠s o territorio?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="criminalRecord" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="criminalRecord" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent7">7. Ha hecho parte de un grupo armado, unidad contra la defensa civil o de un cuerpo de polic√≠a?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="armedGroup" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="armedGroup" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent8">8. Ha sido miembro o afiliado de alg√∫n partido pol√≠tico o de un grupo u organizaci√≥n que haya utilizado la violencia con el fin de alcanzar los objetivos pol√≠ticos o religiosos o que haya estado implicado en actividades criminales?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="politicalAffiliation" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="politicalAffiliation" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color: #5C3317; color: white; padding: 1rem; border: 1px solid #8B6F47;"><span class="label-antecedent9">9. Ha sido testigo de malos tratamientos infrigidos a prisioneros, civiles, o ha realizado actos de vandalismo o de profanaci√≥n de edificios religiosos?</span></td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="witnessAbuse" value="yes" style="width: 20px; height: 20px;">
                                    </td>
                                    <td style="background-color: #FFF9E6; padding: 1rem; text-align: center; border: 1px solid #8B6F47;">
                                        <input type="radio" name="witnessAbuse" value="no" style="width: 20px; height: 20px;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="margin: 2rem 0;">
                        <p style="color: #5C3317; margin-bottom: 1rem; font-weight: bold;"><span class="label-antecedentJustification">En caso que haya respondido SI a algunas de las afirmaciones anteriores, por favor justificar la respuesta brevemente (indique el numeral por el cual da la respuesta). En caso contrario escribir N/A:</span></p>
                        <textarea name="backgroundJustification" rows="6" style="width: 100%; padding: 1rem; border: 2px solid #5C3317; border-radius: 4px; font-family: inherit; font-size: 1rem;"></textarea>
                    </div>

                    <!-- HISTORIAL DE VIAJES -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section11-title">üåç 11. Historial de Viajes Efectuados en los 10 √öltimos A√±os</span></h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;"><span class="section11-subtitle">En caso que no haya realizado viajes, colocar N/A en ciudad y pa√≠s.</span></p>
                    
                    <div id="travelContainer">
                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel1StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel1EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel1City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel1Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel1Purpose">
                                </div>
                            </div>
                        </div>

                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="travel2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel2StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel2EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel2City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel2Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel2Purpose">
                                </div>
                            </div>
                        </div>

                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="travel3">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel3StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel3EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel3City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel3Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel3Purpose">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addTravelBtn" style="margin-top: 1rem; background-color: #B0B8C4;">Adicionar otro viaje</button>

                    <!-- SERVICIO MILITAR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;">üéñÔ∏è 12. Servicio Militar (si aplica)</h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;">En caso que no haya realizado servicio militar, colocar N/A en ciudad y pa√≠s.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Fecha inicial</label>
                            <input type="date" name="militaryStartDate">
                        </div>
                        <div class="form-group">
                            <label>Fecha final</label>
                            <input type="date" name="militaryEndDate">
                        </div>
                        <div class="form-group">
                            <label>Ciudad</label>
                            <input type="text" name="militaryCity">
                        </div>
                        <div class="form-group">
                            <label>Pa√≠s</label>
                            <input type="text" name="militaryCountry">
                        </div>
                        <div class="form-group full-width">
                            <label>Rango</label>
                            <input type="text" name="militaryRank">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section12" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                </form>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(3)">
                        <span class="btn-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" id="nextStep4">
                        <span class="btn-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 5: Travel Purpose / Motivo del Viaje -->
        <div class="step-content" id="step5">
            <div class="card">
                <h2 class="card-title"><span class="text-step5Title">‚úàÔ∏è Motivo del Viaje</span></h2>
                
                <div class="alert alert-info">
                    <h3><span class="text-step5AlertTitle">üìù Instrucciones Importantes</span></h3>
                    <p style="margin-bottom: 1rem;">
                        <span class="text-step5AlertIntro"><strong>Por favor, sea lo m√°s detallado y claro posible al describir el motivo de su viaje.</strong></span>
                    </p>
                    <p>
                        <span class="text-step5AlertSubtitle">Es fundamental que mencione:</span>
                    </p>
                    <ul style="margin-top: 0.5rem;">
                        <li><span class="text-step5Tip1"><strong>Prop√≥sito principal:</strong> ¬øPor qu√© desea viajar a Canad√°? (turismo, visitar familia, negocios, etc.)</span></li>
                        <li><span class="text-step5Tip2"><strong>Lugares a visitar:</strong> Ciudades y sitios espec√≠ficos que planea conocer</span></li>
                        <li><span class="text-step5Tip3"><strong>Duraci√≥n:</strong> Tiempo exacto que permanecer√° en Canad√°</span></li>
                        <li><span class="text-step5Tip4"><strong>Arraigo:</strong> Razones por las cuales regresar√° a su pa√≠s de origen (trabajo, familia, propiedades, estudios, etc.)</span></li>
                        <li><span class="text-step5Tip5"><strong>Itinerario:</strong> Si tiene un plan espec√≠fico de actividades</span></li>
                    </ul>
                    <p style="margin-top: 1rem;">
                        <span class="text-step5AlertReminder"><strong>Recuerde:</strong> La honestidad y el detalle son fundamentales. Una carta bien elaborada aumenta las posibilidades de aprobaci√≥n.</span>
                    </p>
                </div>

                <div class="alert alert-warning">
                    <span class="text-step5Warning"><strong>‚ö†Ô∏è Importante:</strong> Esta informaci√≥n es revisada cuidadosamente por los oficiales de IRCC. 
                    Aseg√∫rese de que coincida con la documentaci√≥n que ha presentado.</span>
                </div>

                <form id="travelPurposeForm">
                    <div class="form-section">
                        <h3 class="form-section-title"><span class="text-step5FormTitle">üìã Carta de Motivaci√≥n</span></h3>
                        
                        <div class="form-group full-width">
                            <label for="travelPurpose">
                                Describa detalladamente el motivo de su viaje a Canad√°
                            </label>
                            <textarea 
                                id="travelPurpose" 
                                name="travelPurpose" 
                                required
                                style="min-height: 300px;"
                                placeholder="Ejemplo:

El prop√≥sito de mi viaje a Canad√° es visitar a mi hermana [Nombre] quien reside en Toronto desde hace 5 a√±os. Planeo quedarme durante 3 semanas (del [fecha] al [fecha]).

Durante mi estancia, tengo planeado:
- Visitar las Cataratas del Ni√°gara
- Conocer el centro de Toronto
- Pasar tiempo con mi familia

Tengo fuertes lazos con mi pa√≠s de origen que garantizan mi retorno:
- Soy propietario de [negocio/propiedad]
- Tengo un empleo estable como [cargo] en [empresa] desde hace [X] a√±os
- Mi familia (esposa e hijos) permanecer√°n en [pa√≠s]
- Mis estudios universitarios contin√∫an en [universidad]

Adjunto toda la documentaci√≥n que respalda esta informaci√≥n..."
                            ></textarea>
                            <small style="display: block; margin-top: 0.5rem; color: var(--warm-gray);">
                                M√≠nimo 200 palabras recomendadas. Sea espec√≠fico y honesto.
                            </small>
                        </div>
                    </div>
                </form>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(4)">
                        ‚Üê Atr√°s
                    </button>
                    <button class="btn btn-primary" id="nextStep5">
                        Continuar ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 6: Review and Submit -->
        <div class="step-content" id="step6">
            <div class="card">
                <h2 class="card-title" id="step6TitleHeader">‚úÖ Revisi√≥n y Env√≠o</h2>
                
                <div class="alert alert-success" id="step6AlertSuccess">
                    Por favor, revise toda la informaci√≥n antes de enviar. Una vez enviada, se generar√° un PDF con todos sus documentos y se enviar√° a LMBI Immigration.
                </div>

                <div id="reviewContent"></div>

                <!-- Confirmaci√≥n de Datos del Aplicante -->
                <div class="alert alert-warning" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;" id="step6ConfirmTitle">‚ö†Ô∏è Confirmaci√≥n de Datos</h3>
                    <p style="margin-bottom: 1rem;" id="step6ConfirmText">
                        <strong>Importante:</strong> Por favor, confirme sus datos de contacto antes de enviar la solicitud. 
                        Estos datos ser√°n utilizados para todas las comunicaciones relacionadas con su visa.
                    </p>
                    
                    <form id="finalConfirmationForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="confirmName">
                                    Nombre Completo
                                </label>
                                <input 
                                    type="text" 
                                    id="confirmName" 
                                    name="confirmName" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>

                            <div class="form-group">
                                <label for="confirmEmail">
                                    Correo Electr√≥nico
                                </label>
                                <input 
                                    type="email" 
                                    id="confirmEmail" 
                                    name="confirmEmail" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>

                            <div class="form-group">
                                <label for="confirmPhone">
                                    Tel√©fono
                                </label>
                                <input 
                                    type="tel" 
                                    id="confirmPhone" 
                                    name="confirmPhone" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; padding: 1.5rem; background: white; border: 2px solid var(--terracota-primary); border-radius: 10px;">
                            <div class="checkbox-group" style="flex-direction: column; gap: 1rem;">
                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmDocuments" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        Confirmo que he adjuntado todos los documentos requeridos seg√∫n mi tipo de solicitud.
                                    </span>
                                </label>

                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmInfo" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        Confirmo que toda la informaci√≥n proporcionada es verdadera y completa.
                                    </span>
                                </label>

                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmReview" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        He revisado cuidadosamente toda mi solicitud y estoy listo para enviarla.
                                    </span>
                                </label>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="loading" id="loadingSubmit">
                    <div class="spinner"></div>
                    <p>Generando PDF y enviando solicitud...</p>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(4)">
                        <span class="btn-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" id="submitApplication">
                        <span class="btn-submit">üì® Enviar Solicitud</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        let appState = {
            currentStep: 0,
            applicationType: '',
            uploadedFiles: {},
            personalInfo: {},
            travelPurpose: {},
            language: 'es'
        };

        // Translations
        const translations = {
            es: {
                // Language Selector
                selectLanguage: 'Seleccione su idioma / Select your language / S√©lectionnez votre langue',
                languageInstruction: 'Por favor, seleccione el idioma de su preferencia para continuar',
                
                // Header
                headerTitle: 'Solicitud de Visa de Turismo Canadiense',
                
                // Welcome
                welcomeTitle: 'Bienvenido a LMBI Immigration',
                welcomeIntro: 'Le damos la bienvenida a nuestro portal de solicitud de visa de turismo canadiense. Estamos aqu√≠ para guiarle en cada paso del proceso de manera clara y profesional.',
                importantTitle: 'Informaci√≥n Importante - IRCC',
                importantText: '<strong>Nota Importante:</strong> La decisi√≥n de aprobar o rechazar una solicitud de visa es exclusivamente responsabilidad de los Agentes de Inmigraci√≥n de <strong>IRCC</strong> (Immigration, Refugees and Citizenship Canada). LMBI Immigration proporciona asistencia profesional en la preparaci√≥n de documentos, pero no puede garantizar la aprobaci√≥n de la visa.',
                importantLink: 'En caso de duda o para informaci√≥n oficial, siempre debe referirse a la p√°gina oficial de IRCC:',
                processTitle: 'Proceso de Solicitud',
                processSubtitle: 'Haga clic en cada paso para navegar directamente a esa secci√≥n:',
                process1Title: 'Tipo de Solicitud',
                process1Desc: 'Seleccione su situaci√≥n actual',
                process2Title: 'Documentos Requeridos',
                process2Desc: 'Revise la lista completa de documentos',
                process3Title: 'Subir Documentos',
                process3Desc: 'Suba todos los archivos requeridos',
                process4Title: 'Informaci√≥n Personal',
                process4Desc: 'Complete el formulario detallado',
                process5Title: 'Motivo del Viaje',
                process5Desc: 'Describa su viaje a Canad√°',
                process6Title: 'Revisi√≥n y Env√≠o',
                process6Desc: 'Revise y env√≠e su solicitud',
                considerationsTitle: 'Aspectos Importantes a Considerar',
                consideration1: '<strong>Documentos Completos:</strong> Recuerde que es importante tener todos los documentos completos en el momento de enviar, de lo contrario, el proceso de realizaci√≥n de la visa podr√≠a tomar m√°s tiempo.',
                consideration2: '<strong>Arraigo en su Pa√≠s:</strong> Es importante tener en cuenta que el Gobierno de Canad√° tiene muy en cuenta el arraigo que usted pueda tener en su pa√≠s (familiar, propiedades, trabajo, empresa, etc.).',
                consideration3: '<strong>Aspectos Financieros:</strong> Los aspectos financieros son muy tenidos en cuenta. Tenga en cuenta que las <strong>tarjetas de cr√©dito NO son consideradas como activos</strong> para el gobierno de Canad√°.',
                consideration4: '<strong>Honestidad:</strong> Es importante siempre decir la verdad en toda la aplicaci√≥n. La falsificaci√≥n de informaci√≥n puede resultar en la prohibici√≥n permanente de ingresar a Canad√°.',
                startButton: 'Iniciar Solicitud ‚Üí',
                
                // Steps
                step1Title: 'Seleccione el tipo de solicitud',
                step1Info: 'Por favor, seleccione su situaci√≥n para mostrarle los documentos espec√≠ficos que necesita.',
                step1Tip: 'üí° <strong>Consejo:</strong> Haga doble click en su opci√≥n para avanzar autom√°ticamente.',
                step1Option1Title: 'Adulto fuera de Canad√°',
                step1Option1Desc: 'Para personas adultas que se encuentran actualmente fuera de Canad√°.',
                step1Option2Title: 'Adulto dentro de Canad√°',
                step1Option2Desc: 'Para personas adultas que se encuentran actualmente en Canad√°.',
                step1Option3Title: 'Ni√±os/Menores',
                step1Option3Desc: 'Para solicitudes de visa de turismo para ni√±os menores de 18 a√±os.',
                
                step2Title: 'Documentos Requeridos',
                step2DownloadTitle: 'Descargue su Checklist en PDF',
                step2DownloadText: '<strong>¬°Importante!</strong> Descargue la lista completa de documentos requeridos en formato PDF. Este checklist incluye el <strong>nombre exacto de cada archivo PDF</strong> que debe preparar, junto con descripciones detalladas de cada documento.',
                step2DownloadButton: 'Descargar Checklist PDF',
                step2DownloadTip: '<strong>Tip:</strong> Imprima el checklist y m√°rquelo a medida que re√∫ne cada documento. Cada documento est√° claramente identificado con su nombre de archivo PDF correspondiente.',
                step2WarningTitle: 'Informaci√≥n Importante sobre Documentos',
                step2Warning: '<strong>Idioma:</strong> Todos los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos y acompa√±ados del documento original.<br><br><strong>Formato y Tama√±o:</strong> Los documentos deben subirse en formato PDF con un peso m√°ximo de 3.8 MB por archivo. La fotograf√≠a puede subirse tambi√©n en formato JPEG.',
                step2WarningLanguage: '<strong>Idioma:</strong> Todos los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos y acompa√±ados del documento original.',
                step2WarningFormat: '<strong>Formato y Tama√±o:</strong> Los documentos deben subirse en formato PDF con un peso m√°ximo de 3.8 MB por archivo. La fotograf√≠a puede subirse tambi√©n en formato JPEG.',
                step2DocsTitle: 'Documentos requeridos para su solicitud:',
                
                step3Title: 'Subir Documentos',
                step3AlertTitle: 'Instrucciones para Subir Documentos',
                step3Info1: '<strong>Formato PDF:</strong> Todos los documentos deben subirse en formato PDF con un tama√±o m√°ximo de 3.8 MB por archivo.',
                step3Info2: '<strong>Fotograf√≠a:</strong> La fotograf√≠a es el √∫nico documento que puede subirse tambi√©n en formato JPG/JPEG.',
                step3Info3: '<strong>Documentos no aplicables:</strong> Si alg√∫n documento no aplica a su situaci√≥n, puede marcarlo como "No Aplica" para continuar.',
                
                step5Title: 'Motivo del Viaje',
                step5AlertTitle: 'Instrucciones Importantes',
                step5AlertIntro: '<strong>Por favor, sea lo m√°s detallado y claro posible al describir el motivo de su viaje.</strong>',
                step5AlertSubtitle: 'Es fundamental que mencione:',
                step5Tip1: '<strong>Prop√≥sito principal:</strong> ¬øPor qu√© desea viajar a Canad√°? (turismo, visitar familia, negocios, etc.)',
                step5Tip2: '<strong>Lugares a visitar:</strong> Ciudades y sitios espec√≠ficos que planea conocer',
                step5Tip3: '<strong>Duraci√≥n:</strong> Tiempo exacto que permanecer√° en Canad√°',
                step5Tip4: '<strong>Arraigo:</strong> Razones por las cuales regresar√° a su pa√≠s de origen (trabajo, familia, propiedades, estudios, etc.)',
                step5Tip5: '<strong>Itinerario:</strong> Si tiene un plan espec√≠fico de actividades',
                step5AlertReminder: '<strong>Recuerde:</strong> La honestidad y el detalle son fundamentales. Una carta bien elaborada aumenta las posibilidades de aprobaci√≥n.',
                step5Warning: '<strong>‚ö†Ô∏è Importante:</strong> Esta informaci√≥n es revisada cuidadosamente por los oficiales de IRCC. Aseg√∫rese de que coincida con la documentaci√≥n que ha presentado.',
                step5FormTitle: 'Carta de Motivaci√≥n',
                step3Info: '<h3 style="margin-bottom: 1rem; font-size: 1.05rem;">üì§ Instrucciones para Subir Documentos</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Formato PDF:</strong> Todos los documentos deben subirse en formato PDF con un tama√±o m√°ximo de 3.8 MB por archivo.</li><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Fotograf√≠a:</strong> La fotograf√≠a es el √∫nico documento que puede subirse tambi√©n en formato JPG/JPEG.</li><li style="padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Idioma:</strong> Los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos por un traductor certificado.</li></ul>',
                uploadClick: 'Click para seleccionar archivo',
                uploadDrag: 'o arrastre aqu√≠',
                uploadSize: 'PDF, JPG, PNG (m√°x. 10MB)',
                notApplicable: 'Este documento no aplica a mi situaci√≥n',
                notApplicableShort: 'No Aplica',
                
                step4Title: 'Informaci√≥n Personal',
                firstName: 'Nombre(s)',
                lastName: 'Apellido(s)',
                birthDate: 'Fecha de Nacimiento',
                birthPlace: 'Lugar de Nacimiento',
                citizenship: 'Pa√≠s de Ciudadan√≠a',
                passportNumber: 'N√∫mero de Pasaporte',
                email: 'Correo Electr√≥nico',
                phone: 'Tel√©fono',
                address: 'Direcci√≥n Completa',
                travelDateStart: 'Fecha de Viaje (Ida)',
                travelDateEnd: 'Fecha de Viaje (Regreso)',
                travelPurpose: 'Prop√≥sito del Viaje',
                travelPurposePlaceholder: 'Describa brevemente el prop√≥sito de su viaje a Canad√°...',
                required: '*',
                
                // Secci√≥n 1: Informaci√≥n B√°sica
                section1Title: '1. Informaci√≥n del / la Solicitante',
                applicationDate: 'Fecha de diligenciamiento',
                naButton: 'N/A',
                
                // Secci√≥n 2: Estado Civil Actual
                section2Title: '2. Estado Civil Actual',
                maritalStatusLabel: 'A. Estado civil',
                maritalStatusSelect: 'Seleccione',
                maritalStatusMarried: 'Casado(a)',
                maritalStatusSingle: 'Soltero(a)',
                maritalStatusCommonLaw: 'Uni√≥n de hecho',
                maritalStatusSeparated: 'Separado(a) legalmente',
                maritalStatusDivorced: 'Divorciado(a)',
                maritalStatusWidowed: 'Viudo(a)',
                currentPartnerName: 'B. Nombres completos de la pareja actual',
                relationshipStartDate: 'C. Fecha inicio de la relaci√≥n',
                
                // Secci√≥n 3: Estado Civil Anterior
                section3Title: '3. Estado Civil Anterior',
                previousRelationshipLabel: 'A. ¬øTuvo una relaci√≥n anterior?',
                previousRelationType: 'B. Tipo de relaci√≥n',
                previousPartnerName: 'C. Nombre completo pareja anterior',
                previousPartnerBirthDate: 'D. Fecha nacimiento pareja anterior',
                previousRelationshipStart: 'E. Fecha inicio de la relaci√≥n anterior',
                previousRelationshipEnd: 'F. Fecha de finalizaci√≥n de la relaci√≥n anterior',
                yes: 'S√≠',
                no: 'No',
                
                // Secci√≥n 7: Estudios de Postgrado
                section7Title: '7. Estudios de Postgrado',
                section7Subtitle: '(comprendre estudios universitarios, diplomados o una formaci√≥n de aprendizaje). Si no tienes, colocar N/A en √°rea de estudios.',
                postgraduateStartDate: 'Fecha inicio',
                postgraduateEndDate: 'Fecha final',
                postgraduateCity: 'Ciudad',
                postgraduateCountry: 'Pa√≠s',
                postgraduateArea: '√Årea de estudios',
                postgraduateInstitution: 'Nombre del establecimiento educativo',
                
                // Secci√≥n 8: Empleos
                section8Title: '8. Empleos Ocupados en los 10 √öltimos A√±os',
                jobStartDate: 'Fecha inicio empleo',
                jobEndDate: 'Fecha final empleo',
                jobCity: 'Ciudad',
                jobCountry: 'Pa√≠s',
                jobPosition: 'Cargo',
                jobCompany: 'Empresa',
                addEmployment: 'Adicionar otro empleo',
                
                // Secci√≥n 9: Informaci√≥n Familiar
                section9Title: '9. Informaci√≥n Familiar',
                
                // 9.1 Esposo/Pareja
                section91Title: '9.1. Informaci√≥n del Esposo(a) o Pareja actual (si aplica). Si es soltero(a) escribir N/A',
                spouseName: 'A. Nombre Completo',
                spouseBirthDate: 'B. Fecha Nacimiento',
                spouseBirthCountry: 'C. Pa√≠s Nacimiento',
                spouseAddress: 'D. Direcci√≥n actual',
                spouseOccupation: 'G. Ocupaci√≥n',
                spouseWillTravel: 'Su pareja lo acompa√±ar√° en el Viaje?',
                
                // 9.2 Madre
                section92Title: '9.2. Informaci√≥n de la Madre. Si su madre esta viva, diligencie las casillas A,B,C,D,F,G,H,I. Si su madre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E',
                motherName: 'A. Nombre completo',
                motherBirthDate: 'B. Fecha nacimiento',
                motherBirthCountry: 'C. Pa√≠s nacimiento',
                motherAlive: 'D. Su madre vive?',
                motherDeceasedDate: 'E. Fecha deceso',
                motherAddress: 'F. Direcci√≥n actual',
                motherOccupation: 'G. Ocupaci√≥n',
                motherMaritalStatus: 'H. Estado Civil',
                motherWillTravel: 'I. Su madre lo acompa√±ar√° en el viaje?',
                
                // 9.3 Padre
                section93Title: '9.3. Informaci√≥n del Padre. Si su padre esta vivo, diligencie las casillas A,B,C,D,F,G,H,I. Si su padre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E',
                fatherName: 'A. Nombre completo',
                fatherBirthDate: 'B. Fecha nacimiento',
                fatherBirthCountry: 'C. Pa√≠s nacimiento',
                fatherAlive: 'D. Su padre vive?',
                fatherDeceasedDate: 'E. Fecha deceso',
                fatherAddress: 'F. Direcci√≥n actual',
                fatherOccupation: 'G. Ocupaci√≥n',
                fatherMaritalStatus: 'H. Estado civil',
                fatherWillTravel: 'I. Su padre lo acompa√±ar√° en el viaje?',
                
                // 9.4 Hijos
                section94Title: '9.4. Informaci√≥n de Hijos o Hijas. Si su(s) hijo(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hijo(a)s fallecio(eron), diligencie √∫nicamente casillas A,B,C,D,E.',
                childName: 'A. Nombre completo',
                childBirthDate: 'B. Fecha nacimiento',
                childRelationship: 'C. Relaci√≥n familiar',
                childAlive: 'D. Su hijo(a) vive?',
                childDeceasedDate: 'E. Fecha deceso',
                childAddress: 'F. Direcci√≥n actual',
                childOccupation: 'G. Ocupaci√≥n',
                childMaritalStatus: 'H. Estado civil',
                childWillTravel: 'I. Su hijo(a) lo acompa√±ara en el viaje?',
                childDaughter: 'Hija',
                childSon: 'Hijo',
                childStepdaughter: 'Hijastra',
                childStepson: 'Hijastro',
                addChild: 'Adicionar otro hijo(a)',
                
                // 9.5 Hermanos
                section95Title: '9.5. Informaci√≥n de Hermanos(as). Si su(s) hermano(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hermano(a)s fallecio(eron) diligencie √∫nicamente casillas A,B,C,D,E',
                siblingName: 'A. Nombre completo',
                siblingBirthDate: 'B. Fecha nacimiento',
                siblingRelationship: 'C. Relaci√≥n familiar',
                siblingAlive: 'D. Hermano(a) vive?',
                siblingDeceasedDate: 'E. Fecha deceso',
                siblingAddress: 'F. Direcci√≥n actual',
                siblingOccupation: 'G. Ocupaci√≥n',
                siblingMaritalStatus: 'H. Estado civil',
                siblingWillTravel: 'I. Su hermano(a) lo acompa√±ar√° en el viaje?',
                siblingSister: 'Hermana',
                siblingBrother: 'Hermano',
                siblingStepsister: 'Hermanastra',
                siblingStepbrother: 'Hermanastro',
                addSibling: 'Adicionar otro hermano(a)',
                
                // Secci√≥n 4: Idiomas
                section4Title: '4. Idiomas',
                nativeLanguage: 'A. Lengua materna',
                nativeLanguageSelect: 'Seleccione',
                nativeLanguageSpanish: 'Espa√±ol',
                nativeLanguageEnglish: 'Ingl√©s',
                nativeLanguageFrench: 'Franc√©s',
                nativeLanguagePortuguese: 'Portugu√©s',
                nativeLanguageOther: 'Otro',
                languageAbility: 'B. ¬øEn qu√© otro idioma se puede comunicar?',
                languageAbilityEnglish: 'Ingl√©s',
                languageAbilityFrench: 'Franc√©s',
                languageAbilityBoth: 'En los dos idiomas',
                languageAbilityNeither: 'En ninguno',
                preferredLanguage: '¬øEn cu√°l idioma se sentir√≠a m√°s confiable?',
                languageTest: '¬øHa hecho alguna prueba de ingl√©s o franc√©s?',
                languageTestType: '¬øCu√°l prueba?',
                languageTestYear: '¬øEn qu√© a√±o?',
                
                // Secci√≥n 5: Direcci√≥n
                section5Title: '5. Direcci√≥n del / la Solicitante',
                addressLabel: 'A. Direcci√≥n actual',
                city: 'B. Ciudad',
                region: 'C. Regi√≥n, Provincia, Depto',
                postalCode: 'E. C√≥digo Postal (si aplica)',
                
                // Secci√≥n 6: Detalles del Viaje
                section6Title: '6. Detalles del Viaje a Canad√°',
                arrivalDate: 'A. Fecha de llegada a Canad√°',
                departureDate: 'B. Fecha de salida de Canad√°',
                availableFunds: 'C. Dinero disponible (en d√≥lares CAD)',
                whoToVisit: 'D. ¬øA qui√©n visita?',
                personToVisit: 'E. Nombre de la persona que visita',
                visitPersonAddress: 'F. Direcci√≥n de la persona que visita',
                
                // Secci√≥n 10: Antecedentes
                section10Title: '10. Antecedentes',
                antecedent1: '1. Usted o alguien de su familia ha tenido tuberculosis en los √∫ltimos dos a√±os?',
                antecedent2: '2. Tiene alg√∫n desorden f√≠sico o mental que necesite servicios sociales o medicamentos durante su estad√≠a en Canad√° ?',
                antecedent3: '3. Ha permanecido en suelo canadiense despu√©s de la expiraci√≥n de su estatus?',
                antecedent4: '4. Le han negado una visa o permiso o le han impedido antes la entrada a territorio canadiense o a otro pa√≠s?',
                antecedent5: '5. Ha presentado anteriormente una solicitud de entrada a Canad√°?',
                antecedent6: '6. Ha sido acusado, retenido o reconocido culpable de alguna infracci√≥n penal en alg√∫n otro pa√≠s o territorio?',
                antecedent7: '7. Ha hecho parte de un grupo armado, unidad contra la defensa civil o de un cuerpo de polic√≠a?',
                antecedent8: '8. Ha sido miembro o afiliado de alg√∫n partido pol√≠tico o de un grupo u organizaci√≥n que haya utilizado la violencia con el fin de alcanzar los objetivos pol√≠ticos o religiosos o que haya estado implicado en actividades criminales?',
                antecedent9: '9. Ha sido testigo de malos tratamientos infrigidos a prisioneros, civiles, o ha realizado actos de vandalismo o de profanaci√≥n de edificios religiosos?',
                antecedentJustification: 'En caso que haya respondido SI a algunas de las afirmaciones anteriores, por favor justificar la respuesta brevemente (indique el numeral por el cual da la respuesta). En caso contrario escribir N/A:',
                
                // Secci√≥n 11: Historial de Viajes
                section11Title: '11. Historial de Viajes Efectuados en los 10 √öltimos A√±os',
                section11Subtitle: 'En caso que no haya realizado viajes, colocar N/A en ciudad y pa√≠s.',
                travelStartDate: 'Fecha inicial',
                travelEndDate: 'Fecha final',
                travelCity: 'Ciudad',
                travelCountry: 'Pa√≠s',
                travelPurpose: 'Motivo del Viaje',
                addTravel: 'Adicionar otro viaje',
                
                // Secci√≥n 12: Servicio Militar
                section12Title: '12. Servicio Militar (si aplica)',
                section12Subtitle: 'En caso que no haya realizado servicio militar, colocar N/A en ciudad y pa√≠s.',
                militaryStartDate: 'Fecha inicial',
                militaryEndDate: 'Fecha final',
                militaryCity: 'Ciudad',
                militaryCountry: 'Pa√≠s',
                militaryRank: 'Rango',
                
                step5Title: 'Revisi√≥n y Env√≠o',
                step5Success: 'Por favor, revise toda la informaci√≥n antes de enviar. Una vez enviada, se generar√° un PDF con todos sus documentos y se enviar√° a LMBI Immigration.',
                step6Title: 'Revisi√≥n y Env√≠o',
                step6Success: 'Por favor, revise toda la informaci√≥n antes de enviar. Una vez enviada, se generar√° un PDF con todos sus documentos y se enviar√° a LMBI Immigration.',
                step6ConfirmTitle: 'Confirmaci√≥n de Datos',
                step6ConfirmText: '<strong>Importante:</strong> Por favor, confirme sus datos de contacto antes de enviar la solicitud. Estos datos ser√°n utilizados para todas las comunicaciones relacionadas con su visa.',
                personalInfoTitle: 'Informaci√≥n Personal',
                docsUploadedTitle: 'Documentos Subidos',
                submitButton: 'Enviar Solicitud',
                
                // Navigation
                navStep0: 'Bienvenida',
                navStep1: 'Tipo de Solicitud',
                navStep2: 'Documentos Requeridos',
                navStep3: 'Subir Documentos',
                navStep4: 'Informaci√≥n Personal',
                navStep5: 'Motivo del Viaje',
                navStep6: 'Revisi√≥n y Env√≠o',
                step: 'Paso',
                of: 'de',
                completed: 'completado',
                
                // Buttons
                backToHome: 'Volver a Inicio',
                back: 'Atr√°s',
                continue: 'Continuar',
                home: 'Inicio',
                
                // Messages
                successMessage: '¬°Solicitud enviada exitosamente!\n\nSu solicitud ha sido enviada a LMBI Immigration. Recibir√° una confirmaci√≥n por correo electr√≥nico pronto.\n\nN√∫mero de referencia:',
                errorMessage: 'Error al enviar la solicitud. Por favor, intente nuevamente.',
                fileTooLarge: 'El archivo es demasiado grande. Tama√±o m√°ximo: 3.8MB',
                loadingMessage: 'Generando PDF y enviando solicitud...',
                selectTypeFirst: 'Por favor, primero seleccione su tipo de solicitud en el Paso 1.',
                pleaseGoToStep1: 'Por favor, vaya al Paso 1 y seleccione su tipo de solicitud.'
            },
            en: {
                // Language Selector
                selectLanguage: 'Seleccione su idioma / Select your language / S√©lectionnez votre langue',
                languageInstruction: 'Please select your preferred language to continue',
                
                // Header
                headerTitle: 'Canadian Tourist Visa Application',
                
                // Welcome
                welcomeTitle: 'Welcome to LMBI Immigration',
                welcomeIntro: 'Welcome to our Canadian tourist visa application portal. We are here to guide you through every step of the process in a clear and professional manner.',
                importantTitle: 'Important Information - IRCC',
                importantText: '<strong>Important Note:</strong> The decision to approve or reject a visa application is solely the responsibility of <strong>IRCC</strong> (Immigration, Refugees and Citizenship Canada) Immigration Officers. LMBI Immigration provides professional assistance in preparing documents but cannot guarantee visa approval.',
                importantLink: 'For any doubts or official information, always refer to the official IRCC website:',
                processTitle: 'Application Process',
                processSubtitle: 'Click on each step to navigate directly to that section:',
                process1Title: 'Application Type',
                process1Desc: 'Select your current situation',
                process2Title: 'Required Documents',
                process2Desc: 'Review the complete list of documents',
                process3Title: 'Upload Documents',
                process3Desc: 'Upload all required files',
                process4Title: 'Personal Information',
                process4Desc: 'Complete the detailed form',
                process5Title: 'Travel Purpose',
                process5Desc: 'Describe your trip to Canada',
                process6Title: 'Review and Submit',
                process6Desc: 'Review and submit your application',
                considerationsTitle: 'Important Considerations',
                consideration1: '<strong>Complete Documents:</strong> Remember that it is important to have all documents complete at the time of submission, otherwise the visa process may take longer.',
                consideration2: '<strong>Ties to Your Country:</strong> It is important to note that the Government of Canada highly values the ties you may have to your country (family, property, work, business, etc.).',
                consideration3: '<strong>Financial Aspects:</strong> Financial aspects are highly considered. Please note that <strong>credit cards are NOT considered assets</strong> by the Government of Canada.',
                consideration4: '<strong>Honesty:</strong> It is always important to tell the truth throughout the application. Falsifying information can result in a permanent ban from entering Canada.',
                startButton: 'Start Application ‚Üí',
                
                // Steps
                step1Title: 'Select application type',
                step1Info: 'Please select your situation to show you the specific documents you need.',
                step1Tip: 'üí° <strong>Tip:</strong> Double-click on your option to advance automatically.',
                step1Option1Title: 'Adult outside Canada',
                step1Option1Desc: 'For adults currently outside of Canada.',
                step1Option2Title: 'Adult inside Canada',
                step1Option2Desc: 'For adults currently in Canada.',
                step1Option3Title: 'Children/Minors',
                step1Option3Desc: 'For tourist visa applications for children under 18 years old.',
                
                step2Title: 'Required Documents',
                step2DownloadTitle: 'Download Your PDF Checklist',
                step2DownloadText: '<strong>Important!</strong> Download the complete list of required documents in PDF format. This checklist includes the <strong>exact name of each PDF file</strong> you need to prepare, along with detailed descriptions of each document.',
                step2DownloadButton: 'Download PDF Checklist',
                step2DownloadTip: '<strong>Tip:</strong> Print the checklist and mark it as you gather each document. Each document is clearly identified with its corresponding PDF filename.',
                step2WarningTitle: 'Important Information about Documents',
                step2Warning: '<strong>Language:</strong> All documents not in French or English must be translated and accompanied by the original document.<br><br><strong>Format and Size:</strong> Documents must be uploaded in PDF format with a maximum size of 3.8 MB per file. Photographs can also be uploaded in JPEG format.',
                step2WarningLanguage: '<strong>Language:</strong> All documents not in French or English must be translated and accompanied by the original document.',
                step2WarningFormat: '<strong>Format and Size:</strong> Documents must be uploaded in PDF format with a maximum size of 3.8 MB per file. Photographs can also be uploaded in JPEG format.',
                step2DocsTitle: 'Required documents for your application:',
                
                step3Title: 'Upload Documents',
                step3AlertTitle: 'Instructions for Uploading Documents',
                step3Info1: '<strong>PDF Format:</strong> All documents must be uploaded in PDF format with a maximum size of 3.8 MB per file.',
                step3Info2: '<strong>Photograph:</strong> The photograph is the only document that can also be uploaded in JPG/JPEG format.',
                step3Info3: '<strong>Non-applicable documents:</strong> If a document does not apply to your situation, you can mark it as "Not Applicable" to continue.',
                
                step5Title: 'Travel Purpose',
                step5AlertTitle: 'Important Instructions',
                step5AlertIntro: '<strong>Please be as detailed and clear as possible when describing the purpose of your trip.</strong>',
                step5AlertSubtitle: 'It is essential that you mention:',
                step5Tip1: '<strong>Main purpose:</strong> Why do you want to travel to Canada? (tourism, visiting family, business, etc.)',
                step5Tip2: '<strong>Places to visit:</strong> Specific cities and sites you plan to see',
                step5Tip3: '<strong>Duration:</strong> Exact time you will stay in Canada',
                step5Tip4: '<strong>Ties:</strong> Reasons why you will return to your country of origin (work, family, property, studies, etc.)',
                step5Tip5: '<strong>Itinerary:</strong> If you have a specific plan of activities',
                step5AlertReminder: '<strong>Remember:</strong> Honesty and detail are fundamental. A well-crafted letter increases the chances of approval.',
                step5Warning: '<strong>‚ö†Ô∏è Important:</strong> This information is carefully reviewed by IRCC officers. Make sure it matches the documentation you have submitted.',
                step5FormTitle: 'Motivation Letter',
                step3Info: '<h3 style="margin-bottom: 1rem; font-size: 1.05rem;">üì§ Instructions for Uploading Documents</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>PDF Format:</strong> All documents must be uploaded in PDF format with a maximum size of 3.8 MB per file.</li><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Photograph:</strong> The photograph is the only document that can also be uploaded in JPG/JPEG format.</li><li style="padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Language:</strong> Documents not in French or English must be translated by a certified translator.</li></ul>',
                uploadClick: 'Click to select file',
                uploadDrag: 'or drag here',
                uploadSize: 'PDF, JPG, PNG (max. 10MB)',
                notApplicable: 'This document does not apply to my situation',
                notApplicableShort: 'Not Applicable',
                
                step4Title: 'Personal Information',
                firstName: 'First Name(s)',
                lastName: 'Last Name(s)',
                birthDate: 'Date of Birth',
                birthPlace: 'Place of Birth',
                citizenship: 'Country of Citizenship',
                passportNumber: 'Passport Number',
                email: 'Email Address',
                phone: 'Phone',
                address: 'Full Address',
                travelDateStart: 'Travel Date (Departure)',
                travelDateEnd: 'Travel Date (Return)',
                travelPurpose: 'Purpose of Travel',
                travelPurposePlaceholder: 'Briefly describe the purpose of your trip to Canada...',
                required: '*',
                
                // Section 1: Basic Information
                section1Title: '1. Applicant Information',
                applicationDate: 'Application date',
                naButton: 'N/A',
                
                // Section 2: Current Marital Status
                section2Title: '2. Current Marital Status',
                maritalStatusLabel: 'A. Marital status',
                maritalStatusSelect: 'Select',
                maritalStatusMarried: 'Married',
                maritalStatusSingle: 'Single',
                maritalStatusCommonLaw: 'Common-law',
                maritalStatusSeparated: 'Legally separated',
                maritalStatusDivorced: 'Divorced',
                maritalStatusWidowed: 'Widowed',
                currentPartnerName: 'B. Full name of current partner',
                relationshipStartDate: 'C. Relationship start date',
                
                // Section 3: Previous Marital Status
                section3Title: '3. Previous Marital Status',
                previousRelationshipLabel: 'A. Did you have a previous relationship?',
                previousRelationType: 'B. Type of relationship',
                previousPartnerName: 'C. Full name of previous partner',
                previousPartnerBirthDate: 'D. Date of birth of previous partner',
                previousRelationshipStart: 'E. Start date of previous relationship',
                previousRelationshipEnd: 'F. End date of previous relationship',
                yes: 'Yes',
                no: 'No',
                
                // Section 7: Postgraduate Studies
                section7Title: '7. Postgraduate Studies',
                section7Subtitle: '(including university studies, diplomas or apprenticeship training). If you don\'t have any, write N/A in area of studies.',
                postgraduateStartDate: 'Start date',
                postgraduateEndDate: 'End date',
                postgraduateCity: 'City',
                postgraduateCountry: 'Country',
                postgraduateArea: 'Area of studies',
                postgraduateInstitution: 'Name of educational institution',
                
                // Section 8: Employment
                section8Title: '8. Employment in the Last 10 Years',
                jobStartDate: 'Employment start date',
                jobEndDate: 'Employment end date',
                jobCity: 'City',
                jobCountry: 'Country',
                jobPosition: 'Position',
                jobCompany: 'Company',
                addEmployment: 'Add another employment',
                
                // Section 9: Family Information
                section9Title: '9. Family Information',
                
                // 9.1 Spouse/Partner
                section91Title: '9.1. Current Spouse or Partner Information (if applicable). If single write N/A',
                spouseName: 'A. Full Name',
                spouseBirthDate: 'B. Date of Birth',
                spouseBirthCountry: 'C. Country of Birth',
                spouseAddress: 'D. Current address',
                spouseOccupation: 'G. Occupation',
                spouseWillTravel: 'Will your partner accompany you on the trip?',
                
                // 9.2 Mother
                section92Title: '9.2. Mother Information. If your mother is alive, complete boxes A,B,C,D,F,G,H,I. If your mother is deceased, complete only boxes A,B,C,D,E',
                motherName: 'A. Full name',
                motherBirthDate: 'B. Date of birth',
                motherBirthCountry: 'C. Country of birth',
                motherAlive: 'D. Is your mother alive?',
                motherDeceasedDate: 'E. Date of death',
                motherAddress: 'F. Current address',
                motherOccupation: 'G. Occupation',
                motherMaritalStatus: 'H. Marital Status',
                motherWillTravel: 'I. Will your mother accompany you on the trip?',
                
                // 9.3 Father
                section93Title: '9.3. Father Information. If your father is alive, complete boxes A,B,C,D,F,G,H,I. If your father is deceased, complete only boxes A,B,C,D,E',
                fatherName: 'A. Full name',
                fatherBirthDate: 'B. Date of birth',
                fatherBirthCountry: 'C. Country of birth',
                fatherAlive: 'D. Is your father alive?',
                fatherDeceasedDate: 'E. Date of death',
                fatherAddress: 'F. Current address',
                fatherOccupation: 'G. Occupation',
                fatherMaritalStatus: 'H. Marital status',
                fatherWillTravel: 'I. Will your father accompany you on the trip?',
                
                // 9.4 Children
                section94Title: '9.4. Children Information. If your child(ren) is/are alive, complete boxes A,B,C,D,F,G,H,I. If your child(ren) is/are deceased, complete only boxes A,B,C,D,E.',
                childName: 'A. Full name',
                childBirthDate: 'B. Date of birth',
                childRelationship: 'C. Family relationship',
                childAlive: 'D. Is your child alive?',
                childDeceasedDate: 'E. Date of death',
                childAddress: 'F. Current address',
                childOccupation: 'G. Occupation',
                childMaritalStatus: 'H. Marital status',
                childWillTravel: 'I. Will your child accompany you on the trip?',
                childDaughter: 'Daughter',
                childSon: 'Son',
                childStepdaughter: 'Stepdaughter',
                childStepson: 'Stepson',
                addChild: 'Add another child',
                
                // 9.5 Siblings
                section95Title: '9.5. Siblings Information. If your sibling(s) is/are alive, complete boxes A,B,C,D,F,G,H,I. If your sibling(s) is/are deceased, complete only boxes A,B,C,D,E',
                siblingName: 'A. Full name',
                siblingBirthDate: 'B. Date of birth',
                siblingRelationship: 'C. Family relationship',
                siblingAlive: 'D. Is your sibling alive?',
                siblingDeceasedDate: 'E. Date of death',
                siblingAddress: 'F. Current address',
                siblingOccupation: 'G. Occupation',
                siblingMaritalStatus: 'H. Marital status',
                siblingWillTravel: 'I. Will your sibling accompany you on the trip?',
                siblingSister: 'Sister',
                siblingBrother: 'Brother',
                siblingStepsister: 'Stepsister',
                siblingStepbrother: 'Stepbrother',
                addSibling: 'Add another sibling',
                
                // Section 4: Languages
                section4Title: '4. Languages',
                nativeLanguage: 'A. Mother tongue',
                nativeLanguageSelect: 'Select',
                nativeLanguageSpanish: 'Spanish',
                nativeLanguageEnglish: 'English',
                nativeLanguageFrench: 'French',
                nativeLanguagePortuguese: 'Portuguese',
                nativeLanguageOther: 'Other',
                languageAbility: 'B. In what other language can you communicate?',
                languageAbilityEnglish: 'English',
                languageAbilityFrench: 'French',
                languageAbilityBoth: 'In both languages',
                languageAbilityNeither: 'In neither',
                preferredLanguage: 'In which language would you feel more confident?',
                languageTest: 'Have you taken any English or French test?',
                languageTestType: 'Which test?',
                languageTestYear: 'In which year?',
                
                // Section 5: Address
                section5Title: '5. Applicant Address',
                addressLabel: 'A. Current address',
                city: 'B. City',
                region: 'C. Region, Province, State',
                postalCode: 'E. Postal Code (if applicable)',
                
                // Section 6: Travel Details
                section6Title: '6. Travel Details to Canada',
                arrivalDate: 'A. Arrival date in Canada',
                departureDate: 'B. Departure date from Canada',
                availableFunds: 'C. Available funds (in Canadian dollars)',
                whoToVisit: 'D. Who are you visiting?',
                personToVisit: 'E. Name of person to visit',
                visitPersonAddress: 'F. Address of person to visit',
                
                // Section 10: Background
                section10Title: '10. Background',
                antecedent1: '1. Have you or anyone in your family had tuberculosis in the last two years?',
                antecedent2: '2. Do you have any physical or mental disorder that requires social services or medications during your stay in Canada?',
                antecedent3: '3. Have you remained on Canadian soil after the expiration of your status?',
                antecedent4: '4. Have you been denied a visa or permit or have you been previously prevented from entering Canadian territory or another country?',
                antecedent5: '5. Have you previously submitted an application to enter Canada?',
                antecedent6: '6. Have you been charged, detained or found guilty of any criminal offense in any other country or territory?',
                antecedent7: '7. Have you been part of an armed group, unit against civil defense or a police force?',
                antecedent8: '8. Have you been a member or affiliate of any political party or group or organization that has used violence in order to achieve political or religious objectives or that has been involved in criminal activities?',
                antecedent9: '9. Have you witnessed mistreatment inflicted on prisoners, civilians, or carried out acts of vandalism or desecration of religious buildings?',
                antecedentJustification: 'If you have answered YES to any of the above statements, please justify your answer briefly (indicate the number for which you give the answer). Otherwise write N/A:',
                
                // Section 11: Travel History
                section11Title: '11. Travel History in the Last 10 Years',
                section11Subtitle: 'If you have not traveled, write N/A in city and country.',
                travelStartDate: 'Start date',
                travelEndDate: 'End date',
                travelCity: 'City',
                travelCountry: 'Country',
                travelPurpose: 'Purpose of Trip',
                addTravel: 'Add another trip',
                
                // Section 12: Military Service
                section12Title: '12. Military Service (if applicable)',
                section12Subtitle: 'If you have not served in the military, write N/A in city and country.',
                militaryStartDate: 'Start date',
                militaryEndDate: 'End date',
                militaryCity: 'City',
                militaryCountry: 'Country',
                militaryRank: 'Rank',
                
                step5Title: 'Review and Submit',
                step5Success: 'Please review all information before submitting. Once submitted, a PDF will be generated with all your documents and sent to LMBI Immigration.',
                step6Title: 'Review and Submit',
                step6Success: 'Please review all information before submitting. Once submitted, a PDF will be generated with all your documents and sent to LMBI Immigration.',
                step6ConfirmTitle: 'Data Confirmation',
                step6ConfirmText: '<strong>Important:</strong> Please confirm your contact information before submitting the application. This information will be used for all communications related to your visa.',
                personalInfoTitle: 'Personal Information',
                docsUploadedTitle: 'Uploaded Documents',
                submitButton: 'Submit Application',
                
                // Navigation
                navStep0: 'Welcome',
                navStep1: 'Application Type',
                navStep2: 'Required Documents',
                navStep3: 'Upload Documents',
                navStep4: 'Personal Information',
                navStep5: 'Travel Purpose',
                navStep6: 'Review & Submit',
                step: 'Step',
                of: 'of',
                completed: 'completed',
                
                // Buttons
                backToHome: 'Back to Home',
                back: 'Back',
                continue: 'Continue',
                home: 'Home',
                
                // Messages
                successMessage: 'Application submitted successfully!\n\nYour application has been sent to LMBI Immigration. You will receive an email confirmation soon.\n\nReference number:',
                errorMessage: 'Error submitting application. Please try again.',
                fileTooLarge: 'File is too large. Maximum size: 3.8MB',
                loadingMessage: 'Generating PDF and submitting application...',
                selectTypeFirst: 'Please first select your application type in Step 1.',
                pleaseGoToStep1: 'Please go to Step 1 and select your application type.'
            },
            fr: {
                // Language Selector
                selectLanguage: 'Seleccione su idioma / Select your language / S√©lectionnez votre langue',
                languageInstruction: 'Veuillez s√©lectionner votre langue pr√©f√©r√©e pour continuer',
                
                // Header
                headerTitle: 'Demande de Visa Touristique Canadien',
                
                // Welcome
                welcomeTitle: 'Bienvenue chez LMBI Immigration',
                welcomeIntro: 'Bienvenue sur notre portail de demande de visa touristique canadien. Nous sommes l√† pour vous guider √† chaque √©tape du processus de mani√®re claire et professionnelle.',
                importantTitle: 'Information Importante - IRCC',
                importantText: '<strong>Note Importante:</strong> La d√©cision d\'approuver ou de rejeter une demande de visa rel√®ve exclusivement de la responsabilit√© des agents d\'immigration d\'<strong>IRCC</strong> (Immigration, R√©fugi√©s et Citoyennet√© Canada). LMBI Immigration fournit une assistance professionnelle dans la pr√©paration des documents mais ne peut garantir l\'approbation du visa.',
                importantLink: 'En cas de doute ou pour des informations officielles, r√©f√©rez-vous toujours au site officiel d\'IRCC:',
                processTitle: 'Processus de Demande',
                processSubtitle: 'Cliquez sur chaque √©tape pour naviguer directement vers cette section:',
                process1Title: 'Type de Demande',
                process1Desc: 'S√©lectionnez votre situation actuelle',
                process2Title: 'Documents Requis',
                process2Desc: 'Consultez la liste compl√®te des documents',
                process3Title: 'T√©l√©charger Documents',
                process3Desc: 'T√©l√©chargez tous les fichiers requis',
                process4Title: 'Informations Personnelles',
                process4Desc: 'Remplissez le formulaire d√©taill√©',
                process5Title: 'Motif du Voyage',
                process5Desc: 'D√©crivez votre voyage au Canada',
                process6Title: 'R√©vision et Envoi',
                process6Desc: 'R√©visez et soumettez votre demande',
                considerationsTitle: 'Aspects Importants √† Consid√©rer',
                consideration1: '<strong>Documents Complets:</strong> N\'oubliez pas qu\'il est important d\'avoir tous les documents complets au moment de la soumission, sinon le processus de visa pourrait prendre plus de temps.',
                consideration2: '<strong>Liens avec Votre Pays:</strong> Il est important de noter que le gouvernement du Canada accorde une grande importance aux liens que vous pouvez avoir avec votre pays (famille, propri√©t√©, travail, entreprise, etc.).',
                consideration3: '<strong>Aspects Financiers:</strong> Les aspects financiers sont tr√®s pris en compte. Veuillez noter que les <strong>cartes de cr√©dit ne sont PAS consid√©r√©es comme des actifs</strong> par le gouvernement du Canada.',
                consideration4: '<strong>Honn√™tet√©:</strong> Il est toujours important de dire la v√©rit√© tout au long de la demande. La falsification d\'informations peut entra√Æner une interdiction permanente d\'entrer au Canada.',
                startButton: 'Commencer la Demande ‚Üí',
                
                // Steps
                step1Title: 'S√©lectionnez le type de demande',
                step1Info: 'Veuillez s√©lectionner votre situation pour vous montrer les documents sp√©cifiques dont vous avez besoin.',
                step1Tip: 'üí° <strong>Conseil:</strong> Double-cliquez sur votre option pour avancer automatiquement.',
                step1Option1Title: 'Adulte hors du Canada',
                step1Option1Desc: 'Pour les adultes actuellement hors du Canada.',
                step1Option2Title: 'Adulte au Canada',
                step1Option2Desc: 'Pour les adultes actuellement au Canada.',
                step1Option3Title: 'Enfants/Mineurs',
                step1Option3Desc: 'Pour les demandes de visa touristique pour les enfants de moins de 18 ans.',
                
                step2Title: 'Documents Requis',
                step2DownloadTitle: 'T√©l√©chargez Votre Liste en PDF',
                step2DownloadText: '<strong>Important!</strong> T√©l√©chargez la liste compl√®te des documents requis au format PDF. Cette liste comprend le <strong>nom exact de chaque fichier PDF</strong> que vous devez pr√©parer, ainsi que des descriptions d√©taill√©es de chaque document.',
                step2DownloadButton: 'T√©l√©charger Liste PDF',
                step2DownloadTip: '<strong>Conseil:</strong> Imprimez la liste et cochez-la au fur et √† mesure que vous rassemblez chaque document. Chaque document est clairement identifi√© avec son nom de fichier PDF correspondant.',
                step2WarningTitle: 'Informations Importantes sur les Documents',
                step2Warning: '<strong>Langue:</strong> Tous les documents qui ne sont pas en fran√ßais ou en anglais doivent √™tre traduits et accompagn√©s du document original.<br><br><strong>Format et Taille:</strong> Les documents doivent √™tre t√©l√©charg√©s au format PDF avec une taille maximale de 3.8 MB par fichier. Les photographies peuvent √©galement √™tre t√©l√©charg√©es au format JPEG.',
                step2WarningLanguage: '<strong>Langue:</strong> Tous les documents qui ne sont pas en fran√ßais ou en anglais doivent √™tre traduits et accompagn√©s du document original.',
                step2WarningFormat: '<strong>Format et Taille:</strong> Les documents doivent √™tre t√©l√©charg√©s au format PDF avec une taille maximale de 3.8 MB par fichier. Les photographies peuvent √©galement √™tre t√©l√©charg√©es au format JPEG.',
                step2DocsTitle: 'Documents requis pour votre demande:',
                
                step3Title: 'T√©l√©charger les Documents',
                step3AlertTitle: 'Instructions pour t√©l√©charger les documents',
                step3Info1: '<strong>Format PDF:</strong> Tous les documents doivent √™tre t√©l√©charg√©s en format PDF avec une taille maximale de 3,8 MB par fichier.',
                step3Info2: '<strong>Photographie:</strong> La photographie est le seul document qui peut √©galement √™tre t√©l√©charg√© en format JPG/JPEG.',
                step3Info3: '<strong>Documents non applicables:</strong> Si un document ne s\'applique pas √† votre situation, vous pouvez le marquer comme "Non applicable" pour continuer.',
                
                step5Title: 'Motif du voyage',
                step5AlertTitle: 'Instructions importantes',
                step5AlertIntro: '<strong>Veuillez √™tre aussi d√©taill√© et clair que possible lorsque vous d√©crivez le motif de votre voyage.</strong>',
                step5AlertSubtitle: 'Il est essentiel que vous mentionniez:',
                step5Tip1: '<strong>Objectif principal:</strong> Pourquoi souhaitez-vous voyager au Canada? (tourisme, visite familiale, affaires, etc.)',
                step5Tip2: '<strong>Lieux √† visiter:</strong> Villes et sites sp√©cifiques que vous pr√©voyez de voir',
                step5Tip3: '<strong>Dur√©e:</strong> Temps exact que vous passerez au Canada',
                step5Tip4: '<strong>Liens:</strong> Raisons pour lesquelles vous retournerez dans votre pays d\'origine (travail, famille, propri√©t√©, √©tudes, etc.)',
                step5Tip5: '<strong>Itin√©raire:</strong> Si vous avez un plan sp√©cifique d\'activit√©s',
                step5AlertReminder: '<strong>Rappelez-vous:</strong> L\'honn√™tet√© et le d√©tail sont fondamentaux. Une lettre bien r√©dig√©e augmente les chances d\'approbation.',
                step5Warning: '<strong>‚ö†Ô∏è Important:</strong> Ces informations sont examin√©es attentivement par les agents d\'IRCC. Assurez-vous qu\'elles correspondent √† la documentation que vous avez soumise.',
                step5FormTitle: 'Lettre de motivation',
                step3Info: '<h3 style="margin-bottom: 1rem; font-size: 1.05rem;">üì§ Instructions pour T√©l√©charger les Documents</h3><ul style="list-style: none; padding: 0; margin: 0;"><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Format PDF:</strong> Tous les documents doivent √™tre t√©l√©charg√©s au format PDF avec une taille maximale de 3.8 MB par fichier.</li><li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Photographie:</strong> La photographie est le seul document qui peut √©galement √™tre t√©l√©charg√© au format JPG/JPEG.</li><li style="padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span><strong>Langue:</strong> Les documents qui ne sont pas en fran√ßais ou en anglais doivent √™tre traduits par un traducteur certifi√©.</li></ul>',
                uploadClick: 'Cliquez pour s√©lectionner un fichier',
                uploadDrag: 'ou glissez ici',
                uploadSize: 'PDF, JPG, PNG (max. 10MB)',
                notApplicable: 'Ce document ne s\'applique pas √† ma situation',
                notApplicableShort: 'Non Applicable',
                
                step4Title: 'Informations Personnelles',
                firstName: 'Pr√©nom(s)',
                lastName: 'Nom(s)',
                birthDate: 'Date de Naissance',
                birthPlace: 'Lieu de Naissance',
                citizenship: 'Pays de Citoyennet√©',
                passportNumber: 'Num√©ro de Passeport',
                email: 'Adresse Email',
                phone: 'T√©l√©phone',
                address: 'Adresse Compl√®te',
                travelDateStart: 'Date de Voyage (D√©part)',
                travelDateEnd: 'Date de Voyage (Retour)',
                travelPurpose: 'Motif du Voyage',
                travelPurposePlaceholder: 'D√©crivez bri√®vement le but de votre voyage au Canada...',
                required: '*',
                
                // Section 1: Informations de base
                section1Title: '1. Informations du/de la Demandeur(se)',
                applicationDate: 'Date de la demande',
                naButton: 'S/O',
                
                // Section 2: √âtat civil actuel
                section2Title: '2. √âtat civil actuel',
                maritalStatusLabel: 'A. √âtat civil',
                maritalStatusSelect: 'S√©lectionner',
                maritalStatusMarried: 'Mari√©(e)',
                maritalStatusSingle: 'C√©libataire',
                maritalStatusCommonLaw: 'Union de fait',
                maritalStatusSeparated: 'S√©par√©(e) l√©galement',
                maritalStatusDivorced: 'Divorc√©(e)',
                maritalStatusWidowed: 'Veuf(ve)',
                currentPartnerName: 'B. Nom complet du/de la partenaire actuel(le)',
                relationshipStartDate: 'C. Date de d√©but de la relation',
                
                // Section 3: √âtat civil ant√©rieur
                section3Title: '3. √âtat civil ant√©rieur',
                previousRelationshipLabel: 'A. Avez-vous eu une relation ant√©rieure?',
                previousRelationType: 'B. Type de relation',
                previousPartnerName: 'C. Nom complet du/de la partenaire ant√©rieur(e)',
                previousPartnerBirthDate: 'D. Date de naissance du/de la partenaire ant√©rieur(e)',
                previousRelationshipStart: 'E. Date de d√©but de la relation ant√©rieure',
                previousRelationshipEnd: 'F. Date de fin de la relation ant√©rieure',
                yes: 'Oui',
                no: 'Non',
                
                // Section 7: √âtudes sup√©rieures
                section7Title: '7. √âtudes sup√©rieures',
                section7Subtitle: '(y compris les √©tudes universitaires, dipl√¥mes ou formation en apprentissage). Si vous n\'en avez pas, √©crivez S/O dans le domaine d\'√©tudes.',
                postgraduateStartDate: 'Date de d√©but',
                postgraduateEndDate: 'Date de fin',
                postgraduateCity: 'Ville',
                postgraduateCountry: 'Pays',
                postgraduateArea: 'Domaine d\'√©tudes',
                postgraduateInstitution: 'Nom de l\'√©tablissement d\'enseignement',
                
                // Section 8: Emplois
                section8Title: '8. Emplois des 10 derni√®res ann√©es',
                jobStartDate: 'Date de d√©but d\'emploi',
                jobEndDate: 'Date de fin d\'emploi',
                jobCity: 'Ville',
                jobCountry: 'Pays',
                jobPosition: 'Poste',
                jobCompany: 'Entreprise',
                addEmployment: 'Ajouter un autre emploi',
                
                // Section 9: Informations familiales
                section9Title: '9. Informations familiales',
                
                // 9.1 √âpoux/Partenaire
                section91Title: '9.1. Informations sur l\'√©poux(se) ou partenaire actuel(le) (si applicable). Si c√©libataire √©crire S/O',
                spouseName: 'A. Nom complet',
                spouseBirthDate: 'B. Date de naissance',
                spouseBirthCountry: 'C. Pays de naissance',
                spouseAddress: 'D. Adresse actuelle',
                spouseOccupation: 'G. Profession',
                spouseWillTravel: 'Votre partenaire vous accompagnera-t-il(elle) dans le voyage?',
                
                // 9.2 M√®re
                section92Title: '9.2. Informations sur la m√®re. Si votre m√®re est vivante, remplissez les cases A,B,C,D,F,G,H,I. Si votre m√®re est d√©c√©d√©e, remplissez uniquement les cases A,B,C,D,E',
                motherName: 'A. Nom complet',
                motherBirthDate: 'B. Date de naissance',
                motherBirthCountry: 'C. Pays de naissance',
                motherAlive: 'D. Votre m√®re est-elle vivante?',
                motherDeceasedDate: 'E. Date de d√©c√®s',
                motherAddress: 'F. Adresse actuelle',
                motherOccupation: 'G. Profession',
                motherMaritalStatus: 'H. √âtat civil',
                motherWillTravel: 'I. Votre m√®re vous accompagnera-t-elle dans le voyage?',
                
                // 9.3 P√®re
                section93Title: '9.3. Informations sur le p√®re. Si votre p√®re est vivant, remplissez les cases A,B,C,D,F,G,H,I. Si votre p√®re est d√©c√©d√©, remplissez uniquement les cases A,B,C,D,E',
                fatherName: 'A. Nom complet',
                fatherBirthDate: 'B. Date de naissance',
                fatherBirthCountry: 'C. Pays de naissance',
                fatherAlive: 'D. Votre p√®re est-il vivant?',
                fatherDeceasedDate: 'E. Date de d√©c√®s',
                fatherAddress: 'F. Adresse actuelle',
                fatherOccupation: 'G. Profession',
                fatherMaritalStatus: 'H. √âtat civil',
                fatherWillTravel: 'I. Votre p√®re vous accompagnera-t-il dans le voyage?',
                
                // 9.4 Enfants
                section94Title: '9.4. Informations sur les enfants. Si votre/vos enfant(s) est/sont vivant(s), remplissez les cases A,B,C,D,F,G,H,I. Si votre/vos enfant(s) est/sont d√©c√©d√©(s), remplissez uniquement les cases A,B,C,D,E.',
                childName: 'A. Nom complet',
                childBirthDate: 'B. Date de naissance',
                childRelationship: 'C. Relation familiale',
                childAlive: 'D. Votre enfant est-il(elle) vivant(e)?',
                childDeceasedDate: 'E. Date de d√©c√®s',
                childAddress: 'F. Adresse actuelle',
                childOccupation: 'G. Profession',
                childMaritalStatus: 'H. √âtat civil',
                childWillTravel: 'I. Votre enfant vous accompagnera-t-il(elle) dans le voyage?',
                childDaughter: 'Fille',
                childSon: 'Fils',
                childStepdaughter: 'Belle-fille',
                childStepson: 'Beau-fils',
                addChild: 'Ajouter un autre enfant',
                
                // 9.5 Fr√®res et s≈ìurs
                section95Title: '9.5. Informations sur les fr√®res et s≈ìurs. Si votre/vos fr√®re(s) et s≈ìur(s) est/sont vivant(s), remplissez les cases A,B,C,D,F,G,H,I. Si votre/vos fr√®re(s) et s≈ìur(s) est/sont d√©c√©d√©(s), remplissez uniquement les cases A,B,C,D,E',
                siblingName: 'A. Nom complet',
                siblingBirthDate: 'B. Date de naissance',
                siblingRelationship: 'C. Relation familiale',
                siblingAlive: 'D. Votre fr√®re/s≈ìur est-il(elle) vivant(e)?',
                siblingDeceasedDate: 'E. Date de d√©c√®s',
                siblingAddress: 'F. Adresse actuelle',
                siblingOccupation: 'G. Profession',
                siblingMaritalStatus: 'H. √âtat civil',
                siblingWillTravel: 'I. Votre fr√®re/s≈ìur vous accompagnera-t-il(elle) dans le voyage?',
                siblingSister: 'S≈ìur',
                siblingBrother: 'Fr√®re',
                siblingStepsister: 'Demi-s≈ìur',
                siblingStepbrother: 'Demi-fr√®re',
                addSibling: 'Ajouter un autre fr√®re/s≈ìur',
                
                // Section 4: Langues
                section4Title: '4. Langues',
                nativeLanguage: 'A. Langue maternelle',
                nativeLanguageSelect: 'S√©lectionner',
                nativeLanguageSpanish: 'Espagnol',
                nativeLanguageEnglish: 'Anglais',
                nativeLanguageFrench: 'Fran√ßais',
                nativeLanguagePortuguese: 'Portugais',
                nativeLanguageOther: 'Autre',
                languageAbility: 'B. Dans quelle autre langue pouvez-vous communiquer?',
                languageAbilityEnglish: 'Anglais',
                languageAbilityFrench: 'Fran√ßais',
                languageAbilityBoth: 'Dans les deux langues',
                languageAbilityNeither: 'Dans aucune',
                preferredLanguage: 'Dans quelle langue vous sentiriez-vous le plus confiant?',
                languageTest: 'Avez-vous pass√© un test d\'anglais ou de fran√ßais?',
                languageTestType: 'Quel test?',
                languageTestYear: 'En quelle ann√©e?',
                
                // Section 5: Adresse
                section5Title: '5. Adresse du/de la Demandeur(se)',
                addressLabel: 'A. Adresse actuelle',
                city: 'B. Ville',
                region: 'C. R√©gion, Province, D√©partement',
                postalCode: 'E. Code postal (si applicable)',
                
                // Section 6: D√©tails du voyage
                section6Title: '6. D√©tails du voyage au Canada',
                arrivalDate: 'A. Date d\'arriv√©e au Canada',
                departureDate: 'B. Date de d√©part du Canada',
                availableFunds: 'C. Fonds disponibles (en dollars canadiens)',
                whoToVisit: 'D. Qui visitez-vous?',
                personToVisit: 'E. Nom de la personne √† visiter',
                visitPersonAddress: 'F. Adresse de la personne √† visiter',
                
                // Section 10: Ant√©c√©dents
                section10Title: '10. Ant√©c√©dents',
                antecedent1: '1. Vous ou quelqu\'un de votre famille avez-vous eu la tuberculose au cours des deux derni√®res ann√©es?',
                antecedent2: '2. Avez-vous un trouble physique ou mental qui n√©cessite des services sociaux ou des m√©dicaments pendant votre s√©jour au Canada?',
                antecedent3: '3. √ätes-vous rest√©(e) sur le sol canadien apr√®s l\'expiration de votre statut?',
                antecedent4: '4. Vous a-t-on refus√© un visa ou un permis ou vous a-t-on d√©j√† emp√™ch√© d\'entrer sur le territoire canadien ou dans un autre pays?',
                antecedent5: '5. Avez-vous d√©j√† pr√©sent√© une demande d\'entr√©e au Canada?',
                antecedent6: '6. Avez-vous √©t√© accus√©(e), d√©tenu(e) ou reconnu(e) coupable d\'une infraction p√©nale dans un autre pays ou territoire?',
                antecedent7: '7. Avez-vous fait partie d\'un groupe arm√©, d\'une unit√© contre la d√©fense civile ou d\'un corps de police?',
                antecedent8: '8. Avez-vous √©t√© membre ou affili√©(e) √† un parti politique ou √† un groupe ou organisation qui a utilis√© la violence dans le but d\'atteindre des objectifs politiques ou religieux ou qui a √©t√© impliqu√© dans des activit√©s criminelles?',
                antecedent9: '9. Avez-vous √©t√© t√©moin de mauvais traitements inflig√©s √† des prisonniers, des civils, ou avez-vous commis des actes de vandalisme ou de profanation d\'√©difices religieux?',
                antecedentJustification: 'Si vous avez r√©pondu OUI √† l\'une des affirmations ci-dessus, veuillez justifier bri√®vement votre r√©ponse (indiquez le num√©ro pour lequel vous donnez la r√©ponse). Sinon, √©crivez S/O:',
                
                // Section 11: Historique des voyages
                section11Title: '11. Historique des voyages des 10 derni√®res ann√©es',
                section11Subtitle: 'Si vous n\'avez pas voyag√©, √©crivez S/O dans ville et pays.',
                travelStartDate: 'Date de d√©but',
                travelEndDate: 'Date de fin',
                travelCity: 'Ville',
                travelCountry: 'Pays',
                travelPurpose: 'Motif du voyage',
                addTravel: 'Ajouter un autre voyage',
                
                // Section 12: Service militaire
                section12Title: '12. Service militaire (si applicable)',
                section12Subtitle: 'Si vous n\'avez pas effectu√© de service militaire, √©crivez S/O dans ville et pays.',
                militaryStartDate: 'Date de d√©but',
                militaryEndDate: 'Date de fin',
                militaryCity: 'Ville',
                militaryCountry: 'Pays',
                militaryRank: 'Grade',
                
                step5Title: 'R√©vision et Envoi',
                step5Success: 'Veuillez v√©rifier toutes les informations avant de soumettre. Une fois soumis, un PDF sera g√©n√©r√© avec tous vos documents et envoy√© √† LMBI Immigration.',
                step6Title: 'R√©vision et Envoi',
                step6Success: 'Veuillez v√©rifier toutes les informations avant de soumettre. Une fois soumis, un PDF sera g√©n√©r√© avec tous vos documents et envoy√© √† LMBI Immigration.',
                step6ConfirmTitle: 'Confirmation des Donn√©es',
                step6ConfirmText: '<strong>Important:</strong> Veuillez confirmer vos coordonn√©es avant de soumettre la demande. Ces informations seront utilis√©es pour toutes les communications li√©es √† votre visa.',
                personalInfoTitle: 'Informations Personnelles',
                docsUploadedTitle: 'Documents T√©l√©charg√©s',
                submitButton: 'Soumettre la Demande',
                
                // Navigation
                navStep0: 'Bienvenue',
                navStep1: 'Type de Demande',
                navStep2: 'Documents Requis',
                navStep3: 'T√©l√©charger Documents',
                navStep4: 'Informations Personnelles',
                navStep5: 'Motif du Voyage',
                navStep6: 'R√©vision et Envoi',
                step: '√âtape',
                of: 'de',
                completed: 'termin√©',
                
                // Buttons
                backToHome: 'Retour √† l\'Accueil',
                back: 'Retour',
                continue: 'Continuer',
                home: 'Accueil',
                
                // Messages
                successMessage: 'Demande soumise avec succ√®s!\n\nVotre demande a √©t√© envoy√©e √† LMBI Immigration. Vous recevrez bient√¥t une confirmation par email.\n\nNum√©ro de r√©f√©rence:',
                errorMessage: 'Erreur lors de la soumission de la demande. Veuillez r√©essayer.',
                fileTooLarge: 'Le fichier est trop volumineux. Taille maximale: 3.8MB',
                loadingMessage: 'G√©n√©ration du PDF et envoi de la demande...',
                selectTypeFirst: 'Veuillez d\'abord s√©lectionner votre type de demande √† l\'√âtape 1.',
                pleaseGoToStep1: 'Veuillez aller √† l\'√âtape 1 et s√©lectionner votre type de demande.'
            }
        };

        // Get translation
        function t(key) {
            return translations[appState.language][key] || key;
        }

        // Document Requirements
        // Document Translations Database
        const documentTranslations = {
            passport: {
                es: {
                    title: 'Pasaportes',
                    description: 'Escanear a color de todas las p√°ginas del pasaporte v√°lido (vigente y anteriores si los tiene). Verificar que la fecha de vencimiento sea mayor a 6 meses desde la fecha del viaje.'
                },
                en: {
                    title: 'Passports',
                    description: 'Color scan of all pages of valid passport (current and previous if you have them). Verify that the expiration date is more than 6 months from the travel date.'
                },
                fr: {
                    title: 'Passeports',
                    description: 'Num√©risation en couleur de toutes les pages du passeport valide (actuel et pr√©c√©dents si vous en avez). V√©rifiez que la date d\'expiration est sup√©rieure √† 6 mois √† compter de la date de voyage.'
                }
            },
            id: {
                es: {
                    title: 'Documento de Identidad',
                    description: 'Escanear a color por ambos lados de su documento de identidad vigente (c√©dula, DNI, carnet de identidad).'
                },
                en: {
                    title: 'Identity Document',
                    description: 'Color scan of both sides of your valid identity document (ID card, DNI, identity card).'
                },
                fr: {
                    title: 'Document d\'Identit√©',
                    description: 'Num√©risation en couleur des deux c√¥t√©s de votre document d\'identit√© valide (carte d\'identit√©, DNI, carte d\'identit√©).'
                }
            },
            photo: {
                es: {
                    title: 'Fotograf√≠a',
                    description: 'Fotograf√≠a reciente tipo pasaporte (fondo blanco, 35mm x 45mm). Debe cumplir con las especificaciones de IRCC.'
                },
                en: {
                    title: 'Photograph',
                    description: 'Recent passport-style photo (white background, 35mm x 45mm). Must meet IRCC specifications.'
                },
                fr: {
                    title: 'Photographie',
                    description: 'Photo r√©cente de type passeport (fond blanc, 35mm x 45mm). Doit respecter les sp√©cifications d\'IRCC.'
                }
            },
            imm5257: {
                es: {
                    title: 'Formulario IMM5257',
                    description: 'Formulario de solicitud de visa de residente temporal. Debe ser completado, validado e impreso desde el sitio web de IRCC.'
                },
                en: {
                    title: 'IMM5257 Form',
                    description: 'Temporary resident visa application form. Must be completed, validated and printed from the IRCC website.'
                },
                fr: {
                    title: 'Formulaire IMM5257',
                    description: 'Formulaire de demande de visa de r√©sident temporaire. Doit √™tre compl√©t√©, valid√© et imprim√© depuis le site Web d\'IRCC.'
                }
            },
            imm5645: {
                es: {
                    title: 'Formulario IMM5645',
                    description: 'Informaci√≥n sobre la familia. Incluir informaci√≥n de todos los miembros de la familia, est√©n acompa√±√°ndolo o no.'
                },
                en: {
                    title: 'IMM5645 Form',
                    description: 'Family information. Include information about all family members, whether accompanying you or not.'
                },
                fr: {
                    title: 'Formulaire IMM5645',
                    description: 'Renseignements sur la famille. Inclure les informations de tous les membres de la famille, qu\'ils vous accompagnent ou non.'
                }
            },
            'proof-funds': {
                es: {
                    title: 'Comprobante de Fondos',
                    description: 'Estados de cuenta bancarios de los √∫ltimos 6 meses mostrando movimientos y saldo actual suficiente para cubrir gastos del viaje.'
                },
                en: {
                    title: 'Proof of Funds',
                    description: 'Bank statements for the last 6 months showing transactions and current balance sufficient to cover travel expenses.'
                },
                fr: {
                    title: 'Preuve de Fonds',
                    description: 'Relev√©s bancaires des 6 derniers mois montrant les transactions et le solde actuel suffisant pour couvrir les frais de voyage.'
                }
            },
            employment: {
                es: {
                    title: 'Carta Laboral',
                    description: 'Carta del empleador en papel membretado indicando cargo, salario, fecha de ingreso y autorizaci√≥n de vacaciones.'
                },
                en: {
                    title: 'Employment Letter',
                    description: 'Letter from employer on letterhead indicating position, salary, start date and vacation authorization.'
                },
                fr: {
                    title: 'Lettre d\'Emploi',
                    description: 'Lettre de l\'employeur sur papier √† en-t√™te indiquant le poste, le salaire, la date d\'embauche et l\'autorisation de vacances.'
                }
            },
            property: {
                es: {
                    title: 'Certificados de Propiedad',
                    description: 'T√≠tulos de propiedad de bienes inmuebles, veh√≠culos u otros activos que demuestren arraigo en su pa√≠s.'
                },
                en: {
                    title: 'Property Certificates',
                    description: 'Property titles for real estate, vehicles or other assets demonstrating ties to your country.'
                },
                fr: {
                    title: 'Certificats de Propri√©t√©',
                    description: 'Titres de propri√©t√© pour l\'immobilier, les v√©hicules ou autres actifs d√©montrant des liens avec votre pays.'
                }
            },
            'travel-history': {
                es: {
                    title: 'Historial de Viajes',
                    description: 'Copias de visas anteriores y sellos de entrada/salida de otros pa√≠ses que demuestren historial de viajes internacional.'
                },
                en: {
                    title: 'Travel History',
                    description: 'Copies of previous visas and entry/exit stamps from other countries demonstrating international travel history.'
                },
                fr: {
                    title: 'Historique de Voyage',
                    description: 'Copies des visas pr√©c√©dents et tampons d\'entr√©e/sortie d\'autres pays d√©montrant l\'historique de voyage international.'
                }
            },
            imm5707: {
                es: {
                    title: 'Carta de Invitaci√≥n (IMM5707)',
                    description: 'Si aplica: Carta de invitaci√≥n de un residente canadiense con copia de su identificaci√≥n y prueba de estatus en Canad√°.'
                },
                en: {
                    title: 'Invitation Letter (IMM5707)',
                    description: 'If applicable: Invitation letter from a Canadian resident with copy of their ID and proof of status in Canada.'
                },
                fr: {
                    title: 'Lettre d\'Invitation (IMM5707)',
                    description: 'Si applicable: Lettre d\'invitation d\'un r√©sident canadien avec copie de sa pi√®ce d\'identit√© et preuve de statut au Canada.'
                }
            },
            marriage: {
                es: {
                    title: 'Certificado de Matrimonio',
                    description: 'Si aplica: Certificado de matrimonio oficial. Si viaja con c√≥nyuge, incluir su informaci√≥n.'
                },
                en: {
                    title: 'Marriage Certificate',
                    description: 'If applicable: Official marriage certificate. If traveling with spouse, include their information.'
                },
                fr: {
                    title: 'Certificat de Mariage',
                    description: 'Si applicable: Certificat de mariage officiel. Si vous voyagez avec votre conjoint, incluez ses informations.'
                }
            },
            'birth-cert': {
                es: {
                    title: 'Certificado de Nacimiento',
                    description: 'Certificado de nacimiento oficial. Requerido para menores y puede ser solicitado para adultos.'
                },
                en: {
                    title: 'Birth Certificate',
                    description: 'Official birth certificate. Required for minors and may be requested for adults.'
                },
                fr: {
                    title: 'Certificat de Naissance',
                    description: 'Certificat de naissance officiel. Requis pour les mineurs et peut √™tre demand√© pour les adultes.'
                }
            },
            'bank-statements': {
                es: {
                    title: 'Estados de Cuenta Bancarios',
                    description: 'Estados de cuenta de los √∫ltimos 6 meses certificados por el banco mostrando ingresos y egresos regulares.'
                },
                en: {
                    title: 'Bank Statements',
                    description: 'Bank statements for the last 6 months certified by the bank showing regular income and expenses.'
                },
                fr: {
                    title: 'Relev√©s Bancaires',
                    description: 'Relev√©s bancaires des 6 derniers mois certifi√©s par la banque montrant les revenus et d√©penses r√©guliers.'
                }
            },
            'tax-returns': {
                es: {
                    title: 'Declaraciones de Impuestos',
                    description: 'Declaraciones de impuestos de los √∫ltimos 2 a√±os que demuestren ingresos estables y cumplimiento fiscal.'
                },
                en: {
                    title: 'Tax Returns',
                    description: 'Tax returns for the last 2 years demonstrating stable income and tax compliance.'
                },
                fr: {
                    title: 'D√©clarations d\'Imp√¥ts',
                    description: 'D√©clarations d\'imp√¥ts des 2 derni√®res ann√©es d√©montrant des revenus stables et la conformit√© fiscale.'
                }
            },
            schedule1: {
                es: {
                    title: 'Schedule 1 - Antecedentes',
                    description: 'Formulario de antecedentes personales. Requerido si ha tenido problemas legales o de inmigraci√≥n previos.'
                },
                en: {
                    title: 'Schedule 1 - Background',
                    description: 'Personal background form. Required if you have had previous legal or immigration issues.'
                },
                fr: {
                    title: 'Annexe 1 - Ant√©c√©dents',
                    description: 'Formulaire d\'ant√©c√©dents personnels. Requis si vous avez eu des probl√®mes juridiques ou d\'immigration ant√©rieurs.'
                }
            },
            'study-permit': {
                es: {
                    title: 'Permiso de Estudios',
                    description: 'Si aplica: Copia del permiso de estudios vigente si est√° estudiando en Canad√°.'
                },
                en: {
                    title: 'Study Permit',
                    description: 'If applicable: Copy of current study permit if studying in Canada.'
                },
                fr: {
                    title: 'Permis d\'√âtudes',
                    description: 'Si applicable: Copie du permis d\'√©tudes en cours si vous √©tudiez au Canada.'
                }
            },
            'work-permit': {
                es: {
                    title: 'Permiso de Trabajo',
                    description: 'Si aplica: Copia del permiso de trabajo vigente si est√° trabajando en Canad√°.'
                },
                en: {
                    title: 'Work Permit',
                    description: 'If applicable: Copy of current work permit if working in Canada.'
                },
                fr: {
                    title: 'Permis de Travail',
                    description: 'Si applicable: Copie du permis de travail en cours si vous travaillez au Canada.'
                }
            },
            'pr-card': {
                es: {
                    title: 'Tarjeta de Residente Permanente',
                    description: 'Si aplica: Copia de la tarjeta de residente permanente si tiene familiares con estatus de PR en Canad√°.'
                },
                en: {
                    title: 'Permanent Resident Card',
                    description: 'If applicable: Copy of permanent resident card if you have family members with PR status in Canada.'
                },
                fr: {
                    title: 'Carte de R√©sident Permanent',
                    description: 'Si applicable: Copie de la carte de r√©sident permanent si vous avez des membres de la famille avec le statut de RP au Canada.'
                }
            },
            custody: {
                es: {
                    title: 'Documentos de Custodia',
                    description: 'Para menores: Documentos legales que demuestren custodia legal del menor.'
                },
                en: {
                    title: 'Custody Documents',
                    description: 'For minors: Legal documents demonstrating legal custody of the minor.'
                },
                fr: {
                    title: 'Documents de Garde',
                    description: 'Pour les mineurs: Documents juridiques d√©montrant la garde l√©gale du mineur.'
                }
            },
            'consent-letter': {
                es: {
                    title: 'Carta de Consentimiento',
                    description: 'Para menores: Carta notariada de consentimiento de ambos padres autorizando el viaje del menor.'
                },
                en: {
                    title: 'Consent Letter',
                    description: 'For minors: Notarized consent letter from both parents authorizing the minor\'s travel.'
                },
                fr: {
                    title: 'Lettre de Consentement',
                    description: 'Pour les mineurs: Lettre de consentement notari√©e des deux parents autorisant le voyage du mineur.'
                }
            },
            'school-letter': {
                es: {
                    title: 'Carta de la Escuela',
                    description: 'Para menores: Carta de la instituci√≥n educativa confirmando inscripci√≥n y fechas de vacaciones autorizadas.'
                },
                en: {
                    title: 'School Letter',
                    description: 'For minors: Letter from educational institution confirming enrollment and authorized vacation dates.'
                },
                fr: {
                    title: 'Lettre de l\'√âcole',
                    description: 'Pour les mineurs: Lettre de l\'√©tablissement d\'enseignement confirmant l\'inscription et les dates de vacances autoris√©es.'
                }
            },
            'parental-id': {
                es: {
                    title: 'Identificaci√≥n de los Padres',
                    description: 'Para menores: Copias de identificaci√≥n oficial de ambos padres (pasaporte o documento de identidad).'
                },
                en: {
                    title: 'Parental Identification',
                    description: 'For minors: Copies of official identification of both parents (passport or identity document).'
                },
                fr: {
                    title: 'Identification des Parents',
                    description: 'Pour les mineurs: Copies de l\'identification officielle des deux parents (passeport ou document d\'identit√©).'
                }
            }
        };

        const documentRequirements = {
            'adult-outside': [
                { id: 'passport', title: '1. Pasaportes (actual y anteriores)', description: 'Debe digitalizar todas las p√°ginas de su pasaporte actual y de cualquier pasaporte anterior que haya tenido, asegur√°ndose de incluir toda la informaci√≥n personal y los sellos de inmigraci√≥n. Es fundamental que tambi√©n incluya las p√°ginas que contengan visas previas, si las posee.', required: true, badge: 'Obligatorio' },
                { id: 'id', title: '2. Documento de identidad', description: 'Escanear recto-verso el documento de identidad de su pa√≠s (ej: c√©dula de ciudadan√≠a).', required: true, badge: 'Obligatorio' },
                { id: 'photo', title: '3. Fotograf√≠a', description: 'Ver especificaciones de las fotograf√≠as. Este documento se puede enviar en PDF o JPG. Consulte las especificaciones en la p√°gina oficial de IRCC.', required: true, badge: 'Obligatorio' },
                { id: 'invitation', title: '4. Carta de invitaci√≥n (affidavit) + pruebas', description: 'La carta de invitaci√≥n debe especificar de manera expl√≠cita que el invitado se alojar√° en su residencia, recibiendo hospedaje y alimentaci√≥n a lo largo de su estancia en Canad√°. La persona que invita debe adjuntar: pasaporte escaneado, prueba de status migratorio (si tiene status temporal), carta de empleo y dos √∫ltimos comprobantes de pago o declaraci√≥n de impuestos, y documento que pruebe la relaci√≥n (ej: certificado de nacimiento). Si no est√° en franc√©s o ingl√©s, debe traducirse.', required: true, badge: 'Obligatorio' },
                { id: 'employment', title: '5. Prueba de ocupaci√≥n + dos √∫ltimos comprobantes de pago', description: 'Si es empleado: Carta laboral indicando fecha de inicio, tiempo en la empresa, cargo y salario mensual (si es posible). Si es trabajador independiente: Carta de contador indicando actividad e ingresos mensuales (adjuntar tarjeta profesional del contador). Si es pensionado: Comprobante de pensi√≥n. La carta laboral debe traducirse si no est√° en franc√©s o ingl√©s.', required: true, badge: 'Obligatorio' },
                { id: 'bank', title: '6. Extractos bancarios', description: 'Adjuntar los 4 √∫ltimos extractos bancarios. En caso de dep√≥sitos de montos altos, adjuntar recibos que comprueben el origen de los fondos. Este documento es fundamental para que el oficial de inmigraci√≥n compruebe que cuenta con recursos para el viaje. Incluir certificado bancario con el saldo de la cuenta (generalmente se puede descargar directamente en ingl√©s del banco).', required: true, badge: 'Obligatorio' },
                { id: 'property', title: '7. Documentos de propiedad', description: 'Adjuntar documentos de propiedad de casas, terrenos, lotes, bien ra√≠z, etc. (ej: escrituras, compraventas, futuras herencias). Deben estar traducidos. Si el documento es muy largo, traducir solo las p√°ginas con informaci√≥n importante del inmueble.', required: true, badge: 'Obligatorio' },
                { id: 'vacation', title: '8. Carta de vacaciones o de licencia laboral', description: 'La carta debe ser expedida por la empresa donde trabaja, especificando el tiempo de vacaciones o licencia para el viaje a Canad√°. Es importante que las fechas de vacaciones est√©n acorde con la duraci√≥n del viaje.', required: true, badge: 'Obligatorio' },
                { id: 'tickets', title: '9. Reservaci√≥n de los tiquetes de viaje (ida y regreso)', description: 'La reservaci√≥n debe tener los nombres de las personas que van a viajar y las fechas deben coincidir con el formulario de inmigraci√≥n y la carta de vacaciones. Considere que el tiempo de procesamiento es discrecional. Si compra los tiquetes, h√°galo con posibilidad de cambio de fechas.', required: true, badge: 'Obligatorio' },
                { id: 'cv', title: '10. CV actualizada en FR o ENG', description: 'Incluir la hoja de vida actualizada. Este documento debe estar en franc√©s o ingl√©s.', required: false, badge: 'Opcional' },
                { id: 'diploma', title: '11. Diploma de estudios', description: 'Incluir los diplomas de estudio principales (no es necesario enviar diplomas de cursos de perfeccionamiento). Debe ir traducido. SOLO SI ENV√çA EL CV.', required: false, badge: 'Opcional' },
                { id: 'other-property', title: '12. Otras propiedades', description: 'Veh√≠culos, compraventas, compromisos de compra, futuras herencias, etc. Estos documentos deben ir traducidos.', required: false, badge: 'Opcional' },
                { id: 'company-docs', title: '13. Documentos de la empresa', description: 'Si es propietario o socio de una empresa: documentos de registro, documentos de constituci√≥n, y documento notariado dejando representante durante su estad√≠a en Canad√°. Todos deben estar traducidos.', required: false, badge: 'Si Aplica' },
                { id: 'marriage', title: '14. Certificado de matrimonio o uni√≥n libre', description: 'Adjuntar seg√∫n su caso. Este documento debe traducirse.', required: false, badge: 'Si Aplica' },
                { id: 'birth-children', title: '15. Certificados de nacimiento de los hijos', description: 'Adjuntar los certificados de nacimiento de los hijos. Si no viaja con ellos, es importante para comprobar arraigo con el pa√≠s de origen. Debe traducirse.', required: false, badge: 'Si Aplica' }
            ],
            'adult-inside': [
                { id: 'passport', title: '1. Pasaportes (actual y anteriores)', description: 'Debe digitalizar todas las p√°ginas de su pasaporte actual y de cualquier pasaporte anterior que haya tenido, asegur√°ndose de incluir toda la informaci√≥n personal y los sellos de inmigraci√≥n. Es fundamental que tambi√©n incluya las p√°ginas que contengan visas previas, si las posee.', required: true, badge: 'Obligatorio' },
                { id: 'id', title: '2. Documento de identidad', description: 'Escanear recto-verso el documento de identidad de su pa√≠s (ej: c√©dula de ciudadan√≠a).', required: true, badge: 'Obligatorio' },
                { id: 'photo', title: '3. Fotograf√≠a', description: 'Ver especificaciones de las fotograf√≠as seg√∫n est√°ndares canadienses. Este documento se puede enviar en PDF o JPG.', required: true, badge: 'Obligatorio' },
                { id: 'status', title: '4. Prueba de status migratorio', description: 'Enviar una copia escaneada (por ambos lados) del permiso de trabajo o permiso de estudio vigente.', required: true, badge: 'Obligatorio' },
                { id: 'employment', title: '5. Prueba de ocupaci√≥n + desprendibles de pago', description: 'Carta laboral donde se indique la fecha de inicio del empleo y el tiempo que lleva en la empresa, el cargo. Incluir los dos √∫ltimos comprobantes de pago de salario.', required: true, badge: 'Obligatorio' },
                { id: 'bank', title: '6. Extractos bancarios', description: 'Adjuntar los 4 √∫ltimos extractos bancarios.', required: true, badge: 'Obligatorio' },
                { id: 'marriage', title: '7. Certificado de matrimonio o uni√≥n libre', description: 'Adjuntar el certificado seg√∫n su caso. Este documento debe traducirse.', required: false, badge: 'Si Aplica' },
                { id: 'birth-children', title: '8. Certificados de nacimiento de los hijos', description: 'Adjuntar los certificados de nacimiento de los hijos. Si no viaja con ellos, es importante para comprobar arraigo con el pa√≠s de origen. Debe traducirse.', required: false, badge: 'Si Aplica' }
            ],
            'child': [
                { id: 'passport', title: '1. Pasaportes (actual y anteriores)', description: 'Scanner de todas las p√°ginas del pasaporte donde se encuentren los datos personales y los sellos de inmigraci√≥n. Es importante incluir las visas que haya tenido.', required: true, badge: 'Obligatorio' },
                { id: 'id', title: '2. Tarjeta de identidad', description: 'Escanear la tarjeta de identidad por ambos lados (si aplica).', required: false, badge: 'Si Aplica' },
                { id: 'photo', title: '3. Fotograf√≠a', description: 'Ver especificaciones de las fotograf√≠as seg√∫n est√°ndares canadienses.', required: true, badge: 'Obligatorio' },
                { id: 'travel-history', title: '4. Viajes realizados', description: 'Historial de viajes: Pa√≠s de viaje, fecha de ida y regreso, motivo de viaje. Es importante que los viajes concuerden con los sellos del pasaporte. Puede ir en un documento aparte.', required: true, badge: 'Obligatorio' },
                { id: 'invitation', title: '5. Carta de invitaci√≥n (host) + pruebas', description: 'Carta especificando hospedaje y alimentaci√≥n durante la estad√≠a en Canad√°. Debe ir sellada por notario o comisario. Incluir itinerarios de viaje, carta laboral del anfitri√≥n, dos √∫ltimos desprendibles de pago o declaraci√≥n de impuestos, y prueba de relaci√≥n (ej: certificado de nacimiento). Si no est√° en franc√©s o ingl√©s, traducir.', required: true, badge: 'Obligatorio' },
                { id: 'school', title: '6. Certificado de estudios', description: 'Certificado emitido por la escuela mencionando que el estudiante est√° activo. Debe ir traducida. Si realiza actividad extra, art√≠stica o deportiva, anexar carta (traducida).', required: true, badge: 'Obligatorio' },
                { id: 'birth', title: '7. Registro civil', description: 'Adjuntar el registro civil de nacimiento. Este documento debe estar traducido.', required: true, badge: 'Obligatorio' },
                { id: 'tickets', title: '8. Reservaci√≥n o compra de tiquetes (ida y regreso)', description: 'Este documento es necesario para enviar la aplicaci√≥n. El Gobierno de Canad√° procesa las visas discrecionalmente, as√≠ que es mejor comprar los tiquetes con posibilidad de cambio de fechas.', required: true, badge: 'Obligatorio' },
                { id: 'parental', title: '9. Autorizaci√≥n parental para salida al extranjero', description: 'Si el ni√±o viaja con uno solo de los padres: autorizaci√≥n de salida del padre que no viaja, con identificaci√≥n. Preguntar en la oficina de inmigraci√≥n de su pa√≠s cu√°l es el documento correcto. Si los padres est√°n separados, adjuntar documentos de custodia. Deben estar traducidos.', required: true, badge: 'Obligatorio' },
                { id: 'motivation', title: '10. Carta de motivaci√≥n', description: 'Expresar el inter√©s del viaje a Canad√°, lugares que quisiera visitar. Incluir las fechas pensadas para el viaje. Diligenciar en el documento de informaci√≥n adicional.', required: true, badge: 'Obligatorio' }
            ]
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguageSelector();
            initializeSelectionCards();
            initializeConditionalFields();
            initializeNAButtons(); // Initialize N/A buttons
            initializeDateInputs(); // Initialize date input restrictions
            document.getElementById('nextStep4').addEventListener('click', handleStep4Next);
            document.getElementById('nextStep5').addEventListener('click', handleStep5Next);
            document.getElementById('submitApplication').addEventListener('click', submitApplication);
            
            // Initialize progress bar
            updateProgressBar(0);
            
            // Initialize content in current language
            updateWelcomePage(); // Always start on welcome page
            updateAllText(); // This will call all update functions
        });
        
        // Initialize N/A Buttons for form sections
        function initializeNAButtons() {
            const naButtons = document.querySelectorAll('.na-section-btn');
            
            naButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sectionId = this.dataset.section;
                    
                    // Find the next form-grid after this button's section header
                    let sectionElement = this.previousElementSibling;
                    while (sectionElement && !sectionElement.classList.contains('form-grid')) {
                        sectionElement = sectionElement.previousElementSibling;
                    }
                    
                    if (!sectionElement) return;
                    
                    // Toggle N/A state
                    const isNA = this.classList.toggle('active-na');
                    
                    if (isNA) {
                        // Mark as N/A - disable and gray out all inputs
                        this.style.background = '#20B2AA';
                        this.style.color = 'white';
                        
                        const inputs = sectionElement.querySelectorAll('input, select, textarea');
                        inputs.forEach(input => {
                            input.disabled = true;
                            input.style.opacity = '0.5';
                            input.style.background = '#f0f0f0';
                            input.required = false; // Remove required validation
                        });
                        
                        sectionElement.style.opacity = '0.6';
                    } else {
                        // Remove N/A - enable all inputs
                        this.style.background = '#B0B8C4';
                        this.style.color = '';
                        
                        const inputs = sectionElement.querySelectorAll('input, select, textarea');
                        inputs.forEach(input => {
                            input.disabled = false;
                            input.style.opacity = '1';
                            input.style.background = '';
                            
                            // Restore original required attribute if it had one
                            if (input.hasAttribute('data-originally-required')) {
                                input.required = true;
                            }
                        });
                        
                        sectionElement.style.opacity = '1';
                    }
                });
                
                // Store original required attributes
                const sectionElement = button.previousElementSibling;
                if (sectionElement && sectionElement.classList.contains('form-grid')) {
                    const inputs = sectionElement.querySelectorAll('input[required], select[required], textarea[required]');
                    inputs.forEach(input => {
                        input.setAttribute('data-originally-required', 'true');
                    });
                }
            });
        }
        
        // Initialize Date Inputs - Restrict year to 4 digits
        function initializeDateInputs() {
            const dateInputs = document.querySelectorAll('input[type="date"]');
            
            dateInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    // Get the value
                    let value = this.value;
                    
                    // If value exists and has a year part
                    if (value) {
                        const parts = value.split('-');
                        if (parts[0] && parts[0].length > 4) {
                            // Truncate year to 4 digits
                            parts[0] = parts[0].substring(0, 4);
                            this.value = parts.join('-');
                        }
                    }
                });
                
                // Also add keydown listener to prevent typing more than 4 digits in year
                input.addEventListener('keydown', function(e) {
                    // Allow navigation keys
                    if (['Backspace', 'Delete', 'Tab', 'Escape', 'Enter', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                        return;
                    }
                    
                    const value = this.value;
                    if (value) {
                        const parts = value.split('-');
                        // If year part exists and is already 4 digits, prevent further input in year
                        if (parts[0] && parts[0].length >= 4 && this.selectionStart <= 4) {
                            if (e.key >= '0' && e.key <= '9') {
                                e.preventDefault();
                            }
                        }
                    }
                });
            });
        }
        
        // Initialize Conditional Fields
        function initializeConditionalFields() {
            // Previous Relationship
            const previousRelationship = document.getElementById('previousRelationship');
            const previousRelationshipFields = document.getElementById('previousRelationshipFields');
            
            if (previousRelationship) {
                previousRelationship.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        previousRelationshipFields.style.display = 'block';
                    } else {
                        previousRelationshipFields.style.display = 'none';
                    }
                });
            }
            
            // Language Test
            const languageTest = document.getElementById('languageTest');
            const languageTestFields = document.getElementById('languageTestFields');
            
            if (languageTest) {
                languageTest.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        languageTestFields.style.display = 'block';
                    } else {
                        languageTestFields.style.display = 'none';
                    }
                });
            }
            
            // Postgraduate Studies
            const hasPostgraduate = document.getElementById('hasPostgraduate');
            const postgraduateFields = document.getElementById('postgraduateFields');
            
            if (hasPostgraduate) {
                hasPostgraduate.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        postgraduateFields.style.display = 'block';
                    } else {
                        postgraduateFields.style.display = 'none';
                    }
                });
            }
            
            // Military Service
            const hasMilitaryService = document.getElementById('hasMilitaryService');
            const militaryServiceFields = document.getElementById('militaryServiceFields');
            
            if (hasMilitaryService) {
                hasMilitaryService.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        militaryServiceFields.style.display = 'block';
                    } else {
                        militaryServiceFields.style.display = 'none';
                    }
                });
            }
            
            // Add Employment Button
            const addEmploymentBtn = document.getElementById('addEmploymentBtn');
            let currentEmploymentCount = 1;
            
            if (addEmploymentBtn) {
                addEmploymentBtn.addEventListener('click', function() {
                    currentEmploymentCount++;
                    if (currentEmploymentCount === 2) {
                        document.getElementById('employment2').style.display = 'block';
                    } else if (currentEmploymentCount === 3) {
                        document.getElementById('employment3').style.display = 'block';
                        addEmploymentBtn.style.display = 'none';
                    }
                });
            }
            
            // Add Child Button
            const addChildBtn = document.getElementById('addChildBtn');
            let currentChildCount = 1;
            
            if (addChildBtn) {
                addChildBtn.addEventListener('click', function() {
                    currentChildCount++;
                    if (currentChildCount === 2) {
                        document.getElementById('child2').style.display = 'block';
                        addChildBtn.style.display = 'none';
                    }
                });
            }
            
            // Add Sibling Button
            const addSiblingBtn = document.getElementById('addSiblingBtn');
            let currentSiblingCount = 1;
            
            if (addSiblingBtn) {
                addSiblingBtn.addEventListener('click', function() {
                    currentSiblingCount++;
                    if (currentSiblingCount === 2) {
                        document.getElementById('sibling2').style.display = 'block';
                        addSiblingBtn.style.display = 'none';
                    }
                });
            }
            
            // Add Travel Button
            const addTravelBtn = document.getElementById('addTravelBtn');
            let currentTravelCount = 1;
            
            if (addTravelBtn) {
                addTravelBtn.addEventListener('click', function() {
                    currentTravelCount++;
                    if (currentTravelCount === 2) {
                        document.getElementById('travel2').style.display = 'block';
                    } else if (currentTravelCount === 3) {
                        document.getElementById('travel3').style.display = 'block';
                        addTravelBtn.style.display = 'none';
                    }
                });
            }
        }

        // Language Selector
        function initializeLanguageSelector() {
            // Language flag buttons are initialized with onclick in HTML
            // Set Spanish as active by default
            const spanishBtn = document.querySelector('.lang-flag-btn[data-lang="es"]');
            if (spanishBtn) {
                spanishBtn.classList.add('active');
            }
        }

        
        // Change Language from Flag Buttons
        function changeLanguageFromFlag(lang) {
            // Remove active class from all flag buttons
            document.querySelectorAll('.lang-flag-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            document.querySelector(`.lang-flag-btn[data-lang="${lang}"]`).classList.add('active');
            
            // Change language
            changeLanguage(lang);
        }
        
        // Change Language
        function changeLanguage(lang) {
            appState.language = lang;
            
            // Update all UI text
            updateAllText();
        }

        // Update All Text
        function updateAllText() {
            // Header
            document.querySelector('.logo p').textContent = t('headerTitle');
            
            // Update ALL buttons globally
            updateAllButtons();
            
            // Update navigation buttons
            for (let i = 1; i <= 6; i++) {
                const navBtn = document.querySelector(`.nav-btn-${i}`);
                if (navBtn) {
                    navBtn.textContent = `${t('step')} ${i}: ${t('navStep' + i)}`;
                }
            }
            
            // Update home button
            const homeBtn = document.querySelector('.home-btn-text');
            if (homeBtn) {
                homeBtn.textContent = 'üè† ' + t('home');
            }
            
            // Update progress text
            updateProgressText();
            
            // *** CR√çTICO: Actualizar TODOS los steps, no solo el actual ***
            // Esto asegura que cuando el usuario cambie de idioma,
            // TODO el contenido est√© traducido en todos los steps
            updateWelcomePage();  // Step 0
            updateStep1();        // Step 1
            updateStep2();        // Step 2
            updateStep3();        // Step 3
            updateStep4();        // Step 4
            updateStep5();        // Step 5
            updateStep6();        // Step 6
        }
        
        // Update ALL Buttons
        function updateAllButtons() {
            // Start button
            const startButtons = document.querySelectorAll('.btn-start');
            startButtons.forEach(btn => {
                btn.textContent = t('startButton');
            });
            
            // Back to home buttons
            const backHomeButtons = document.querySelectorAll('.btn-back-home');
            backHomeButtons.forEach(btn => {
                btn.textContent = '‚Üê ' + t('backToHome');
            });
            
            // Back buttons (usando clase text-back)
            const backButtons = document.querySelectorAll('.text-back');
            backButtons.forEach(btn => {
                btn.textContent = '‚Üê ' + t('back');
            });
            
            // Back buttons (clase antigua btn-back)
            const oldBackButtons = document.querySelectorAll('.btn-back');
            oldBackButtons.forEach(btn => {
                btn.textContent = '‚Üê ' + t('back');
            });
            
            // Continue buttons (usando clase text-continue)
            const continueButtons = document.querySelectorAll('.text-continue');
            continueButtons.forEach(btn => {
                btn.textContent = t('continue') + ' ‚Üí';
            });
            
            // Continue buttons (clase antigua btn-continue)
            const oldContinueButtons = document.querySelectorAll('.btn-continue');
            oldContinueButtons.forEach(btn => {
                btn.textContent = t('continue') + ' ‚Üí';
            });
            
            // Back to home with text-backToHome class
            const textBackToHome = document.querySelectorAll('.text-backToHome');
            textBackToHome.forEach(btn => {
                btn.textContent = '‚Üê ' + t('backToHome');
            });
            
            // Start button with text-startButton class
            const textStartButton = document.querySelectorAll('.text-startButton');
            textStartButton.forEach(btn => {
                btn.textContent = t('startButton');
            });
            
            // Submit button
            const submitButtons = document.querySelectorAll('.btn-submit');
            submitButtons.forEach(btn => {
                btn.textContent = 'üì® ' + t('submitButton');
            });
            
            // N/A buttons
            const naButtons = document.querySelectorAll('.btn-naButton');
            naButtons.forEach(btn => {
                btn.textContent = t('naButton') || 'N/A';
            });
        }
        
        // Update Progress Text
        function updateProgressText() {
            const stepNames = [
                t('navStep0'),
                t('navStep1'),
                t('navStep2'),
                t('navStep3'),
                t('navStep4'),
                t('navStep5'),
                t('navStep6')
            ];
            
            const progressText = document.getElementById('progressText');
            if (progressText) {
                progressText.textContent = `${t('step')} ${appState.currentStep} ${t('of')} 6: ${stepNames[appState.currentStep]}`;
            }
        }
        
        // Update Welcome Page (Step 0)
        function updateWelcomePage() {
            // Update all text elements with class text-xxx
            const textWelcomeTitle = document.querySelector('.text-welcomeTitle');
            if (textWelcomeTitle) textWelcomeTitle.textContent = 'üè† ' + t('welcomeTitle');
            
            const textWelcomeIntro = document.querySelector('.text-welcomeIntro');
            if (textWelcomeIntro) textWelcomeIntro.textContent = t('welcomeIntro');
            
            const textImportantTitle = document.querySelector('.text-importantTitle');
            if (textImportantTitle) textImportantTitle.textContent = '‚ö†Ô∏è ' + t('importantTitle');
            
            const textImportantText = document.querySelector('.text-importantText');
            if (textImportantText) textImportantText.innerHTML = t('importantText');
            
            const textImportantLink = document.querySelector('.text-importantLink');
            if (textImportantLink) textImportantLink.textContent = t('importantLink');
            
            const textProcessTitle = document.querySelector('.text-processTitle');
            if (textProcessTitle) textProcessTitle.textContent = 'üìã ' + t('processTitle');
            
            const textProcessSubtitle = document.querySelector('.text-processSubtitle');
            if (textProcessSubtitle) textProcessSubtitle.textContent = t('processSubtitle');
            
            const textProcess1Title = document.querySelector('.text-process1Title');
            if (textProcess1Title) textProcess1Title.textContent = t('process1Title');
            
            const textProcess1Desc = document.querySelector('.text-process1Desc');
            if (textProcess1Desc) textProcess1Desc.textContent = t('process1Desc');
            
            const textProcess2Title = document.querySelector('.text-process2Title');
            if (textProcess2Title) textProcess2Title.textContent = t('process2Title');
            
            const textProcess2Desc = document.querySelector('.text-process2Desc');
            if (textProcess2Desc) textProcess2Desc.textContent = t('process2Desc');
            
            const textProcess3Title = document.querySelector('.text-process3Title');
            if (textProcess3Title) textProcess3Title.textContent = t('process3Title');
            
            const textProcess3Desc = document.querySelector('.text-process3Desc');
            if (textProcess3Desc) textProcess3Desc.textContent = t('process3Desc');
            
            const textProcess4Title = document.querySelector('.text-process4Title');
            if (textProcess4Title) textProcess4Title.textContent = t('process4Title');
            
            const textProcess4Desc = document.querySelector('.text-process4Desc');
            if (textProcess4Desc) textProcess4Desc.textContent = t('process4Desc');
            
            const textProcess5Title = document.querySelector('.text-process5Title');
            if (textProcess5Title) textProcess5Title.textContent = t('process5Title');
            
            const textProcess5Desc = document.querySelector('.text-process5Desc');
            if (textProcess5Desc) textProcess5Desc.textContent = t('process5Desc');
            
            const textProcess6Title = document.querySelector('.text-process6Title');
            if (textProcess6Title) textProcess6Title.textContent = t('process6Title');
            
            const textProcess6Desc = document.querySelector('.text-process6Desc');
            if (textProcess6Desc) textProcess6Desc.textContent = t('process6Desc');
            
            const textConsiderationsTitle = document.querySelector('.text-considerationsTitle');
            if (textConsiderationsTitle) textConsiderationsTitle.textContent = 'üí° ' + t('considerationsTitle');
            
            const textConsideration1 = document.querySelector('.text-consideration1');
            if (textConsideration1) textConsideration1.innerHTML = t('consideration1');
            
            const textConsideration2 = document.querySelector('.text-consideration2');
            if (textConsideration2) textConsideration2.innerHTML = t('consideration2');
            
            const textConsideration3 = document.querySelector('.text-consideration3');
            if (textConsideration3) textConsideration3.innerHTML = t('consideration3');
            
            const textConsideration4 = document.querySelector('.text-consideration4');
            if (textConsideration4) textConsideration4.innerHTML = t('consideration4');
            
            const textStartButton = document.querySelector('.text-startButton');
            if (textStartButton) textStartButton.textContent = t('startButton');
        }
        
        // Update Step 1
        function updateStep1() {
            const textStep1Title = document.querySelector('.text-step1Title');
            if (textStep1Title) textStep1Title.textContent = 'üìã ' + t('step1Title');
            
            const textStep1Info = document.querySelector('.text-step1Info');
            if (textStep1Info) textStep1Info.textContent = t('step1Info');
            
            const textStep1Tip = document.querySelector('.text-step1Tip');
            if (textStep1Tip) textStep1Tip.innerHTML = t('step1Tip');
            
            const textStep1Option1Title = document.querySelector('.text-step1Option1Title');
            if (textStep1Option1Title) textStep1Option1Title.textContent = 'üë®‚Äçüíº ' + t('step1Option1Title');
            
            const textStep1Option1Desc = document.querySelector('.text-step1Option1Desc');
            if (textStep1Option1Desc) textStep1Option1Desc.textContent = t('step1Option1Desc');
            
            const textStep1Option2Title = document.querySelector('.text-step1Option2Title');
            if (textStep1Option2Title) textStep1Option2Title.textContent = 'üë®‚Äçüíº ' + t('step1Option2Title');
            
            const textStep1Option2Desc = document.querySelector('.text-step1Option2Desc');
            if (textStep1Option2Desc) textStep1Option2Desc.textContent = t('step1Option2Desc');
            
            const textStep1Option3Title = document.querySelector('.text-step1Option3Title');
            if (textStep1Option3Title) textStep1Option3Title.textContent = 'üë∂ ' + t('step1Option3Title');
            
            const textStep1Option3Desc = document.querySelector('.text-step1Option3Desc');
            if (textStep1Option3Desc) textStep1Option3Desc.textContent = t('step1Option3Desc');
            
            const textBackToHome = document.querySelector('.text-backToHome');
            if (textBackToHome) textBackToHome.textContent = '‚Üê ' + t('backToHome');
            
            const textContinue = document.querySelector('.text-continue');
            if (textContinue) textContinue.textContent = t('continue') + ' ‚Üí';
        }
        
        // Update Step 2
        function updateStep2() {
            const textStep2Title = document.querySelector('.text-step2Title');
            if (textStep2Title) textStep2Title.textContent = 'üìë ' + t('step2Title');
            
            const textStep2DownloadTitle = document.querySelector('.text-step2DownloadTitle');
            if (textStep2DownloadTitle) textStep2DownloadTitle.innerHTML = 'üì• ' + t('step2DownloadTitle');
            
            const textStep2DownloadText = document.querySelector('.text-step2DownloadText');
            if (textStep2DownloadText) textStep2DownloadText.innerHTML = t('step2DownloadText');
            
            const textStep2DownloadButton = document.querySelector('.text-step2DownloadButton');
            if (textStep2DownloadButton) textStep2DownloadButton.textContent = 'üìÑ ' + t('step2DownloadButton');
            
            const textStep2DownloadTip = document.querySelector('.text-step2DownloadTip');
            if (textStep2DownloadTip) textStep2DownloadTip.innerHTML = 'üí° ' + t('step2DownloadTip');
            
            const textStep2WarningTitle = document.querySelector('.text-step2WarningTitle');
            if (textStep2WarningTitle) textStep2WarningTitle.textContent = '‚ö†Ô∏è ' + t('step2WarningTitle');
            
            const textStep2WarningLanguage = document.querySelector('.text-step2WarningLanguage');
            if (textStep2WarningLanguage) textStep2WarningLanguage.innerHTML = t('step2WarningLanguage');
            
            const textStep2WarningFormat = document.querySelector('.text-step2WarningFormat');
            if (textStep2WarningFormat) textStep2WarningFormat.innerHTML = t('step2WarningFormat');
        }
        
        // Update Step 3
        function updateStep3() {
            const textStep3Title = document.querySelector('.text-step3Title');
            if (textStep3Title) textStep3Title.textContent = 'üì§ ' + t('step3Title');
            
            const textStep3AlertTitle = document.querySelector('.text-step3AlertTitle');
            if (textStep3AlertTitle) textStep3AlertTitle.textContent = 'üì§ ' + t('step3AlertTitle');
            
            const textStep3Info1 = document.querySelector('.text-step3Info1');
            if (textStep3Info1) textStep3Info1.innerHTML = t('step3Info1');
            
            const textStep3Info2 = document.querySelector('.text-step3Info2');
            if (textStep3Info2) textStep3Info2.innerHTML = t('step3Info2');
            
            const textStep3Info3 = document.querySelector('.text-step3Info3');
            if (textStep3Info3) textStep3Info3.innerHTML = t('step3Info3');
        }
        
        // Update Step 4
        function updateStep4() {
            const step4Title = document.querySelector('#step4TitleHeader');
            if (step4Title) step4Title.textContent = '‚úèÔ∏è ' + t('step4Title');
            
            // === SECCI√ìN 1: INFORMACI√ìN B√ÅSICA ===
            const section1Title = document.querySelector('.section1-title');
            if (section1Title) section1Title.textContent = 'üìã ' + t('section1Title');
            
            const labelFirstName = document.querySelector('.label-firstName');
            if (labelFirstName) labelFirstName.textContent = t('firstName');
            
            const labelLastName = document.querySelector('.label-lastName');
            if (labelLastName) labelLastName.textContent = t('lastName');
            
            const labelApplicationDate = document.querySelector('.label-applicationDate');
            if (labelApplicationDate) labelApplicationDate.textContent = t('applicationDate');
            
            const labelBirthDate = document.querySelector('.label-birthDate');
            if (labelBirthDate) labelBirthDate.textContent = t('birthDate');
            
            const labelBirthPlace = document.querySelector('.label-birthPlace');
            if (labelBirthPlace) labelBirthPlace.textContent = t('birthPlace');
            
            const labelCitizenship = document.querySelector('.label-citizenship');
            if (labelCitizenship) labelCitizenship.textContent = t('citizenship');
            
            const labelPassportNumber = document.querySelector('.label-passportNumber');
            if (labelPassportNumber) labelPassportNumber.textContent = t('passportNumber');
            
            // === SECCI√ìN 2: ESTADO CIVIL ACTUAL ===
            const section2Title = document.querySelector('.section2-title');
            if (section2Title) section2Title.textContent = 'üíë ' + t('section2Title');
            
            const labelMaritalStatusLabel = document.querySelector('.label-maritalStatusLabel');
            if (labelMaritalStatusLabel) labelMaritalStatusLabel.textContent = t('maritalStatusLabel');
            
            const labelCurrentPartnerName = document.querySelector('.label-currentPartnerName');
            if (labelCurrentPartnerName) labelCurrentPartnerName.textContent = t('currentPartnerName');
            
            const labelRelationshipStartDate = document.querySelector('.label-relationshipStartDate');
            if (labelRelationshipStartDate) labelRelationshipStartDate.textContent = t('relationshipStartDate');
            
            // Update dropdown options for marital status
            const optMaritalStatusSelect = document.querySelectorAll('.opt-maritalStatusSelect');
            optMaritalStatusSelect.forEach(opt => opt.textContent = t('maritalStatusSelect'));
            
            const optMaritalStatusMarried = document.querySelectorAll('.opt-maritalStatusMarried');
            optMaritalStatusMarried.forEach(opt => opt.textContent = t('maritalStatusMarried'));
            
            const optMaritalStatusSingle = document.querySelectorAll('.opt-maritalStatusSingle');
            optMaritalStatusSingle.forEach(opt => opt.textContent = t('maritalStatusSingle'));
            
            const optMaritalStatusCommonLaw = document.querySelectorAll('.opt-maritalStatusCommonLaw');
            optMaritalStatusCommonLaw.forEach(opt => opt.textContent = t('maritalStatusCommonLaw'));
            
            const optMaritalStatusSeparated = document.querySelectorAll('.opt-maritalStatusSeparated');
            optMaritalStatusSeparated.forEach(opt => opt.textContent = t('maritalStatusSeparated'));
            
            const optMaritalStatusDivorced = document.querySelectorAll('.opt-maritalStatusDivorced');
            optMaritalStatusDivorced.forEach(opt => opt.textContent = t('maritalStatusDivorced'));
            
            const optMaritalStatusWidowed = document.querySelectorAll('.opt-maritalStatusWidowed');
            optMaritalStatusWidowed.forEach(opt => opt.textContent = t('maritalStatusWidowed'));
            
            // === SECCI√ìN 3: ESTADO CIVIL ANTERIOR ===
            const section3Title = document.querySelector('.section3-title');
            if (section3Title) section3Title.textContent = 'üìú ' + t('section3Title');
            
            const labelPreviousRelationshipLabel = document.querySelector('.label-previousRelationshipLabel');
            if (labelPreviousRelationshipLabel) labelPreviousRelationshipLabel.textContent = t('previousRelationshipLabel');
            
            const labelPreviousRelationType = document.querySelector('.label-previousRelationType');
            if (labelPreviousRelationType) labelPreviousRelationType.textContent = t('previousRelationType');
            
            const labelPreviousPartnerName = document.querySelector('.label-previousPartnerName');
            if (labelPreviousPartnerName) labelPreviousPartnerName.textContent = t('previousPartnerName');
            
            const labelPreviousPartnerBirthDate = document.querySelector('.label-previousPartnerBirthDate');
            if (labelPreviousPartnerBirthDate) labelPreviousPartnerBirthDate.textContent = t('previousPartnerBirthDate');
            
            const labelPreviousRelationshipStart = document.querySelector('.label-previousRelationshipStart');
            if (labelPreviousRelationshipStart) labelPreviousRelationshipStart.textContent = t('previousRelationshipStart');
            
            const labelPreviousRelationshipEnd = document.querySelector('.label-previousRelationshipEnd');
            if (labelPreviousRelationshipEnd) labelPreviousRelationshipEnd.textContent = t('previousRelationshipEnd');
            
            // Update yes/no options
            const optYes = document.querySelectorAll('.opt-yes');
            optYes.forEach(opt => opt.textContent = t('yes'));
            
            const optNo = document.querySelectorAll('.opt-no');
            optNo.forEach(opt => opt.textContent = t('no'));
            
            // === UPDATE BUTTONS ===
            const btnNA = document.querySelectorAll('.btn-naButton');
            btnNA.forEach(btn => btn.textContent = t('naButton'));
            
            // === SECCI√ìN 7: ESTUDIOS DE POSTGRADO ===
            const section7Title = document.querySelector('.section7-title');
            if (section7Title) section7Title.textContent = 'üéì ' + t('section7Title');
            
            const section7Subtitle = document.querySelector('.section7-subtitle');
            if (section7Subtitle) section7Subtitle.textContent = t('section7Subtitle');
            
            const labelPostgraduateStartDate = document.querySelectorAll('.label-postgraduateStartDate');
            labelPostgraduateStartDate.forEach(el => el.textContent = t('postgraduateStartDate'));
            
            const labelPostgraduateEndDate = document.querySelectorAll('.label-postgraduateEndDate');
            labelPostgraduateEndDate.forEach(el => el.textContent = t('postgraduateEndDate'));
            
            const labelPostgraduateCity = document.querySelectorAll('.label-postgraduateCity');
            labelPostgraduateCity.forEach(el => el.textContent = t('postgraduateCity'));
            
            const labelPostgraduateCountry = document.querySelectorAll('.label-postgraduateCountry');
            labelPostgraduateCountry.forEach(el => el.textContent = t('postgraduateCountry'));
            
            const labelPostgraduateArea = document.querySelectorAll('.label-postgraduateArea');
            labelPostgraduateArea.forEach(el => el.textContent = t('postgraduateArea'));
            
            const labelPostgraduateInstitution = document.querySelectorAll('.label-postgraduateInstitution');
            labelPostgraduateInstitution.forEach(el => el.textContent = t('postgraduateInstitution'));
            
            // === SECCI√ìN 8: EMPLEOS ===
            const section8Title = document.querySelector('.section8-title');
            if (section8Title) section8Title.textContent = 'üíº ' + t('section8Title');
            
            const labelJobStartDate = document.querySelectorAll('.label-jobStartDate');
            labelJobStartDate.forEach(el => el.textContent = t('jobStartDate'));
            
            const labelJobEndDate = document.querySelectorAll('.label-jobEndDate');
            labelJobEndDate.forEach(el => el.textContent = t('jobEndDate'));
            
            const labelJobCity = document.querySelectorAll('.label-jobCity');
            labelJobCity.forEach(el => el.textContent = t('jobCity'));
            
            const labelJobCountry = document.querySelectorAll('.label-jobCountry');
            labelJobCountry.forEach(el => el.textContent = t('jobCountry'));
            
            const labelJobPosition = document.querySelectorAll('.label-jobPosition');
            labelJobPosition.forEach(el => el.textContent = t('jobPosition'));
            
            const labelJobCompany = document.querySelectorAll('.label-jobCompany');
            labelJobCompany.forEach(el => el.textContent = t('jobCompany'));
            
            const btnAddEmployment = document.querySelectorAll('.btn-addEmployment');
            btnAddEmployment.forEach(btn => btn.textContent = t('addEmployment'));
            
            // === SECCI√ìN 9: INFORMACI√ìN FAMILIAR ===
            const section9Title = document.querySelector('.section9-title');
            if (section9Title) section9Title.textContent = 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ' + t('section9Title');
            
            // 9.1 Esposo/Pareja
            const section91Title = document.querySelector('.section91-title');
            if (section91Title) section91Title.textContent = t('section91Title');
            
            const labelSpouseName = document.querySelectorAll('.label-spouseName');
            labelSpouseName.forEach(el => el.textContent = t('spouseName'));
            
            const labelSpouseBirthDate = document.querySelectorAll('.label-spouseBirthDate');
            labelSpouseBirthDate.forEach(el => el.textContent = t('spouseBirthDate'));
            
            const labelSpouseBirthCountry = document.querySelectorAll('.label-spouseBirthCountry');
            labelSpouseBirthCountry.forEach(el => el.textContent = t('spouseBirthCountry'));
            
            const labelSpouseAddress = document.querySelectorAll('.label-spouseAddress');
            labelSpouseAddress.forEach(el => el.textContent = t('spouseAddress'));
            
            const labelSpouseOccupation = document.querySelectorAll('.label-spouseOccupation');
            labelSpouseOccupation.forEach(el => el.textContent = t('spouseOccupation'));
            
            const labelSpouseWillTravel = document.querySelectorAll('.label-spouseWillTravel');
            labelSpouseWillTravel.forEach(el => el.textContent = t('spouseWillTravel'));
            
            // 9.2 Madre
            const section92Title = document.querySelector('.section92-title');
            if (section92Title) section92Title.textContent = t('section92Title');
            
            const labelMotherName = document.querySelectorAll('.label-motherName');
            labelMotherName.forEach(el => el.textContent = t('motherName'));
            
            // === OLD LABELS (mantener para otras secciones) ===
            const labelEmail = document.querySelector('.label-email');
            if (labelEmail) labelEmail.textContent = t('email');
            
            const labelPhone = document.querySelector('.label-phone');
            if (labelPhone) labelPhone.textContent = t('phone');
            
            const labelAddress = document.querySelector('.label-address');
            if (labelAddress) labelAddress.textContent = t('address');
            
            const labelTravelDateStart = document.querySelector('.label-travelDateStart');
            if (labelTravelDateStart) labelTravelDateStart.textContent = t('travelDateStart');
            
            const labelTravelDateEnd = document.querySelector('.label-travelDateEnd');
            if (labelTravelDateEnd) labelTravelDateEnd.textContent = t('travelDateEnd');
            
            const labelTravelPurpose = document.querySelector('.label-travelPurpose');
            if (labelTravelPurpose) labelTravelPurpose.textContent = t('travelPurpose');
            
            // Update placeholder
            const placeholderTravelPurpose = document.querySelector('.placeholder-travelPurpose');
            if (placeholderTravelPurpose) placeholderTravelPurpose.placeholder = t('travelPurposePlaceholder');
            
            // Buttons are updated globally by updateAllButtons()
        }

        // Update Step 5
        function updateStep5() {
            const textStep5Title = document.querySelector('.text-step5Title');
            if (textStep5Title) textStep5Title.textContent = '‚úàÔ∏è ' + t('step5Title');
            
            const textStep5AlertTitle = document.querySelector('.text-step5AlertTitle');
            if (textStep5AlertTitle) textStep5AlertTitle.textContent = 'üìù ' + t('step5AlertTitle');
            
            const textStep5AlertIntro = document.querySelector('.text-step5AlertIntro');
            if (textStep5AlertIntro) textStep5AlertIntro.innerHTML = t('step5AlertIntro');
            
            const textStep5AlertSubtitle = document.querySelector('.text-step5AlertSubtitle');
            if (textStep5AlertSubtitle) textStep5AlertSubtitle.textContent = t('step5AlertSubtitle');
            
            const textStep5Tip1 = document.querySelector('.text-step5Tip1');
            if (textStep5Tip1) textStep5Tip1.innerHTML = t('step5Tip1');
            
            const textStep5Tip2 = document.querySelector('.text-step5Tip2');
            if (textStep5Tip2) textStep5Tip2.innerHTML = t('step5Tip2');
            
            const textStep5Tip3 = document.querySelector('.text-step5Tip3');
            if (textStep5Tip3) textStep5Tip3.innerHTML = t('step5Tip3');
            
            const textStep5Tip4 = document.querySelector('.text-step5Tip4');
            if (textStep5Tip4) textStep5Tip4.innerHTML = t('step5Tip4');
            
            const textStep5Tip5 = document.querySelector('.text-step5Tip5');
            if (textStep5Tip5) textStep5Tip5.innerHTML = t('step5Tip5');
            
            const textStep5AlertReminder = document.querySelector('.text-step5AlertReminder');
            if (textStep5AlertReminder) textStep5AlertReminder.innerHTML = t('step5AlertReminder');
            
            const textStep5Warning = document.querySelector('.text-step5Warning');
            if (textStep5Warning) textStep5Warning.innerHTML = t('step5Warning');
            
            const textStep5FormTitle = document.querySelector('.text-step5FormTitle');
            if (textStep5FormTitle) textStep5FormTitle.textContent = 'üìã ' + t('step5FormTitle');
        }
        
        // Update Step 6
        function updateStep6() {
            const step6Title = document.querySelector('#step6TitleHeader');
            if (step6Title) step6Title.textContent = '‚úÖ ' + t('step6Title');
            
            const step6Success = document.querySelector('#step6AlertSuccess');
            if (step6Success) step6Success.textContent = t('step6Success');
            
            const step6ConfirmTitle = document.querySelector('#step6ConfirmTitle');
            if (step6ConfirmTitle) step6ConfirmTitle.innerHTML = '‚ö†Ô∏è ' + t('step6ConfirmTitle');
            
            const step6ConfirmText = document.querySelector('#step6ConfirmText');
            if (step6ConfirmText) step6ConfirmText.innerHTML = t('step6ConfirmText');
            
            const loadingText = document.querySelector('#step6 .loading p');
            if (loadingText) loadingText.textContent = t('loadingMessage');
        }


        // Selection Cards
        function initializeSelectionCards() {
            const cards = document.querySelectorAll('.selection-card');
            const nextBtn = document.getElementById('nextStep1');

            cards.forEach(card => {
                // Single click - seleccionar
                card.addEventListener('click', function() {
                    cards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    appState.applicationType = this.dataset.type;
                    nextBtn.disabled = false;
                });

                // Double click - seleccionar y avanzar autom√°ticamente
                card.addEventListener('dblclick', function() {
                    cards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    appState.applicationType = this.dataset.type;
                    nextBtn.disabled = false;
                    
                    // Avanzar autom√°ticamente despu√©s de un breve delay
                    setTimeout(() => {
                        showDocumentList();
                        goToStep(2);
                    }, 300);
                });
            });

            nextBtn.addEventListener('click', () => {
                if (appState.applicationType) {
                    showDocumentList();
                    goToStep(2);
                } else {
                    alert(t('selectTypeFirst') || 'Por favor, primero seleccione su tipo de solicitud.');
                }
            });
        }

        // Go to Step
        function goToStep(stepNumber) {
            // VALIDACI√ìN: No permitir avanzar a Step 2+ sin seleccionar tipo de aplicaci√≥n
            if (stepNumber >= 2 && !appState.applicationType) {
                alert(t('selectTypeFirst') || 'Por favor, primero seleccione su tipo de solicitud en el Paso 1.');
                // Redirigir al Step 1
                stepNumber = 1;
            }
            
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            const stepId = stepNumber === 0 ? 'stepWelcome' : `step${stepNumber}`;
            const stepElement = document.getElementById(stepId);
            if (stepElement) {
                stepElement.classList.add('active');
            }
            
            // Update state
            appState.currentStep = stepNumber;
            
            // Update progress bar
            updateProgressBar(stepNumber);
            
            // Update quick navigation
            updateQuickNav(stepNumber);
            
            // Update content for current step
            if (stepNumber === 0) {
                updateWelcomePage();
            } else if (stepNumber === 1) {
                updateStep1();
            } else if (stepNumber === 2) {
                updateStep2();
            } else if (stepNumber === 3) {
                updateStep3();
            } else if (stepNumber === 4) {
                updateStep4();
            } else if (stepNumber === 5) {
                updateStep5();
            } else if (stepNumber === 6) {
                updateStep6();
            }
            
            // Show/hide quick nav and applicant info
            const quickNav = document.getElementById('quickNav');
            const applicantInfo = document.getElementById('applicantInfo');
            
            if (stepNumber === 0) {
                quickNav.classList.remove('show');
            } else {
                quickNav.classList.add('show');
                // Show applicant info if we have basic data
                if (appState.personalInfo.firstName && appState.personalInfo.email) {
                    applicantInfo.classList.add('show');
                    updateHeaderInfo();
                }
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Update Progress Bar
        function updateProgressBar(step) {
            const totalSteps = 7; // 0-6 (7 steps total including welcome)
            const percentage = (step / (totalSteps - 1)) * 100;
            
            const progressBar = document.getElementById('globalProgressBar');
            const progressText = document.getElementById('progressText');
            
            progressBar.style.width = percentage + '%';
            
            const stepNames = [
                t('navStep0'),
                t('navStep1'),
                t('navStep2'),
                t('navStep3'),
                t('navStep4'),
                t('navStep5'),
                t('navStep6')
            ];
            
            progressText.textContent = `${t('step')} ${step} ${t('of')} ${totalSteps - 1}: ${stepNames[step]} - ${Math.round(percentage)}% ${t('completed') || 'completado'}`;
        }

        // Update Quick Navigation
        function updateQuickNav(currentStep) {
            const navBtns = document.querySelectorAll('.quick-nav-btn');
            navBtns.forEach((btn, index) => {
                const btnStep = index + 1;
                btn.classList.remove('active');
                if (btnStep === currentStep) {
                    btn.classList.add('active');
                }
                // Los botones permanecen deshabilitados - solo sirven como indicadores visuales
            });
        }

        // Update Header Info
        function updateHeaderInfo() {
            const headerName = document.getElementById('headerName');
            const headerEmail = document.getElementById('headerEmail');
            const headerPhone = document.getElementById('headerPhone');
            
            if (appState.personalInfo.firstName && appState.personalInfo.lastName) {
                headerName.textContent = `${appState.personalInfo.firstName} ${appState.personalInfo.lastName}`;
            }
            if (appState.personalInfo.email) {
                headerEmail.textContent = appState.personalInfo.email;
            }
            if (appState.personalInfo.phone) {
                headerPhone.textContent = appState.personalInfo.phone;
            }
        }

        // Show Document List
        function showDocumentList() {
            const listContainer = document.getElementById('documentList');
            const docs = documentRequirements[appState.applicationType];
            const lang = appState.language || 'es';
            
            // Traducir categor√≠as
            const categoryTitles = {
                es: {
                    mandatory: 'üìã Documentos Obligatorios',
                    optional: 'üìé Documentos Opcionales',
                    conditional: '‚ö° Documentos Condicionales (Si Aplica)',
                    mandatoryBadge: 'Obligatorio',
                    optionalBadge: 'Opcional',
                    conditionalBadge: 'Si Aplica'
                },
                en: {
                    mandatory: 'üìã Mandatory Documents',
                    optional: 'üìé Optional Documents',
                    conditional: '‚ö° Conditional Documents (If Applicable)',
                    mandatoryBadge: 'Mandatory',
                    optionalBadge: 'Optional',
                    conditionalBadge: 'If Applicable'
                },
                fr: {
                    mandatory: 'üìã Documents Obligatoires',
                    optional: 'üìé Documents Optionnels',
                    conditional: '‚ö° Documents Conditionnels (Si Applicable)',
                    mandatoryBadge: 'Obligatoire',
                    optionalBadge: 'Optionnel',
                    conditionalBadge: 'Si Applicable'
                }
            };
            
            const cat = categoryTitles[lang];
            
            // Separar documentos por categor√≠a
            const obligatorios = docs.filter(doc => doc.badge === 'Obligatorio');
            const opcionales = docs.filter(doc => doc.badge === 'Opcional');
            const siAplica = docs.filter(doc => doc.badge === 'Si Aplica');
            
            let html = '<div class="doc-list">';
            
            // Documentos Obligatorios
            html += `<h3 style="color: var(--terracota-dark); margin-bottom: 1rem;">${cat.mandatory}</h3>`;
            obligatorios.forEach((doc) => {
                const translatedDoc = getTranslatedDocument(doc, lang);
                html += `
                    <div class="doc-item">
                        <div class="doc-content" style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                <h4 style="margin: 0;">${translatedDoc.title}</h4>
                                <span style="background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light)); color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">${cat.mandatoryBadge}</span>
                            </div>
                            <p style="margin: 0;">${translatedDoc.description}</p>
                        </div>
                    </div>
                `;
            });
            
            // Documentos Opcionales
            if (opcionales.length > 0) {
                html += `<h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem;">${cat.optional}</h3>`;
                opcionales.forEach((doc) => {
                    const translatedDoc = getTranslatedDocument(doc, lang);
                    html += `
                        <div class="doc-item" style="border-left-color: #94A3B8;">
                            <div class="doc-content" style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                    <h4 style="margin: 0;">${translatedDoc.title}</h4>
                                    <span style="background: #94A3B8; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">${cat.optionalBadge}</span>
                                </div>
                                <p style="margin: 0;">${translatedDoc.description}</p>
                            </div>
                        </div>
                    `;
                });
            }
            
            // Documentos Si Aplica
            if (siAplica.length > 0) {
                html += `<h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem;">${cat.conditional}</h3>`;
                siAplica.forEach((doc) => {
                    const translatedDoc = getTranslatedDocument(doc, lang);
                    html += `
                        <div class="doc-item" style="border-left-color: #F59E0B;">
                            <div class="doc-content" style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                    <h4 style="margin: 0;">${translatedDoc.title}</h4>
                                    <span style="background: #F59E0B; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">${cat.conditionalBadge}</span>
                                </div>
                                <p style="margin: 0;">${translatedDoc.description}</p>
                            </div>
                        </div>
                    `;
                });
            }
            
            html += '</div>';
            listContainer.innerHTML = html;
            
            // Also create upload sections
            createUploadSections();
        }

        // Create Upload Sections
        function createUploadSections() {
            const uploadGrid = document.getElementById('uploadGrid');
            const docs = documentRequirements[appState.applicationType];
            const lang = appState.language || 'es';
            
            // Traducir badges
            const badgeTranslations = {
                es: { 'Obligatorio': 'Obligatorio', 'Opcional': 'Opcional', 'Si Aplica': 'Si Aplica' },
                en: { 'Obligatorio': 'Mandatory', 'Opcional': 'Optional', 'Si Aplica': 'If Applicable' },
                fr: { 'Obligatorio': 'Obligatoire', 'Opcional': 'Optionnel', 'Si Aplica': 'Si Applicable' }
            };
            
            let html = '';
            docs.forEach(doc => {
                const translatedDoc = getTranslatedDocument(doc, lang);
                const isPhoto = doc.id === 'photo';
                const acceptTypes = isPhoto ? '.pdf,.jpg,.jpeg' : '.pdf';
                const badgeColor = doc.badge === 'Obligatorio' ? 'var(--terracota-primary)' : 
                                   doc.badge === 'Opcional' ? '#94A3B8' : '#F59E0B';
                const translatedBadge = badgeTranslations[lang][doc.badge];
                
                html += `
                    <div class="upload-section" data-doc-id="${doc.id}">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                            <h4 style="margin: 0;">${translatedDoc.title}</h4>
                            <span style="background: ${badgeColor}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">
                                ${translatedBadge}
                            </span>
                        </div>
                        <p style="font-size: 0.85rem; color: var(--warm-gray); margin-bottom: 1rem; line-height: 1.5;">
                            ${translatedDoc.description}
                        </p>
                        
                        <div class="upload-area" data-doc-id="${doc.id}">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">
                                <p><strong>${t('uploadClick')}</strong></p>
                                <p>${t('uploadDrag')}</p>
                                <p style="margin-top: 0.5rem; font-size: 0.75rem; opacity: 0.7;">
                                    ${t('uploadSize')}
                                </p>
                            </div>
                            <div class="file-name"></div>
                            <input type="file" accept="${acceptTypes}" style="display: none;" data-doc-id="${doc.id}">
                        </div>
                        
                        <div style="margin-top: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="na-${doc.id}" class="na-checkbox" data-doc-id="${doc.id}" 
                                   style="width: 18px; height: 18px; cursor: pointer;">
                            <label for="na-${doc.id}" style="cursor: pointer; font-size: 0.9rem; color: var(--warm-gray); user-select: none;">
                                ${t('notApplicable')}
                            </label>
                        </div>
                    </div>
                `;
            });
            
            uploadGrid.innerHTML = html;
            
            // Add event listeners to upload areas
            const uploadAreas = document.querySelectorAll('.upload-area');
            uploadAreas.forEach(area => {
                const input = area.querySelector('input[type="file"]');
                
                // Click to upload
                area.addEventListener('click', () => input.click());
                
                // File input change
                input.addEventListener('change', function() {
                    handleFileUpload(this, area);
                });
                
                // DRAG & DROP FUNCTIONALITY
                // Prevent default drag behaviors
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    area.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                // Highlight drop area when dragging over
                ['dragenter', 'dragover'].forEach(eventName => {
                    area.addEventListener(eventName, () => {
                        area.style.background = 'linear-gradient(135deg, #E0F2F1, #B2DFDB)';
                        area.style.borderColor = '#20B2AA';
                        area.style.transform = 'scale(1.02)';
                    }, false);
                });
                
                // Remove highlight when dragging away
                ['dragleave', 'drop'].forEach(eventName => {
                    area.addEventListener(eventName, () => {
                        area.style.background = '';
                        area.style.borderColor = '';
                        area.style.transform = '';
                    }, false);
                });
                
                // Handle dropped files
                area.addEventListener('drop', function(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    
                    if (files.length > 0) {
                        // Create a new FileList-like object for the input
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(files[0]);
                        input.files = dataTransfer.files;
                        
                        // Trigger file upload
                        handleFileUpload(input, area);
                    }
                }, false);
            });
            
            // Add event listeners to "No Aplica" checkboxes
            const naCheckboxes = document.querySelectorAll('.na-checkbox');
            naCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    handleNotApplicable(this);
                });
            });
        }

        // Handle File Upload
        function handleFileUpload(input, area) {
            const file = input.files[0];
            if (!file) return;
            
            // Check file size (3.8MB)
            if (file.size > 3.8 * 1024 * 1024) {
                alert(t('fileTooLarge'));
                return;
            }
            
            const docId = input.dataset.docId;
            appState.uploadedFiles[docId] = file;
            
            area.classList.add('has-file');
            area.querySelector('.upload-icon').textContent = '‚úÖ';
            area.querySelector('.file-name').textContent = file.name;
            
            // Uncheck "No Aplica" if file is uploaded
            const checkbox = document.getElementById(`na-${docId}`);
            if (checkbox) {
                checkbox.checked = false;
            }
        }

        // Handle Not Applicable
        function handleNotApplicable(checkbox) {
            const docId = checkbox.dataset.docId;
            const section = checkbox.closest('.upload-section');
            const uploadArea = section.querySelector('.upload-area');
            
            if (checkbox.checked) {
                // Mark as not applicable
                appState.uploadedFiles[docId] = 'N/A';
                uploadArea.classList.add('has-file');
                uploadArea.style.opacity = '0.5';
                uploadArea.style.pointerEvents = 'none';
                uploadArea.querySelector('.upload-icon').textContent = 'üö´';
                uploadArea.querySelector('.file-name').innerHTML = '<span style="color: #94A3B8; font-weight: 600;">No Aplica</span>';
                
                // Clear file input
                const fileInput = uploadArea.querySelector('input[type="file"]');
                fileInput.value = '';
            } else {
                // Remove not applicable status
                delete appState.uploadedFiles[docId];
                uploadArea.classList.remove('has-file');
                uploadArea.style.opacity = '1';
                uploadArea.style.pointerEvents = 'auto';
                uploadArea.querySelector('.upload-icon').textContent = 'üìÅ';
                uploadArea.querySelector('.file-name').textContent = '';
            }
        }

        // Handle Step 4 Next
        function handleStep4Next() {
            const form = document.getElementById('personalInfoForm');
            
            // Remove previous error highlights
            const allInputs = form.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.style.borderColor = '';
                input.style.background = '';
            });
            
            // Check validity
            if (!form.checkValidity()) {
                const lang = appState.language || 'es';
                const messages = {
                    es: 'Por favor, complete todos los campos obligatorios marcados en rojo.',
                    en: 'Please complete all required fields marked in red.',
                    fr: 'Veuillez compl√©ter tous les champs obligatoires marqu√©s en rouge.'
                };
                
                // Find all invalid fields
                const invalidFields = [];
                allInputs.forEach(input => {
                    if (input.required && !input.disabled && !input.value) {
                        input.style.borderColor = '#EF4444';
                        input.style.background = '#FEE2E2';
                        
                        // Find label text
                        const formGroup = input.closest('.form-group');
                        if (formGroup) {
                            const label = formGroup.querySelector('label');
                            if (label) {
                                const labelText = label.textContent.replace('*', '').trim();
                                invalidFields.push(labelText);
                            }
                        }
                    }
                });
                
                // Show alert with missing fields
                if (invalidFields.length > 0) {
                    const fieldsList = invalidFields.slice(0, 5).join('\n‚Ä¢ '); // Show first 5
                    const moreText = invalidFields.length > 5 ? `\n... y ${invalidFields.length - 5} m√°s` : '';
                    alert(`${messages[lang]}\n\nCampos faltantes:\n‚Ä¢ ${fieldsList}${moreText}`);
                }
                
                // Scroll to first invalid field
                const firstInvalid = form.querySelector('input[required]:invalid, select[required]:invalid, textarea[required]:invalid');
                if (firstInvalid) {
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    setTimeout(() => firstInvalid.focus(), 500);
                }
                
                return;
            }
            
            const formData = new FormData(form);
            appState.personalInfo = {};
            for (let [key, value] of formData.entries()) {
                appState.personalInfo[key] = value;
            }
            
            // Update header with applicant info
            updateHeaderInfo();
            document.getElementById('applicantInfo').classList.add('show');
            
            goToStep(5);
        }

        // Handle Step 5 Next
        function handleStep5Next() {
            const form = document.getElementById('travelPurposeForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const formData = new FormData(form);
            appState.travelPurpose = {};
            for (let [key, value] of formData.entries()) {
                appState.travelPurpose[key] = value;
            }
            
            showReview();
            goToStep(6);
        }

        // Show Review
        function showReview() {
            const reviewContainer = document.getElementById('reviewContent');
            
            let html = `
                <div class="alert alert-info" style="background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light)); border: 3px solid var(--terracota-dark); box-shadow: 0 6px 20px rgba(200, 90, 79, 0.3); margin-bottom: 2rem;">
                    <h3 style="color: white; margin-bottom: 1.2rem; font-size: 1.3rem; font-weight: 700;">üìã SOLICITUD DE:</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; font-size: 1rem;">
                        <div style="background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <strong style="color: var(--terracota-dark); display: block; margin-bottom: 0.5rem;">üë§ Nombre Completo</strong>
                            <span style="font-size: 1.2rem; font-weight: 700; color: var(--dark-text);">${appState.personalInfo.firstName || ''} ${appState.personalInfo.lastName || ''}</span>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <strong style="color: var(--terracota-dark); display: block; margin-bottom: 0.5rem;">üìß Correo Electr√≥nico</strong>
                            <span style="font-size: 1.1rem; font-weight: 700; color: var(--dark-text); word-break: break-word;">${appState.personalInfo.email || ''}</span>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <strong style="color: var(--terracota-dark); display: block; margin-bottom: 0.5rem;">üì± Tel√©fono</strong>
                            <span style="font-size: 1.2rem; font-weight: 700; color: var(--dark-text);">${appState.personalInfo.phone || ''}</span>
                        </div>
                    </div>
                </div>

                <div class="doc-list">
                    <h3>Informaci√≥n Personal</h3>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            ${Object.entries(appState.personalInfo).map(([key, value]) => `
                                <div>
                                    <strong style="color: var(--warm-gray); font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">
                                        ${getFieldLabel(key)}
                                    </strong>
                                    <span>${value}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <h3>Motivo del Viaje</h3>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
                        ${appState.travelPurpose.travelPurpose ? `
                            <div style="margin-bottom: 1.5rem;">
                                <strong style="color: var(--terracota-dark); display: block; margin-bottom: 0.5rem;">Carta de Motivaci√≥n:</strong>
                                <p style="white-space: pre-wrap; line-height: 1.8; padding: 1rem; background: var(--cream); border-radius: 8px;">${appState.travelPurpose.travelPurpose}</p>
                            </div>
                        ` : ''}
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            ${Object.entries(appState.travelPurpose).filter(([key]) => key !== 'travelPurpose').map(([key, value]) => `
                                <div>
                                    <strong style="color: var(--warm-gray); font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">
                                        ${getTravelFieldLabel(key)}
                                    </strong>
                                    <span>${value}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <h3>Documentos Subidos</h3>
                    <div style="background: white; padding: 1.5rem; border-radius: 10px;">
                        ${Object.entries(appState.uploadedFiles).map(([docId, file]) => {
                            if (file === 'N/A') {
                                return `
                                    <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-bottom: 1px solid var(--terracota-pale);">
                                        <span style="color: #94A3B8; font-size: 1.25rem;">üö´</span>
                                        <div>
                                            <strong style="display: block;">${getDocumentTitle(docId)}</strong>
                                            <span style="font-size: 0.85rem; color: #94A3B8;">No Aplica</span>
                                        </div>
                                    </div>
                                `;
                            } else {
                                return `
                                    <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-bottom: 1px solid var(--terracota-pale);">
                                        <span style="color: #4CAF50; font-size: 1.25rem;">‚úÖ</span>
                                        <div>
                                            <strong style="display: block;">${getDocumentTitle(docId)}</strong>
                                            <span style="font-size: 0.85rem; color: var(--warm-gray);">${file.name} (${formatFileSize(file.size)})</span>
                                        </div>
                                    </div>
                                `;
                            }
                        }).join('')}
                    </div>
                </div>
            `;
            
            reviewContainer.innerHTML = html;
            
            // Fill confirmation fields
            document.getElementById('confirmName').value = `${appState.personalInfo.firstName || ''} ${appState.personalInfo.lastName || ''}`;
            document.getElementById('confirmEmail').value = appState.personalInfo.email || '';
            document.getElementById('confirmPhone').value = appState.personalInfo.phone || '';
        }

        // Download Current Checklist (from Step 2 - uses already selected type)
        function downloadCurrentChecklist() {
            if (!appState.applicationType) {
                alert(t('selectTypeFirst'));
                goToStep(1);
                return;
            }
            
            downloadChecklistForType(appState.applicationType);
        }
        
        // Download Checklist for Specific Type (from welcome page) - GENERATES REAL PDF
        function downloadChecklistForType(applicationType) {
            const docs = documentRequirements[applicationType];
            if (!docs || docs.length === 0) {
                const lang = appState.language || 'es';
                const errorMessages = {
                    es: 'Error: No se pudieron cargar los documentos para este tipo de solicitud.',
                    en: 'Error: Could not load documents for this application type.',
                    fr: 'Erreur: Impossible de charger les documents pour ce type de demande.'
                };
                alert(errorMessages[lang]);
                return;
            }
            
            // Show loading
            const lang = appState.language || 'es';
            const loadingTexts = {
                es: { title: 'Generando PDF...', subtitle: 'Por favor espere' },
                en: { title: 'Generating PDF...', subtitle: 'Please wait' },
                fr: { title: 'G√©n√©ration du PDF...', subtitle: 'Veuillez patienter' }
            };
            
            const loadingMsg = document.createElement('div');
            loadingMsg.id = 'pdfLoading';
            loadingMsg.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem 3rem; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); z-index: 10000; text-align: center;';
            loadingMsg.innerHTML = `
                <div style="font-size: 3rem; margin-bottom: 1rem;">üìÑ</div>
                <h3 style="margin: 0 0 0.5rem 0; color: #20B2AA;">${loadingTexts[lang].title}</h3>
                <p style="margin: 0; color: #666;">${loadingTexts[lang].subtitle}</p>
            `;
            document.body.appendChild(loadingMsg);
            
            // Generate PDF after brief delay to show loading
            setTimeout(() => {
                try {
                    generatePDFChecklist(applicationType, docs);
                } catch (error) {
                    console.error('Error generating PDF:', error);
                    const errorPdfMessages = {
                        es: 'Error al generar el PDF. Por favor, intente nuevamente.',
                        en: 'Error generating PDF. Please try again.',
                        fr: 'Erreur lors de la g√©n√©ration du PDF. Veuillez r√©essayer.'
                    };
                    alert(errorPdfMessages[lang]);
                } finally {
                    document.body.removeChild(loadingMsg);
                }
            }, 300);
        }
        
        // Get PDF Filename for each document - MULTILINGUAL
        function getPDFFileName(docId, lang = 'es') {
            const fileNames = {
                es: {
                    'passport': 'Pasaporte.pdf',
                    'id': 'Documento_Identidad.pdf',
                    'photo': 'Fotografia.pdf (o .jpg)',
                    'imm5257': 'IMM5257_Formulario_Solicitud.pdf',
                    'imm5645': 'IMM5645_Informacion_Familiar.pdf',
                    'imm5707': 'IMM5707_Carta_Invitacion.pdf',
                    'proof-funds': 'Comprobante_Fondos.pdf',
                    'employment': 'Carta_Laboral.pdf',
                    'property': 'Certificado_Propiedades.pdf',
                    'marriage': 'Certificado_Matrimonio.pdf',
                    'birth-cert': 'Certificado_Nacimiento.pdf',
                    'travel-history': 'Historial_Viajes.pdf',
                    'bank-statements': 'Estados_Cuenta_Bancarios.pdf',
                    'tax-returns': 'Declaraciones_Impuestos.pdf',
                    'schedule1': 'Schedule1_Antecedentes.pdf',
                    'biometrics': 'Carta_Biometricos.pdf',
                    'medical': 'Examen_Medico.pdf',
                    'police-cert': 'Certificado_Policia.pdf',
                    'study-permit': 'Permiso_Estudios.pdf',
                    'work-permit': 'Permiso_Trabajo.pdf',
                    'pr-card': 'Tarjeta_Residencia.pdf',
                    'custody': 'Documentos_Custodia.pdf',
                    'consent-letter': 'Carta_Consentimiento.pdf',
                    'school-letter': 'Carta_Escuela.pdf',
                    'parental-id': 'Identificacion_Padres.pdf',
                    'divorce': 'Certificado_Divorcio.pdf',
                    'death-cert': 'Certificado_Defuncion.pdf',
                    'sponsorship': 'Carta_Patrocinio.pdf',
                    'business-reg': 'Registro_Empresa.pdf',
                    'lease': 'Contrato_Alquiler.pdf',
                    'utility-bills': 'Facturas_Servicios.pdf'
                },
                en: {
                    'passport': 'Passport.pdf',
                    'id': 'Identity_Document.pdf',
                    'photo': 'Photograph.pdf (or .jpg)',
                    'imm5257': 'IMM5257_Application_Form.pdf',
                    'imm5645': 'IMM5645_Family_Information.pdf',
                    'imm5707': 'IMM5707_Invitation_Letter.pdf',
                    'proof-funds': 'Proof_of_Funds.pdf',
                    'employment': 'Employment_Letter.pdf',
                    'property': 'Property_Certificate.pdf',
                    'marriage': 'Marriage_Certificate.pdf',
                    'birth-cert': 'Birth_Certificate.pdf',
                    'travel-history': 'Travel_History.pdf',
                    'bank-statements': 'Bank_Statements.pdf',
                    'tax-returns': 'Tax_Returns.pdf',
                    'schedule1': 'Schedule1_Background.pdf',
                    'biometrics': 'Biometrics_Letter.pdf',
                    'medical': 'Medical_Exam.pdf',
                    'police-cert': 'Police_Certificate.pdf',
                    'study-permit': 'Study_Permit.pdf',
                    'work-permit': 'Work_Permit.pdf',
                    'pr-card': 'PR_Card.pdf',
                    'custody': 'Custody_Documents.pdf',
                    'consent-letter': 'Consent_Letter.pdf',
                    'school-letter': 'School_Letter.pdf',
                    'parental-id': 'Parental_ID.pdf',
                    'divorce': 'Divorce_Certificate.pdf',
                    'death-cert': 'Death_Certificate.pdf',
                    'sponsorship': 'Sponsorship_Letter.pdf',
                    'business-reg': 'Business_Registration.pdf',
                    'lease': 'Lease_Agreement.pdf',
                    'utility-bills': 'Utility_Bills.pdf'
                },
                fr: {
                    'passport': 'Passeport.pdf',
                    'id': 'Document_Identite.pdf',
                    'photo': 'Photographie.pdf (ou .jpg)',
                    'imm5257': 'IMM5257_Formulaire_Demande.pdf',
                    'imm5645': 'IMM5645_Information_Familiale.pdf',
                    'imm5707': 'IMM5707_Lettre_Invitation.pdf',
                    'proof-funds': 'Preuve_de_Fonds.pdf',
                    'employment': 'Lettre_Emploi.pdf',
                    'property': 'Certificat_Propriete.pdf',
                    'marriage': 'Certificat_Mariage.pdf',
                    'birth-cert': 'Certificat_Naissance.pdf',
                    'travel-history': 'Historique_Voyages.pdf',
                    'bank-statements': 'Releves_Bancaires.pdf',
                    'tax-returns': 'Declarations_Impots.pdf',
                    'schedule1': 'Schedule1_Antecedents.pdf',
                    'biometrics': 'Lettre_Biometrie.pdf',
                    'medical': 'Examen_Medical.pdf',
                    'police-cert': 'Certificat_Police.pdf',
                    'study-permit': 'Permis_Etudes.pdf',
                    'work-permit': 'Permis_Travail.pdf',
                    'pr-card': 'Carte_RP.pdf',
                    'custody': 'Documents_Garde.pdf',
                    'consent-letter': 'Lettre_Consentement.pdf',
                    'school-letter': 'Lettre_Ecole.pdf',
                    'parental-id': 'ID_Parents.pdf',
                    'divorce': 'Certificat_Divorce.pdf',
                    'death-cert': 'Certificat_Deces.pdf',
                    'sponsorship': 'Lettre_Parrainage.pdf',
                    'business-reg': 'Enregistrement_Entreprise.pdf',
                    'lease': 'Contrat_Location.pdf',
                    'utility-bills': 'Factures_Services.pdf'
                }
            };
            
            return fileNames[lang][docId] || `${docId}.pdf`;
        }
        
        // Generate PDF Checklist
        function generatePDFChecklist(applicationType, docs) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const margin = 20;
            const contentWidth = pageWidth - (margin * 2);
            let yPosition = margin;
            
            // Get current language
            const lang = appState.language || 'es';
            
            // Translations for PDF
            const pdfTranslations = {
                es: {
                    title: 'Checklist de Documentos Requeridos',
                    subtitle: 'Visa de Turismo Canadiense',
                    generationDate: 'Fecha de generacion:',
                    applicationType: 'Tipo de Solicitud:',
                    instructions: 'Instrucciones Importantes',
                    instructionsList: [
                        'Idioma: Todos los documentos que no esten en frances o ingles deben estar traducidos.',
                        'Formato: Los documentos deben estar en formato PDF (maximo 3.8 MB por archivo).',
                        'Fotografia: Puede estar en formato PDF o JPG/JPEG.',
                        'Marque cada documento: Use las casillas para marcar cuando tenga cada documento listo.'
                    ],
                    mandatory: 'DOCUMENTOS OBLIGATORIOS',
                    conditional: 'DOCUMENTOS CONDICIONALES',
                    optional: 'DOCUMENTOS OPCIONALES',
                    summary: 'Resumen de Documentos',
                    mandatoryLabel: 'Obligatorios:',
                    conditionalLabel: 'Si Aplica:',
                    optionalLabel: 'Opcionales:',
                    total: 'TOTAL:',
                    contact: 'Informaci√≥n de Contacto',
                    email: 'Email:',
                    website: 'Web:',
                    footer: 'Este checklist es una gu√≠a de referencia. Por favor, verifique siempre los requisitos oficiales en el sitio de IRCC.',
                    filename: 'Nombre del archivo:',
                    format: 'Formato: PDF (m√°x. 3.8 MB)',
                    formatPhoto: 'Formato: PDF (m√°x. 3.8 MB) | JPG/JPEG tambi√©n aceptado'
                },
                en: {
                    title: 'Required Documents Checklist',
                    subtitle: 'Canadian Tourist Visa',
                    generationDate: 'Generation date:',
                    applicationType: 'Application Type:',
                    instructions: 'Important Instructions',
                    instructionsList: [
                        'Language: All documents not in French or English must be translated.',
                        'Format: Documents must be in PDF format (maximum 3.8 MB per file).',
                        'Photograph: Can be in PDF or JPG/JPEG format.',
                        'Check each document: Use the boxes to mark when you have each document ready.'
                    ],
                    mandatory: 'MANDATORY DOCUMENTS',
                    conditional: 'CONDITIONAL DOCUMENTS',
                    optional: 'OPTIONAL DOCUMENTS',
                    summary: 'Documents Summary',
                    mandatoryLabel: 'Mandatory:',
                    conditionalLabel: 'If Applicable:',
                    optionalLabel: 'Optional:',
                    total: 'TOTAL:',
                    contact: 'Contact Information',
                    email: 'Email:',
                    website: 'Website:',
                    footer: 'This checklist is a reference guide. Please always verify official requirements on the IRCC website.',
                    filename: 'Filename:',
                    format: 'Format: PDF (max. 3.8 MB)',
                    formatPhoto: 'Format: PDF (max. 3.8 MB) | JPG/JPEG also accepted'
                },
                fr: {
                    title: 'Liste de Controle des Documents Requis',
                    subtitle: 'Visa de Tourisme Canadien',
                    generationDate: 'Date de generation:',
                    applicationType: 'Type de Demande:',
                    instructions: 'Instructions Importantes',
                    instructionsList: [
                        'Langue: Tous les documents qui ne sont pas en francais ou en anglais doivent etre traduits.',
                        'Format: Les documents doivent etre au format PDF (maximum 3.8 MB par fichier).',
                        'Photographie: Peut etre au format PDF ou JPG/JPEG.',
                        'Cochez chaque document: Utilisez les cases pour marquer lorsque vous avez chaque document pret.'
                    ],
                    mandatory: 'DOCUMENTS OBLIGATOIRES',
                    conditional: 'DOCUMENTS CONDITIONNELS',
                    optional: 'DOCUMENTS OPTIONNELS',
                    summary: 'R√©sum√© des Documents',
                    mandatoryLabel: 'Obligatoires:',
                    conditionalLabel: 'Si Applicable:',
                    optionalLabel: 'Optionnels:',
                    total: 'TOTAL:',
                    contact: 'Coordonn√©es',
                    email: 'Courriel:',
                    website: 'Site Web:',
                    footer: 'Cette liste de contr√¥le est un guide de r√©f√©rence. Veuillez toujours v√©rifier les exigences officielles sur le site d\'IRCC.',
                    filename: 'Nom du fichier:',
                    format: 'Format: PDF (max. 3.8 MB)',
                    formatPhoto: 'Format: PDF (max. 3.8 MB) | JPG/JPEG √©galement accept√©'
                }
            };
            
            const t = pdfTranslations[lang];
            
            const today = new Date().toLocaleDateString(lang === 'es' ? 'es-ES' : lang === 'fr' ? 'fr-FR' : 'en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Helper function to add new page if needed
            function checkPageBreak(neededSpace) {
                if (yPosition + neededSpace > pageHeight - margin) {
                    doc.addPage();
                    yPosition = margin;
                    return true;
                }
                return false;
            }
            
            // Helper function to draw checkbox
            function drawCheckbox(x, y, size = 6) {
                doc.setDrawColor(32, 178, 170); // Aquamarina
                doc.setLineWidth(0.8);
                doc.rect(x, y - size + 1, size, size);
            }
            
            // ===== HEADER =====
            // Title
            doc.setFillColor(32, 178, 170);
            doc.rect(0, 0, pageWidth, 35, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.text('LMBI IMMIGRATION', pageWidth / 2, 15, { align: 'center' });
            
            doc.setFontSize(16);
            doc.text(t.title, pageWidth / 2, 25, { align: 'center' });
            
            yPosition = 45;
            
            // Subtitle
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text(t.subtitle, pageWidth / 2, yPosition, { align: 'center' });
            yPosition += 5;
            
            doc.setFontSize(9);
            doc.text(`${t.generationDate} ${today}`, pageWidth / 2, yPosition, { align: 'center' });
            yPosition += 15;
            
            // Application Type Box
            doc.setFillColor(255, 248, 225);
            doc.setDrawColor(255, 183, 77);
            doc.setLineWidth(0.5);
            doc.rect(margin, yPosition, contentWidth, 12, 'FD');
            
            doc.setTextColor(230, 81, 0);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text(`${t.applicationType} ${getApplicationTypeName(applicationType, lang)}`, margin + 5, yPosition + 8);
            yPosition += 20;
            
            // ===== INSTRUCTIONS BOX =====
            checkPageBreak(45);
            
            doc.setFillColor(227, 242, 253);
            doc.setDrawColor(33, 150, 243);
            doc.setLineWidth(1);
            doc.rect(margin, yPosition, contentWidth, 40, 'FD');
            
            doc.setTextColor(21, 101, 192);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text(t.instructions, margin + 5, yPosition + 7);
            
            doc.setTextColor(51, 51, 51);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            
            let instructY = yPosition + 15;
            t.instructionsList.forEach((instruction, index) => {
                // Add dash before each instruction
                doc.text(`- ${instruction}`, margin + 5, instructY, { maxWidth: contentWidth - 10 });
                instructY += 6;
            });
            
            yPosition += 48;
            
            // ===== DOCUMENTS BY CATEGORY =====
            const obligatorios = docs.filter(d => d.badge === 'Obligatorio');
            const siAplica = docs.filter(d => d.badge === 'Si Aplica');
            const opcionales = docs.filter(d => d.badge === 'Opcional');
            
            // Function to add category
            function addCategory(titleKey, documents, color) {
                checkPageBreak(20);
                
                // Category header
                const [r, g, b] = color;
                doc.setFillColor(r, g, b);
                doc.rect(margin, yPosition, contentWidth, 10, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(12);
                doc.setFont('helvetica', 'bold');
                const categoryTitle = titleKey === 'mandatory' ? `${t.mandatory} (${documents.length})` :
                                    titleKey === 'conditional' ? `${t.conditional} (${documents.length})` :
                                    `${t.optional} (${documents.length})`;
                doc.text(categoryTitle, margin + 5, yPosition + 7);
                yPosition += 15;
                
                // Documents
                documents.forEach((document, index) => {
                    const docHeight = 42; // Increased height to accommodate PDF filename
                    checkPageBreak(docHeight);
                    
                    // Document box
                    doc.setDrawColor(...color);
                    doc.setLineWidth(0.8);
                    doc.rect(margin, yPosition, contentWidth, docHeight - 3);
                    
                    // Checkbox
                    drawCheckbox(margin + 3, yPosition + 8);
                    
                    // Get translated document title and description
                    const translatedDoc = getTranslatedDocument(document, lang);
                    
                    // Document number and title
                    doc.setTextColor(...color);
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'bold');
                    doc.text(`${index + 1}. ${translatedDoc.title}`, margin + 12, yPosition + 7, { maxWidth: contentWidth - 15 });
                    
                    // PDF Filename box (NEW - HIGHLIGHTED)
                    doc.setFillColor(255, 251, 230);
                    doc.setDrawColor(255, 193, 7);
                    doc.setLineWidth(0.5);
                    doc.rect(margin + 3, yPosition + 10, contentWidth - 6, 6, 'FD');
                    
                    doc.setTextColor(230, 81, 0);
                    doc.setFontSize(8);
                    doc.setFont('helvetica', 'bold');
                    const pdfFileName = getPDFFileName(document.id, lang);
                    doc.text(`${t.filename} ${pdfFileName}`, margin + 5, yPosition + 14);
                    
                    // Description box
                    doc.setFillColor(245, 245, 245);
                    doc.setDrawColor(200, 200, 200);
                    doc.setLineWidth(0.3);
                    doc.rect(margin + 3, yPosition + 17, contentWidth - 6, 15, 'FD');
                    
                    doc.setTextColor(51, 51, 51);
                    doc.setFontSize(8);
                    doc.setFont('helvetica', 'normal');
                    const splitDescription = doc.splitTextToSize(translatedDoc.description, contentWidth - 12);
                    doc.text(splitDescription.slice(0, 3), margin + 5, yPosition + 21); // Max 3 lines
                    
                    // Format info
                    doc.setFillColor(230, 255, 250);
                    doc.rect(margin + 3, yPosition + 33, contentWidth - 6, 5, 'F');
                    
                    doc.setTextColor(23, 143, 135);
                    doc.setFontSize(7);
                    doc.setFont('helvetica', 'bold');
                    const formatText = document.id === 'photo' ? t.formatPhoto : t.format;
                    doc.text(formatText, margin + 5, yPosition + 36);
                    
                    yPosition += docHeight;
                });
            }
            
            // Add Obligatorios
            if (obligatorios.length > 0) {
                addCategory('mandatory', obligatorios, [32, 178, 170]);
            }
            
            // Add Si Aplica
            if (siAplica.length > 0) {
                addCategory('conditional', siAplica, [245, 158, 11]);
            }
            
            // Add Opcionales
            if (opcionales.length > 0) {
                addCategory('optional', opcionales, [148, 163, 184]);
            }
            
            // ===== SUMMARY BOX =====
            checkPageBreak(35);
            
            doc.setFillColor(232, 245, 233);
            doc.setDrawColor(76, 175, 80);
            doc.setLineWidth(1);
            doc.rect(margin, yPosition, contentWidth, 30, 'FD');
            
            doc.setTextColor(46, 125, 50);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text(t.summary, margin + 5, yPosition + 7);
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            let summaryY = yPosition + 15;
            
            if (obligatorios.length > 0) {
                doc.text(t.mandatoryLabel, margin + 5, summaryY);
                doc.setFont('helvetica', 'bold');
                doc.text(`${obligatorios.length}`, contentWidth - 10, summaryY, { align: 'right' });
                summaryY += 5;
            }
            
            if (siAplica.length > 0) {
                doc.setFont('helvetica', 'normal');
                doc.text(t.conditionalLabel, margin + 5, summaryY);
                doc.setFont('helvetica', 'bold');
                doc.text(`${siAplica.length}`, contentWidth - 10, summaryY, { align: 'right' });
                summaryY += 5;
            }
            
            if (opcionales.length > 0) {
                doc.setFont('helvetica', 'normal');
                doc.text(t.optionalLabel, margin + 5, summaryY);
                doc.setFont('helvetica', 'bold');
                doc.text(`${opcionales.length}`, contentWidth - 10, summaryY, { align: 'right' });
                summaryY += 5;
            }
            
            doc.setLineWidth(0.5);
            doc.line(margin + 5, summaryY, contentWidth - 5, summaryY);
            summaryY += 4;
            
            doc.setFontSize(11);
            doc.text(`${t.total}`, margin + 5, summaryY);
            doc.setFont('helvetica', 'bold');
            doc.text(`${docs.length}`, contentWidth - 10, summaryY, { align: 'right' });
            
            yPosition += 38;
            
            // ===== CONTACT BOX =====
            checkPageBreak(30);
            
            doc.setFillColor(227, 242, 253);
            doc.setDrawColor(33, 150, 243);
            doc.setLineWidth(1);
            doc.rect(margin, yPosition, contentWidth, 25, 'FD');
            
            doc.setTextColor(21, 101, 192);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text(t.contact, margin + 5, yPosition + 7);
            
            doc.setTextColor(51, 51, 51);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('LMBI Immigration', margin + 5, yPosition + 14);
            
            doc.setFont('helvetica', 'normal');
            doc.text(`${t.email} lmbi.immigration@gmail.com`, margin + 5, yPosition + 19);
            doc.text(`${t.website} www.lmbi-immigration.com`, margin + 80, yPosition + 19);
            
            yPosition += 28;
            
            // Footer note
            checkPageBreak(10);
            doc.setFontSize(7);
            doc.setTextColor(100, 100, 100);
            doc.setFont('helvetica', 'italic');
            doc.text(t.footer, pageWidth / 2, yPosition, { align: 'center', maxWidth: contentWidth - 20 });
            
            // ===== SAVE PDF =====
            const typeNames = {
                es: {
                    'adult-outside': 'Adulto_Fuera_Canada',
                    'adult-inside': 'Adulto_Dentro_Canada',
                    'child': 'Menor_Edad'
                },
                en: {
                    'adult-outside': 'Adult_Outside_Canada',
                    'adult-inside': 'Adult_Inside_Canada',
                    'child': 'Child_Minor'
                },
                fr: {
                    'adult-outside': 'Adulte_Hors_Canada',
                    'adult-inside': 'Adulte_Au_Canada',
                    'child': 'Enfant_Mineur'
                }
            };
            
            const langCodes = {
                es: 'ES',
                en: 'EN',
                fr: 'FR'
            };
            
            const fileName = `LMBI_Checklist_${typeNames[lang][applicationType]}_${langCodes[lang]}_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }
        
        // Print Checklist (from Step 2) - Still uses print dialog
        function printChecklist() {
            const docs = documentRequirements[appState.applicationType];
            if (!docs || docs.length === 0) {
                alert(t('selectTypeFirst'));
                return;
            }
            
            generateAndPrintChecklist();
        }
        
        // Generate and Print Checklist (shared function)
        function generateAndPrintChecklist() {
            const docs = documentRequirements[appState.applicationType];
            if (!docs || docs.length === 0) {
                alert(t('selectTypeFirst'));
                return;
            }
            
            const today = new Date().toLocaleDateString('es-ES', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            let checklistHTML = `
                <div style="font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: white;">
                    <div style="text-align: center; margin-bottom: 3rem; border-bottom: 4px solid #20B2AA; padding-bottom: 2rem;">
                        <h1 style="font-family: 'Montserrat', sans-serif; color: #20B2AA; margin-bottom: 0.5rem; font-size: 2.5rem; font-weight: 900; text-transform: uppercase; letter-spacing: 2px;">üçÅ LMBI IMMIGRATION</h1>
                        <h2 style="color: #333; margin: 0.5rem 0; font-size: 1.8rem; font-weight: 700;">Checklist de Documentos Requeridos</h2>
                        <p style="color: #666; margin-top: 1rem; font-size: 1.1rem; font-weight: 500;">Visa de Turismo Canadiense</p>
                        <p style="color: #888; font-size: 0.95rem; margin-top: 0.5rem;">Fecha de impresi√≥n: ${today}</p>
                    </div>
                    
                    <div style="background: #FFF8E1; padding: 1.5rem; border-left: 5px solid #FFB74D; margin-bottom: 3rem; border-radius: 4px;">
                        <p style="margin: 0; color: #E65100; font-size: 1.1rem; font-weight: 600;">
                            <strong>Tipo de Solicitud:</strong> ${getApplicationTypeName()}
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 3rem; background: #E3F2FD; padding: 1.5rem; border-radius: 8px; border-left: 5px solid #2196F3;">
                        <h3 style="color: #1565C0; margin-top: 0; margin-bottom: 1rem; font-size: 1.3rem;">
                            üìã Instrucciones Importantes
                        </h3>
                        <ul style="line-height: 2; color: #333; margin: 0; padding-left: 1.5rem;">
                            <li style="margin-bottom: 0.8rem;"><strong>Idioma:</strong> Todos los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos por un traductor certificado.</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Formato:</strong> Los documentos deben estar en formato PDF con un tama√±o m√°ximo de 3.8 MB por archivo.</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Fotograf√≠a:</strong> Puede estar en formato PDF o JPG/JPEG.</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Originales:</strong> Tenga los documentos originales disponibles para verificaci√≥n.</li>
                            <li><strong>Marque cada documento:</strong> Use las casillas ‚òë para marcar cuando tenga cada documento listo y escaneado.</li>
                        </ul>
                    </div>
            `;
            
            // Agrupar documentos por categor√≠a
            const obligatorios = docs.filter(d => d.badge === 'Obligatorio');
            const opcionales = docs.filter(d => d.badge === 'Opcional');
            const siAplica = docs.filter(d => d.badge === 'Si Aplica');
            
            // Documentos Obligatorios
            if (obligatorios.length > 0) {
                checklistHTML += `
                    <div style="margin-bottom: 3rem; page-break-inside: avoid;">
                        <div style="background: linear-gradient(135deg, #20B2AA, #5FDED6); color: white; padding: 1rem 1.5rem; border-radius: 10px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(32,178,170,0.3);">
                            <h3 style="margin: 0; font-size: 1.4rem; font-weight: 700;">
                                ‚úÖ Documentos Obligatorios (${obligatorios.length})
                            </h3>
                            <p style="margin: 0.5rem 0 0 0; font-size: 0.95rem; opacity: 0.95;">Estos documentos son requeridos para todos los aplicantes</p>
                        </div>
                `;
                
                obligatorios.forEach((doc, index) => {
                    checklistHTML += `
                        <div style="margin-bottom: 2rem; padding: 1.5rem; border: 3px solid #20B2AA; border-radius: 10px; background: white; page-break-inside: avoid; box-shadow: 0 2px 6px rgba(0,0,0,0.08);">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="width: 40px; vertical-align: top; padding-right: 15px;">
                                        <div style="width: 28px; height: 28px; border: 3px solid #20B2AA; border-radius: 4px; background: white;"></div>
                                    </td>
                                    <td style="vertical-align: top;">
                                        <h4 style="margin: 0 0 1rem 0; color: #20B2AA; font-size: 1.2rem; font-weight: 700;">
                                            ${index + 1}. ${doc.title}
                                        </h4>
                                        <div style="background: #F5F5F5; padding: 1rem; border-radius: 6px; border-left: 4px solid #20B2AA;">
                                            <p style="margin: 0; color: #333; font-size: 0.95rem; line-height: 1.8;">
                                                ${doc.description}
                                            </p>
                                        </div>
                                        <div style="margin-top: 1rem; padding: 0.8rem; background: #E6FFFA; border-radius: 6px;">
                                            <p style="margin: 0; font-size: 0.85rem; color: #178F87;">
                                                <strong>Formato:</strong> PDF (m√°x. 3.8 MB)
                                                ${doc.id === 'photo' ? ' | JPG/JPEG tambi√©n aceptado' : ''}
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    `;
                });
                
                checklistHTML += `</div>`;
            }
            
            // Documentos Si Aplica
            if (siAplica.length > 0) {
                checklistHTML += `
                    <div style="margin-bottom: 3rem; page-break-inside: avoid;">
                        <div style="background: linear-gradient(135deg, #F59E0B, #FCD34D); color: white; padding: 1rem 1.5rem; border-radius: 10px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(245,158,11,0.3);">
                            <h3 style="margin: 0; font-size: 1.4rem; font-weight: 700;">
                                ‚ö†Ô∏è Documentos Condicionales (${siAplica.length})
                            </h3>
                            <p style="margin: 0.5rem 0 0 0; font-size: 0.95rem; opacity: 0.95;">Solo si aplica a su situaci√≥n espec√≠fica</p>
                        </div>
                `;
                
                siAplica.forEach((doc, index) => {
                    checklistHTML += `
                        <div style="margin-bottom: 2rem; padding: 1.5rem; border: 3px solid #F59E0B; border-radius: 10px; background: white; page-break-inside: avoid; box-shadow: 0 2px 6px rgba(0,0,0,0.08);">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="width: 40px; vertical-align: top; padding-right: 15px;">
                                        <div style="width: 28px; height: 28px; border: 3px solid #F59E0B; border-radius: 4px; background: white;"></div>
                                    </td>
                                    <td style="vertical-align: top;">
                                        <h4 style="margin: 0 0 1rem 0; color: #F59E0B; font-size: 1.2rem; font-weight: 700;">
                                            ${index + 1}. ${doc.title}
                                        </h4>
                                        <div style="background: #F5F5F5; padding: 1rem; border-radius: 6px; border-left: 4px solid #F59E0B;">
                                            <p style="margin: 0; color: #333; font-size: 0.95rem; line-height: 1.8;">
                                                ${doc.description}
                                            </p>
                                        </div>
                                        <div style="margin-top: 1rem; padding: 0.8rem; background: #FFF8E1; border-radius: 6px;">
                                            <p style="margin: 0; font-size: 0.85rem; color: #E65100;">
                                                <strong>Formato:</strong> PDF (m√°x. 3.8 MB)
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    `;
                });
                
                checklistHTML += `</div>`;
            }
            
            // Documentos Opcionales
            if (opcionales.length > 0) {
                checklistHTML += `
                    <div style="margin-bottom: 3rem; page-break-inside: avoid;">
                        <div style="background: linear-gradient(135deg, #94A3B8, #CBD5E1); color: white; padding: 1rem 1.5rem; border-radius: 10px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(148,163,184,0.3);">
                            <h3 style="margin: 0; font-size: 1.4rem; font-weight: 700;">
                                ‚ÑπÔ∏è Documentos Opcionales (${opcionales.length})
                            </h3>
                            <p style="margin: 0.5rem 0 0 0; font-size: 0.95rem; opacity: 0.95;">Recomendados para fortalecer su solicitud</p>
                        </div>
                `;
                
                opcionales.forEach((doc, index) => {
                    checklistHTML += `
                        <div style="margin-bottom: 2rem; padding: 1.5rem; border: 3px solid #94A3B8; border-radius: 10px; background: white; page-break-inside: avoid; box-shadow: 0 2px 6px rgba(0,0,0,0.08);">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="width: 40px; vertical-align: top; padding-right: 15px;">
                                        <div style="width: 28px; height: 28px; border: 3px solid #94A3B8; border-radius: 4px; background: white;"></div>
                                    </td>
                                    <td style="vertical-align: top;">
                                        <h4 style="margin: 0 0 1rem 0; color: #64748B; font-size: 1.2rem; font-weight: 700;">
                                            ${index + 1}. ${doc.title}
                                        </h4>
                                        <div style="background: #F5F5F5; padding: 1rem; border-radius: 6px; border-left: 4px solid #94A3B8;">
                                            <p style="margin: 0; color: #333; font-size: 0.95rem; line-height: 1.8;">
                                                ${doc.description}
                                            </p>
                                        </div>
                                        <div style="margin-top: 1rem; padding: 0.8rem; background: #F8FAFC; border-radius: 6px;">
                                            <p style="margin: 0; font-size: 0.85rem; color: #475569;">
                                                <strong>Formato:</strong> PDF (m√°x. 3.8 MB)
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    `;
                });
                
                checklistHTML += `</div>`;
            }
            
            // Resumen y notas finales
            checklistHTML += `
                    <div style="margin-top: 4rem; padding: 2rem; background: #E8F5E9; border: 3px solid #4CAF50; border-radius: 10px; page-break-inside: avoid;">
                        <h3 style="color: #2E7D32; margin-top: 0; font-size: 1.3rem; font-weight: 700;">üìä Resumen de Documentos</h3>
                        <table style="width: 100%; margin: 1rem 0;">
                            <tr>
                                <td style="padding: 0.5rem 0; font-weight: 600;">‚úÖ Obligatorios:</td>
                                <td style="padding: 0.5rem 0; text-align: right; font-weight: 700; font-size: 1.1rem; color: #20B2AA;">${obligatorios.length}</td>
                            </tr>
                            ${siAplica.length > 0 ? `
                            <tr>
                                <td style="padding: 0.5rem 0; font-weight: 600;">‚ö†Ô∏è Si Aplica:</td>
                                <td style="padding: 0.5rem 0; text-align: right; font-weight: 700; font-size: 1.1rem; color: #F59E0B;">${siAplica.length}</td>
                            </tr>
                            ` : ''}
                            ${opcionales.length > 0 ? `
                            <tr>
                                <td style="padding: 0.5rem 0; font-weight: 600;">‚ÑπÔ∏è Opcionales:</td>
                                <td style="padding: 0.5rem 0; text-align: right; font-weight: 700; font-size: 1.1rem; color: #94A3B8;">${opcionales.length}</td>
                            </tr>
                            ` : ''}
                            <tr style="border-top: 2px solid #4CAF50;">
                                <td style="padding: 0.8rem 0; font-weight: 700; font-size: 1.1rem;">TOTAL:</td>
                                <td style="padding: 0.8rem 0; text-align: right; font-weight: 900; font-size: 1.3rem; color: #2E7D32;">${docs.length}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, #E3F2FD, #BBDEFB); border-radius: 10px; border: 2px solid #2196F3;">
                        <h3 style="color: #1565C0; margin-top: 0; font-size: 1.3rem;">üìû Informaci√≥n de Contacto</h3>
                        <p style="margin: 0.8rem 0; color: #333; font-size: 1.05rem; font-weight: 600;">LMBI Immigration</p>
                        <p style="margin: 0.5rem 0; color: #666;">üìß Email: info@lmbi-immigration.com</p>
                        <p style="margin: 0.5rem 0; color: #666;">üåê Web: www.lmbi-immigration.com</p>
                        <p style="margin: 0.5rem 0; color: #666;">üì± WhatsApp: +1 (XXX) XXX-XXXX</p>
                        <hr style="margin: 1.5rem 0; border: none; border-top: 2px solid #2196F3; opacity: 0.3;">
                        <p style="margin: 1rem 0 0 0; color: #666; font-size: 0.9rem; font-style: italic; line-height: 1.6;">
                            <strong>Nota importante:</strong> Este checklist es una gu√≠a de referencia basada en los requisitos actuales de IRCC. 
                            Por favor, verifique siempre los requisitos m√°s recientes en el sitio oficial de Immigration, Refugees and Citizenship Canada (IRCC).
                        </p>
                        <p style="margin: 1rem 0 0 0; color: #888; font-size: 0.85rem; text-align: center;">
                            Documento generado el ${today}
                        </p>
                    </div>
                </div>
            `;
            
            // Insertar en el div oculto y imprimir
            document.getElementById('printableChecklist').innerHTML = checklistHTML;
            window.print();
        }
        
        function getApplicationTypeName(type, lang = 'es') {
            // If no type provided, use appState
            if (!type) {
                type = appState.applicationType;
            }
            
            const names = {
                es: {
                    'adult-outside': 'Adulto fuera de Canad√°',
                    'adult-inside': 'Adulto dentro de Canad√°',
                    'child': 'Ni√±o(a) menor de edad'
                },
                en: {
                    'adult-outside': 'Adult outside Canada',
                    'adult-inside': 'Adult inside Canada',
                    'child': 'Child/Minor'
                },
                fr: {
                    'adult-outside': 'Adulte hors du Canada',
                    'adult-inside': 'Adulte au Canada',
                    'child': 'Enfant mineur'
                }
            };
            return names[lang][type] || type || 'No seleccionado';
        }
        
        // Get Translated Document (title and description)
        function getTranslatedDocument(document, lang) {
            // Get translation from database
            const translation = documentTranslations[document.id];
            
            if (translation && translation[lang]) {
                return {
                    title: translation[lang].title,
                    description: translation[lang].description
                };
            }
            
            // Fallback to Spanish if translation not found
            return {
                title: document.title,
                description: document.description
            };
        }

        // Submit Application
        async function submitApplication() {
            // Validate confirmation form
            const confirmForm = document.getElementById('finalConfirmationForm');
            if (!confirmForm.checkValidity()) {
                confirmForm.reportValidity();
                return;
            }
            
            // Check all checkboxes
            const confirmDocuments = document.getElementById('confirmDocuments');
            const confirmInfo = document.getElementById('confirmInfo');
            const confirmReview = document.getElementById('confirmReview');
            
            if (!confirmDocuments.checked || !confirmInfo.checked || !confirmReview.checked) {
                const lang = appState.language || 'es';
                const messages = {
                    es: 'Por favor, marque todas las casillas de confirmaci√≥n antes de enviar su solicitud.',
                    en: 'Please check all confirmation boxes before submitting your application.',
                    fr: 'Veuillez cocher toutes les cases de confirmation avant de soumettre votre demande.'
                };
                alert(messages[lang]);
                return;
            }
            
            const submitBtn = document.getElementById('submitApplication');
            const loadingEl = document.getElementById('loadingSubmit');
            
            submitBtn.disabled = true;
            loadingEl.classList.add('active');
            
            try {
                const lang = appState.language || 'es';
                const loadingMessages = {
                    es: 'Generando paquete de documentos...',
                    en: 'Generating document package...',
                    fr: 'G√©n√©ration du paquet de documents...'
                };
                
                // Show loading message
                const loadingMsg = document.createElement('div');
                loadingMsg.id = 'packageLoading';
                loadingMsg.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem 3rem; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); z-index: 10000; text-align: center;';
                loadingMsg.innerHTML = `
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
                    <h3 style="margin: 0 0 0.5rem 0; color: #20B2AA;">${loadingMessages[lang]}</h3>
                    <div class="spinner" style="margin: 1rem auto; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #20B2AA; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                `;
                document.body.appendChild(loadingMsg);
                
                // Generate reference number
                const referenceNumber = generateReferenceNumber();
                
                // Step 1: Generate filled application PDF
                const applicationPDF = await generateFilledApplicationPDF(referenceNumber, lang);
                
                // Step 2: Collect all uploaded documents
                const uploadedDocs = [];
                for (const [docId, file] of Object.entries(appState.uploadedFiles)) {
                    if (file !== 'N/A' && file instanceof File) {
                        uploadedDocs.push(file);
                    }
                }
                
                // Step 3: Create ZIP file
                const zip = new JSZip();
                
                // Add filled application PDF to ZIP
                zip.file('Application_Form.pdf', applicationPDF);
                
                // Add all uploaded documents to ZIP
                for (const file of uploadedDocs) {
                    zip.file(file.name, file);
                }
                
                // Generate ZIP blob
                const zipBlob = await zip.generateAsync({
                    type: 'blob',
                    compression: 'DEFLATE',
                    compressionOptions: { level: 6 }
                });
                
                // Remove loading
                document.body.removeChild(loadingMsg);
                
                // Step 4: Show download and email instructions
                showSubmissionInstructions(zipBlob, referenceNumber, uploadedDocs.length, lang);
                
            } catch (error) {
                console.error('Error generating package:', error);
                const lang = appState.language || 'es';
                const errorMessages = {
                    es: '‚ùå Error al generar el paquete de documentos.\n\nPor favor, intente nuevamente o contacte a soporte:\nlmbi.immigration@gmail.com',
                    en: '‚ùå Error generating document package.\n\nPlease try again or contact support:\nlmbi.immigration@gmail.com',
                    fr: '‚ùå Erreur lors de la g√©n√©ration du paquet de documents.\n\nVeuillez r√©essayer ou contacter le support:\nlmbi.immigration@gmail.com'
                };
                alert(errorMessages[lang]);
            } finally {
                submitBtn.disabled = false;
                loadingEl.classList.remove('active');
            }
        }
        
        // Generate Filled Application PDF
        async function generateFilledApplicationPDF(referenceNumber, lang = 'es') {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const margin = 20;
            let yPosition = margin;
            
            const translations = {
                es: {
                    title: 'Formulario de Solicitud de Visa de Turismo',
                    subtitle: 'Canadian Tourist Visa Application Form',
                    refNumber: 'N√∫mero de Referencia:',
                    submissionDate: 'Fecha de Env√≠o:',
                    applicationType: 'Tipo de Solicitud:',
                    personalInfo: 'Informaci√≥n Personal',
                    travelPurpose: 'Motivo del Viaje'
                },
                en: {
                    title: 'Tourist Visa Application Form',
                    subtitle: 'Canadian Tourist Visa Application Form',
                    refNumber: 'Reference Number:',
                    submissionDate: 'Submission Date:',
                    applicationType: 'Application Type:',
                    personalInfo: 'Personal Information',
                    travelPurpose: 'Travel Purpose'
                },
                fr: {
                    title: 'Formulaire de Demande de Visa de Tourisme',
                    subtitle: 'Formulaire de Demande de Visa de Tourisme Canadien',
                    refNumber: 'Num√©ro de R√©f√©rence:',
                    submissionDate: 'Date de Soumission:',
                    applicationType: 'Type de Demande:',
                    personalInfo: 'Informations Personnelles',
                    travelPurpose: 'Motif du Voyage'
                }
            };
            
            const t = translations[lang];
            
            // Helper function for page breaks
            function checkPageBreak(neededSpace) {
                if (yPosition + neededSpace > pageHeight - margin) {
                    doc.addPage();
                    yPosition = margin;
                    return true;
                }
                return false;
            }
            
            // Header
            doc.setFillColor(32, 178, 170);
            doc.rect(0, 0, pageWidth, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(20);
            doc.setFont('helvetica', 'bold');
            doc.text('LMBI IMMIGRATION', pageWidth / 2, 15, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text(t.title, pageWidth / 2, 28, { align: 'center' });
            
            yPosition = 50;
            
            // Reference and Date
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text(`${t.refNumber} ${referenceNumber}`, margin, yPosition);
            yPosition += 6;
            
            const today = new Date().toLocaleDateString(lang === 'es' ? 'es-ES' : lang === 'fr' ? 'fr-FR' : 'en-US', { 
                year: 'numeric', month: 'long', day: 'numeric' 
            });
            doc.text(`${t.submissionDate} ${today}`, margin, yPosition);
            yPosition += 10;
            
            // Application Type
            doc.setFillColor(255, 248, 225);
            doc.rect(margin, yPosition, pageWidth - (margin * 2), 10, 'F');
            doc.setTextColor(230, 81, 0);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text(`${t.applicationType} ${getApplicationTypeName(appState.applicationType, lang)}`, margin + 5, yPosition + 7);
            yPosition += 18;
            
            // Personal Information Section
            doc.setTextColor(32, 178, 170);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text(t.personalInfo, margin, yPosition);
            yPosition += 10;
            
            // Add all form data - COMPLETE VERSION
            doc.setTextColor(51, 51, 51);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            
            const personalInfo = appState.personalInfo || {};
            
            // Helper to add field
            function addField(label, value) {
                checkPageBreak(6);
                if (label) {
                    doc.setFont('helvetica', 'bold');
                    doc.text(label, margin, yPosition);
                    doc.setFont('helvetica', 'normal');
                    const displayValue = value || 'N/A';
                    doc.text(String(displayValue), margin + 65, yPosition, { maxWidth: pageWidth - margin - 70 });
                }
                yPosition += 5;
            }
            
            // Add all available personal info fields
            addField('First Name:', personalInfo.firstName);
            addField('Last Name:', personalInfo.lastName);
            addField('Application Date:', personalInfo.applicationDate);
            addField('Birth Date:', personalInfo.birthDate);
            addField('Birth Place:', personalInfo.birthPlace);
            addField('Citizenship:', personalInfo.citizenship);
            addField('Passport Number:', personalInfo.passportNumber);
            
            yPosition += 3;
            doc.setFont('helvetica', 'bold');
            doc.text('Marital Status', margin, yPosition);
            yPosition += 5;
            doc.setFont('helvetica', 'normal');
            
            addField('Current Status:', personalInfo.maritalStatus);
            addField('Current Partner:', personalInfo.currentPartnerName);
            addField('Relationship Start:', personalInfo.relationshipStartDate);
            addField('Previous Relationship:', personalInfo.previousRelationship);
            addField('Previous Type:', personalInfo.previousRelationType);
            addField('Previous Partner:', personalInfo.previousPartnerName);
            
            yPosition += 3;
            doc.setFont('helvetica', 'bold');
            doc.text('Contact Information', margin, yPosition);
            yPosition += 5;
            doc.setFont('helvetica', 'normal');
            
            addField('Email:', personalInfo.email);
            addField('Phone:', personalInfo.phone);
            addField('Address:', personalInfo.address);
            addField('City:', personalInfo.city);
            addField('Province:', personalInfo.province);
            addField('Postal Code:', personalInfo.postalCode);
            addField('Country:', personalInfo.country);
            
            // Travel Purpose
            checkPageBreak(15);
            yPosition += 5;
            doc.setTextColor(32, 178, 170);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text(t.travelPurpose, margin, yPosition);
            yPosition += 8;
            
            doc.setTextColor(51, 51, 51);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            
            if (appState.travelPurpose?.purpose) {
                const purposeText = doc.splitTextToSize(appState.travelPurpose.purpose, pageWidth - (margin * 2));
                doc.text(purposeText, margin, yPosition);
                yPosition += purposeText.length * 5;
            }
            
            // Footer
            yPosition = pageHeight - 20;
            doc.setTextColor(150, 150, 150);
            doc.setFontSize(8);
            doc.text('LMBI Immigration - lmbi.immigration@gmail.com', pageWidth / 2, yPosition, { align: 'center' });
            
            return doc.output('blob');
        }
        
        // Show Submission Instructions with Download and Email Info
        function showSubmissionInstructions(zipBlob, referenceNumber, docsCount, lang = 'es') {
            const translations = {
                es: {
                    title: '¬°Paquete Generado Exitosamente!',
                    subtitle: 'Su solicitud est√° lista para enviar',
                    refNumber: 'N√∫mero de Referencia',
                    docsIncluded: 'Documentos Incluidos',
                    applicationForm: 'Formulario de solicitud completado (PDF)',
                    uploadedDocs: 'documentos subidos',
                    downloadTitle: 'Paso 1: Descargar el Paquete',
                    downloadButton: 'Descargar ZIP',
                    emailTitle: 'Paso 2: Enviar por Email',
                    emailTo: 'Enviar a:',
                    emailSubject: 'Asunto del Email:',
                    subjectText: 'Immigration Documents for Tourist Visa',
                    emailBody: 'Cuerpo del Email:',
                    bodyText: `Estimados,

Adjunto encontrar√°n mi solicitud completa de visa de turismo canadiense.

El archivo ZIP contiene:
- Formulario de solicitud completado
- Todos los documentos requeridos

N√∫mero de Referencia: ${referenceNumber}

Quedo atento a cualquier informaci√≥n adicional que requieran.

Saludos cordiales`,
                    emailInstructions: 'üìß <strong>Instrucciones:</strong><br>1. Descargue el archivo ZIP usando el bot√≥n arriba<br>2. Abra su cliente de email (Gmail, Outlook, etc.)<br>3. Cree un nuevo email a <strong>lmbi.immigration@gmail.com</strong><br>4. Copie y pegue el asunto y el cuerpo del email<br>5. Adjunte el archivo ZIP descargado<br>6. Env√≠e el email',
                    closeButton: 'Cerrar'
                },
                en: {
                    title: 'Package Generated Successfully!',
                    subtitle: 'Your application is ready to send',
                    refNumber: 'Reference Number',
                    docsIncluded: 'Documents Included',
                    applicationForm: 'Completed application form (PDF)',
                    uploadedDocs: 'uploaded documents',
                    downloadTitle: 'Step 1: Download Package',
                    downloadButton: 'Download ZIP',
                    emailTitle: 'Step 2: Send via Email',
                    emailTo: 'Send to:',
                    emailSubject: 'Email Subject:',
                    subjectText: 'Immigration Documents for Tourist Visa',
                    emailBody: 'Email Body:',
                    bodyText: `Dear Sir/Madam,

Please find attached my complete Canadian tourist visa application.

The ZIP file contains:
- Completed application form
- All required documents

Reference Number: ${referenceNumber}

I remain available for any additional information you may require.

Best regards`,
                    emailInstructions: 'üìß <strong>Instructions:</strong><br>1. Download the ZIP file using the button above<br>2. Open your email client (Gmail, Outlook, etc.)<br>3. Create a new email to <strong>lmbi.immigration@gmail.com</strong><br>4. Copy and paste the subject and body text<br>5. Attach the downloaded ZIP file<br>6. Send the email',
                    closeButton: 'Close'
                },
                fr: {
                    title: 'Paquet G√©n√©r√© avec Succ√®s!',
                    subtitle: 'Votre demande est pr√™te √† √™tre envoy√©e',
                    refNumber: 'Num√©ro de R√©f√©rence',
                    docsIncluded: 'Documents Inclus',
                    applicationForm: 'Formulaire de demande compl√©t√© (PDF)',
                    uploadedDocs: 'documents t√©l√©charg√©s',
                    downloadTitle: '√âtape 1: T√©l√©charger le Paquet',
                    downloadButton: 'T√©l√©charger ZIP',
                    emailTitle: '√âtape 2: Envoyer par Email',
                    emailTo: 'Envoyer √†:',
                    emailSubject: 'Objet de l\'Email:',
                    subjectText: 'Immigration Documents for Tourist Visa',
                    emailBody: 'Corps de l\'Email:',
                    bodyText: `Madame, Monsieur,

Veuillez trouver ci-joint ma demande compl√®te de visa de tourisme canadien.

Le fichier ZIP contient:
- Formulaire de demande compl√©t√©
- Tous les documents requis

Num√©ro de R√©f√©rence: ${referenceNumber}

Je reste √† votre disposition pour toute information compl√©mentaire.

Cordialement`,
                    emailInstructions: 'üìß <strong>Instructions:</strong><br>1. T√©l√©chargez le fichier ZIP avec le bouton ci-dessus<br>2. Ouvrez votre client email (Gmail, Outlook, etc.)<br>3. Cr√©ez un nouvel email √† <strong>lmbi.immigration@gmail.com</strong><br>4. Copiez et collez l\'objet et le corps du texte<br>5. Joignez le fichier ZIP t√©l√©charg√©<br>6. Envoyez l\'email',
                    closeButton: 'Fermer'
                }
            };
            
            const t = translations[lang];
            
            // Create modal
            const modal = document.createElement('div');
            modal.id = 'submissionModal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 2rem;';
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 16px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 2rem; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">‚úÖ</div>
                        <h2 style="color: #20B2AA; margin: 0 0 0.5rem 0;">${t.title}</h2>
                        <p style="color: #666; margin: 0;">${t.subtitle}</p>
                    </div>
                    
                    <div style="background: #f0f9ff; border-left: 4px solid #20B2AA; padding: 1rem; margin-bottom: 1.5rem;">
                        <p style="margin: 0 0 0.5rem 0;"><strong>${t.refNumber}:</strong> ${referenceNumber}</p>
                        <p style="margin: 0;"><strong>${t.docsIncluded}:</strong> ${t.applicationForm} + ${docsCount} ${t.uploadedDocs}</p>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <h3 style="color: #20B2AA; margin: 0 0 1rem 0;">üì• ${t.downloadTitle}</h3>
                        <button id="downloadZipBtn" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, #20B2AA, #17a2b8); color: white; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: transform 0.2s;">
                            ${t.downloadButton}
                        </button>
                        
                        <!-- Windows Security Warning Help -->
                        <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 0.75rem; margin-top: 1rem; border-radius: 4px; font-size: 0.85rem;">
                            <strong>‚ö†Ô∏è Si Windows bloquea el archivo:</strong><br>
                            1. Clic derecho en el archivo descargado<br>
                            2. Seleccione "Propiedades"<br>
                            3. Marque "Desbloquear" ‚Üí "Aplicar" ‚Üí "OK"<br>
                            4. Ahora puede abrir el archivo ZIP
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <h3 style="color: #20B2AA; margin: 0 0 1rem 0;">üìß ${t.emailTitle}</h3>
                        
                        <div style="background: #fff8e1; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <p style="margin: 0 0 0.5rem 0;"><strong>${t.emailTo}</strong></p>
                            <input type="text" value="lmbi.immigration@gmail.com" readonly style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; background: white;">
                        </div>
                        
                        <div style="background: #fff8e1; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <p style="margin: 0 0 0.5rem 0;"><strong>${t.emailSubject}</strong></p>
                            <input type="text" value="${t.subjectText}" readonly style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; background: white;">
                        </div>
                        
                        <div style="background: #fff8e1; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <p style="margin: 0 0 0.5rem 0;"><strong>${t.emailBody}</strong></p>
                            <textarea readonly style="width: 100%; height: 200px; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; resize: vertical; background: white;">${t.bodyText}</textarea>
                        </div>
                        
                        <div style="background: #e3f2fd; padding: 1rem; border-radius: 8px; font-size: 0.9rem; line-height: 1.6;">
                            ${t.emailInstructions}
                        </div>
                    </div>
                    
                    <button id="closeModalBtn" style="width: 100%; padding: 0.75rem; background: #f5f5f5; color: #666; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; cursor: pointer;">
                        ${t.closeButton}
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Download ZIP button
            document.getElementById('downloadZipBtn').addEventListener('click', () => {
                try {
                    const url = URL.createObjectURL(zipBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `LMBI_Immigration_Application_${referenceNumber}.zip`;
                    
                    // Trigger download
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                    
                    // Show success message
                    const btn = document.getElementById('downloadZipBtn');
                    const originalText = btn.innerHTML;
                    btn.innerHTML = '‚úÖ Descargado';
                    btn.style.background = '#10B981';
                    setTimeout(() => {
                        btn.innerHTML = originalText;
                        btn.style.background = '';
                    }, 2000);
                } catch (error) {
                    console.error('Error downloading ZIP:', error);
                    alert('Error al descargar el archivo. Por favor, intente nuevamente.');
                }
            });
            
            // Close modal button
            document.getElementById('closeModalBtn').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }
        
        // Function to send email with attachments (for future backend implementation)
        async function sendEmailWithAttachments(formData, applicationData) {
            // IMPORTANTE: Esta es una funci√≥n de ejemplo
            // En producci√≥n, debes implementar un backend que maneje esto
            
            // Ejemplo de c√≥mo se ver√≠a la llamada al backend:
            /*
            const response = await fetch('https://tu-backend.com/api/submit-application', {
                method: 'POST',
                body: formData
            });
            
            if (!response.ok) {
                throw new Error('Error al enviar la solicitud');
            }
            
            return await response.json();
            */
            
            // SIMULACI√ìN (remover en producci√≥n)
            console.log('=== SIMULACI√ìN DE ENV√çO ===');
            console.log('Destino: lmbi.immigration@gmail.com');
            console.log('Referencia:', applicationData.referenceNumber);
            console.log('Aplicante:', applicationData.personalInfo.firstName, applicationData.personalInfo.lastName);
            console.log('Email:', applicationData.personalInfo.email);
            console.log('Tipo:', applicationData.applicationType);
            console.log('Documentos adjuntos:', Object.keys(applicationData.uploadedFiles).length);
            console.log('==============================');
            
            // Simular delay de red
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            // NOTA: Para implementaci√≥n real, ver el c√≥digo de ejemplo en los comentarios abajo
            
            /*
            ========================================
            C√ìDIGO DE BACKEND EJEMPLO (Node.js + Express + Nodemailer)
            ========================================
            
            const express = require('express');
            const multer = require('multer');
            const nodemailer = require('nodemailer');
            const app = express();
            
            // Configurar multer para archivos
            const upload = multer({ 
                storage: multer.memoryStorage(),
                limits: { fileSize: 4 * 1024 * 1024 } // 4MB
            });
            
            // Configurar transporte de email
            const transporter = nodemailer.createTransport({
                service: 'gmail',
                auth: {
                    user: 'tu-email@gmail.com',
                    pass: 'tu-app-password' // Usar App Password de Gmail
                }
            });
            
            app.post('/api/submit-application', upload.any(), async (req, res) => {
                try {
                    const applicationData = JSON.parse(req.body.applicationData);
                    const files = req.files;
                    
                    // Preparar attachments
                    const attachments = files.map(file => ({
                        filename: file.originalname,
                        content: file.buffer
                    }));
                    
                    // Crear email HTML
                    const emailHTML = `
                        <h2>Nueva Solicitud de Visa - ${applicationData.referenceNumber}</h2>
                        <h3>Informaci√≥n del Aplicante:</h3>
                        <ul>
                            <li>Nombre: ${applicationData.personalInfo.firstName} ${applicationData.personalInfo.lastName}</li>
                            <li>Email: ${applicationData.personalInfo.email}</li>
                            <li>Tel√©fono: ${applicationData.personalInfo.phone}</li>
                            <li>Tipo: ${applicationData.applicationType}</li>
                        </ul>
                        <h3>Documentos Adjuntos: ${files.length}</h3>
                        <p>Fecha de env√≠o: ${new Date(applicationData.submissionDate).toLocaleString('es-ES')}</p>
                    `;
                    
                    // Enviar email
                    await transporter.sendMail({
                        from: '"LMBI Immigration Portal" <tu-email@gmail.com>',
                        to: 'lmbi.immigration@gmail.com',
                        subject: `Nueva Solicitud de Visa - ${applicationData.referenceNumber}`,
                        html: emailHTML,
                        attachments: attachments
                    });
                    
                    // Enviar confirmaci√≥n al aplicante
                    await transporter.sendMail({
                        from: '"LMBI Immigration" <lmbi.immigration@gmail.com>',
                        to: applicationData.personalInfo.email,
                        subject: 'Confirmaci√≥n de Solicitud - LMBI Immigration',
                        html: `
                            <h2>Su solicitud ha sido recibida</h2>
                            <p>Estimado/a ${applicationData.personalInfo.firstName},</p>
                            <p>Hemos recibido su solicitud de visa con el n√∫mero de referencia: <strong>${applicationData.referenceNumber}</strong></p>
                            <p>Nuestro equipo la revisar√° en 2-3 d√≠as h√°biles.</p>
                            <p>Saludos cordiales,<br>Equipo LMBI Immigration</p>
                        `
                    });
                    
                    res.json({ success: true, reference: applicationData.referenceNumber });
                    
                } catch (error) {
                    console.error(error);
                    res.status(500).json({ success: false, error: error.message });
                }
            });
            
            app.listen(3000, () => console.log('Server running on port 3000'));
            
            ========================================
            FIN DEL C√ìDIGO DE BACKEND EJEMPLO
            ========================================
            */
        }

        // Helper Functions
        function getFieldLabel(key) {
            const labels = {
                firstName: 'Nombre(s)',
                lastName: 'Apellido(s)',
                birthDate: 'Fecha de Nacimiento',
                birthPlace: 'Lugar de Nacimiento',
                citizenship: 'Ciudadan√≠a',
                passportNumber: 'Pasaporte',
                email: 'Email',
                phone: 'Tel√©fono',
                address: 'Direcci√≥n',
                travelDateStart: 'Fecha Viaje (Ida)',
                travelDateEnd: 'Fecha Viaje (Regreso)',
                travelPurpose: 'Prop√≥sito del Viaje'
            };
            return labels[key] || key;
        }

        function getTravelFieldLabel(key) {
            const labels = {
                estimatedBudget: 'Presupuesto Estimado (CAD)',
                accommodationType: 'Tipo de Alojamiento',
                previousVisits: '¬øHa visitado Canad√° antes?',
                previousVisitsInfo: 'Detalles de visitas anteriores'
            };
            return labels[key] || key;
        }

        function getDocumentTitle(docId) {
            const docs = documentRequirements[appState.applicationType];
            const doc = docs.find(d => d.id === docId);
            return doc ? doc.title : docId;
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        function generateReferenceNumber() {
            const timestamp = Date.now().toString().slice(-8);
            const random = Math.random().toString(36).substring(2, 6).toUpperCase();
            return `LMBI-${timestamp}-${random}`;
        }
    </script>
</body>
</html>
