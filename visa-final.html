<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMBI Immigration - Solicitud de Visa Canadiense</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Orbitron:wght@700;900&family=Space+Grotesk:wght@600;700&family=Montserrat:wght@700;800;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colores Aguamarina */
            --aqua-primary: #20B2AA;
            --aqua-dark: #178F87;
            --aqua-light: #5FDED6;
            --aqua-pale: #B2F5EA;
            --aqua-bg: #E6FFFA;
            
            /* Colores Terracota (complementarios) */
            --terracota-primary: #C85A4F;
            --terracota-dark: #A74238;
            --terracota-light: #E8998D;
            --terracota-pale: #F4DDD9;
            --terracota-bg: #FFF8F6;
            
            /* Colores Base */
            --cream: #FAF7F5;
            --warm-gray: #718096;
            --dark-text: #2D3748;
            
            /* Colores por Paso - Sistema de colores vibrantes */
            /* Paso 1: Mostaza/Dorado */
            --step1-primary: #F59E0B;
            --step1-light: #FCD34D;
            --step1-pale: #FEF3C7;
            --step1-bg: #FFFBEB;
            
            /* Paso 2: Azul */
            --step2-primary: #3B82F6;
            --step2-light: #60A5FA;
            --step2-pale: #DBEAFE;
            --step2-bg: #EFF6FF;
            
            /* Paso 3: Verde Esmeralda */
            --step3-primary: #10B981;
            --step3-light: #34D399;
            --step3-pale: #D1FAE5;
            --step3-bg: #ECFDF5;
            
            /* Paso 4: Violeta */
            --step4-primary: #8B5CF6;
            --step4-light: #A78BFA;
            --step4-pale: #EDE9FE;
            --step4-bg: #F5F3FF;
            
            /* Paso 5: Rosa */
            --step5-primary: #EC4899;
            --step5-light: #F472B6;
            --step5-pale: #FCE7F3;
            --step5-bg: #FDF2F8;
            
            /* Paso 6: Verde √âxito */
            --step6-primary: #059669;
            --step6-light: #10B981;
            --step6-pale: #D1FAE5;
            --step6-bg: #ECFDF5;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--aqua-bg) 0%, var(--cream) 100%);
            min-height: 100vh;
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Header con info del aplicante */
        header {
            background: linear-gradient(120deg, var(--aqua-dark) 0%, var(--aqua-primary) 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(32, 178, 170, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-badge {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--aqua-primary) 0%, var(--aqua-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.4);
            position: relative;
            animation: logoRotate 20s linear infinite, logoPulse 2s ease-in-out infinite;
        }

        @keyframes logoRotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes logoPulse {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(32, 178, 170, 0.4);
            }
            50% {
                box-shadow: 0 6px 25px rgba(32, 178, 170, 0.6);
            }
        }

        .logo-badge::before {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            border: 2px solid var(--aqua-pale);
            border-radius: 50%;
            animation: ripple 2s ease-out infinite;
        }

        @keyframes ripple {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        .logo-badge-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 900;
            color: white;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            animation: none; /* No rotar el texto */
            transform: rotate(0deg);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-text h1 {
            font-family: 'Playfair Display', 'Georgia', serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
            margin-bottom: 0.15rem;
            letter-spacing: 0.5px;
            color: white;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .logo-text p {
            font-size: 0.8rem;
            font-weight: 500;
            margin: 0;
            color: rgba(255, 255, 255, 0.95);
            opacity: 1;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Info del aplicante en header */
        .applicant-info {
            display: none;
            align-items: center;
            gap: 1.5rem;
            font-size: 0.85rem;
            flex-wrap: wrap;
        }

        .applicant-info.show {
            display: flex;
        }

        .applicant-info-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        /* Barra de progreso global */
        .global-progress {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .global-progress-inner {
            max-width: 1400px;
            margin: 0 auto;
        }

        .progress-bar-container {
            background: linear-gradient(90deg, 
                #fee2e2 0%, 
                #fef3c7 50%, 
                #d1fae5 100%
            );
            height: 24px;
            border-radius: 20px;
            overflow: visible;
            margin-bottom: 0.5rem;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                #dc2626 0%,
                #f59e0b 50%,
                #10b981 100%
            );
            border-radius: 20px;
            transition: width 0.5s ease;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .progress-bar-fill::before {
            content: '‚úàÔ∏è';
            position: absolute;
            right: -12px;
            top: 50%;
            transform: translateY(-50%) rotate(-45deg);
            font-size: 1.5rem;
            animation: planeFly 1.5s ease-in-out infinite;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        @keyframes planeFly {
            0%, 100% {
                transform: translateY(-50%) rotate(-45deg) translateY(0px);
            }
            50% {
                transform: translateY(-50%) rotate(-45deg) translateY(-3px);
            }
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
            border-radius: 20px;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--dark-text);
            text-align: center;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .progress-text::before {
            content: 'üìç';
        }

        /* Navegaci√≥n r√°pida */
        .quick-nav {
            background: white;
            padding: 0;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 1.5rem;
            display: none;
            overflow-x: auto;
        }

        .quick-nav.show {
            display: block;
        }

        .quick-nav-steps {
            display: flex;
            gap: 0;
            flex-wrap: nowrap;
            min-width: min-content;
        }

        .quick-nav-btn {
            padding: 0.9rem 1.5rem;
            background: #f8f9fa;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: var(--dark-text);
            font-family: 'Poppins', sans-serif;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .quick-nav-btn:hover {
            background: #e9ecef;
        }

        .quick-nav-btn.active {
            background: white;
            color: var(--dark-text);
        }

        /* Colores de pesta√±as por paso */
        .quick-nav-btn[data-step="1"].active {
            border-bottom-color: var(--step1-primary);
            background: var(--step1-bg);
            color: var(--step1-primary);
        }
        .quick-nav-btn[data-step="1"]:not(.active):hover {
            background: var(--step1-pale);
        }

        .quick-nav-btn[data-step="2"].active {
            border-bottom-color: var(--step2-primary);
            background: var(--step2-bg);
            color: var(--step2-primary);
        }
        .quick-nav-btn[data-step="2"]:not(.active):hover {
            background: var(--step2-pale);
        }

        .quick-nav-btn[data-step="3"].active {
            border-bottom-color: var(--step3-primary);
            background: var(--step3-bg);
            color: var(--step3-primary);
        }
        .quick-nav-btn[data-step="3"]:not(.active):hover {
            background: var(--step3-pale);
        }

        .quick-nav-btn[data-step="4"].active {
            border-bottom-color: var(--step4-primary);
            background: var(--step4-bg);
            color: var(--step4-primary);
        }
        .quick-nav-btn[data-step="4"]:not(.active):hover {
            background: var(--step4-pale);
        }

        .quick-nav-btn[data-step="5"].active {
            border-bottom-color: var(--step5-primary);
            background: var(--step5-bg);
            color: var(--step5-primary);
        }
        .quick-nav-btn[data-step="5"]:not(.active):hover {
            background: var(--step5-pale);
        }

        .quick-nav-btn[data-step="6"].active {
            border-bottom-color: var(--step6-primary);
            background: var(--step6-bg);
            color: var(--step6-primary);
        }
        .quick-nav-btn[data-step="6"]:not(.active):hover {
            background: var(--step6-pale);
        }

        .home-btn {
            padding: 0.6rem 1.2rem;
            background: white;
            border: 2px solid var(--aqua-primary);
            border-radius: 8px;
            color: var(--aqua-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-family: 'Poppins', sans-serif;
        }

        .home-btn:hover {
            background: var(--aqua-primary);
            color: white;
        }

        /* Language Selector */
        .header-home-btn {
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(32, 178, 170, 0.3);
        }

        .header-home-btn:hover {
            background: linear-gradient(135deg, var(--aqua-light), var(--aqua-primary));
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(32, 178, 170, 0.4);
        }

        .header-home-btn span:first-child {
            font-size: 1.1rem;
        }

        .lang-selector {
            display: flex;
            gap: 0.3rem;
            align-items: center;
        }

        .lang-flag-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.3rem 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            min-width: 36px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .lang-flag-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .lang-flag-btn.active {
            background: rgba(255,255,255,0.95);
            border: 2px solid rgba(255,255,255,0.9);
            color: var(--aqua-dark);
            box-shadow: 0 3px 12px rgba(0,0,0,0.2);
            font-weight: 800;
        }

        .lang-flag-btn.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        }

        /* Container */
        .container {
            max-width: 1300px;
            margin: 2.5rem auto;
            padding: 0 2rem;
        }

        /* Horizontal Navigation Bar (for steps 1-5) */
        .horizontal-nav {
            display: none;
            background: white;
            padding: 1rem 2rem;
            border-radius: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .horizontal-nav.show {
            display: block;
        }

        .horizontal-steps {
            display: flex;
            gap: 0.5rem;
            min-width: max-content;
        }

        .horizontal-step {
            flex: 1;
            min-width: 140px;
            padding: 0.8rem 1.2rem;
            background: var(--cream);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .horizontal-step:hover {
            background: var(--terracota-pale);
            border-color: var(--terracota-light);
        }

        .horizontal-step.active {
            background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light));
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(200, 90, 79, 0.3);
        }

        .horizontal-step.completed {
            background: white;
            border-color: var(--terracota-primary);
        }

        .horizontal-step-number {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .horizontal-step-label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .horizontal-step.active .horizontal-step-number,
        .horizontal-step.active .horizontal-step-label {
            opacity: 1;
        }

        /* Card */
        .card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
        }

        .card-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }

        /* Step Content */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Temas de color por paso */
        #step1 .card {
            border-top: 5px solid var(--step1-primary);
            background: linear-gradient(to bottom, var(--step1-bg) 0%, white 100px);
        }
        #step1 .card-title {
            color: var(--step1-primary);
        }
        #step1 .alert-info {
            background: var(--step1-bg);
            border-left-color: var(--step1-primary);
        }
        #step1 .selection-card:hover {
            border-color: var(--step1-primary);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2);
        }
        #step1 .selection-card.selected {
            border-color: var(--step1-primary);
            background: var(--step1-pale);
        }
        #step1 .btn-primary {
            background: linear-gradient(135deg, var(--step1-primary), var(--step1-light));
        }
        #step1 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step1-light), var(--step1-primary));
        }

        #step2 .card {
            border-top: 5px solid var(--step2-primary);
            background: linear-gradient(to bottom, var(--step2-bg) 0%, white 100px);
        }
        #step2 .card-title {
            color: var(--step2-primary);
        }
        #step2 .btn-primary {
            background: linear-gradient(135deg, var(--step2-primary), var(--step2-light));
        }
        #step2 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step2-light), var(--step2-primary));
        }

        #step3 .card {
            border-top: 5px solid var(--step3-primary);
            background: linear-gradient(to bottom, var(--step3-bg) 0%, white 100px);
        }
        #step3 .card-title {
            color: var(--step3-primary);
        }
        #step3 .upload-area {
            border-color: var(--step3-pale);
        }
        #step3 .upload-area:hover {
            border-color: var(--step3-primary);
            background: var(--step3-bg);
        }
        #step3 .btn-primary {
            background: linear-gradient(135deg, var(--step3-primary), var(--step3-light));
        }
        #step3 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step3-light), var(--step3-primary));
        }

        #step4 .card {
            border-top: 5px solid var(--step4-primary);
            background: linear-gradient(to bottom, var(--step4-bg) 0%, white 100px);
        }
        #step4 .card-title {
            color: var(--step4-primary);
        }
        #step4 .form-section-title {
            color: var(--step4-primary);
        }
        #step4 .form-group input:focus,
        #step4 .form-group select:focus,
        #step4 .form-group textarea:focus {
            border-color: var(--step4-primary);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        #step4 .btn-primary {
            background: linear-gradient(135deg, var(--step4-primary), var(--step4-light));
        }
        #step4 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step4-light), var(--step4-primary));
        }

        #step5 .card {
            border-top: 5px solid var(--step5-primary);
            background: linear-gradient(to bottom, var(--step5-bg) 0%, white 100px);
        }
        #step5 .card-title {
            color: var(--step5-primary);
        }
        #step5 .form-section-title {
            color: var(--step5-primary);
        }
        #step5 .form-group textarea:focus {
            border-color: var(--step5-primary);
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }
        #step5 .btn-primary {
            background: linear-gradient(135deg, var(--step5-primary), var(--step5-light));
        }
        #step5 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step5-light), var(--step5-primary));
        }

        #step6 .card {
            border-top: 5px solid var(--step6-primary);
            background: linear-gradient(to bottom, var(--step6-bg) 0%, white 100px);
        }
        #step6 .card-title {
            color: var(--step6-primary);
        }
        #step6 .alert-success {
            background: var(--step6-bg);
            border-left-color: var(--step6-primary);
        }
        #step6 .btn-primary {
            background: linear-gradient(135deg, var(--step6-primary), var(--step6-light));
        }
        #step6 .btn-primary:hover {
            background: linear-gradient(135deg, var(--step6-light), var(--step6-primary));
        }

        /* Welcome Page - Process Flow */
        .welcome-intro {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            color: var(--warm-gray);
        }

        /* Journey Path - Camino hacia Canad√° */
        .journey-path {
            position: relative;
            padding: 2rem 0;
            max-width: 900px;
            margin: 0 auto;
        }

        .path-step {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            position: relative;
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .path-step:hover {
            transform: translateX(10px);
        }

        .path-step[style*="cursor: pointer"]:hover .step-circle {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .path-step[style*="cursor: pointer"]:hover .step-right {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .path-step[data-step="1"] { animation-delay: 0.1s; }
        .path-step[data-step="2"] { animation-delay: 0.2s; }
        .path-step[data-step="3"] { animation-delay: 0.3s; }
        .path-step[data-step="4"] { animation-delay: 0.4s; }
        .path-step[data-step="5"] { animation-delay: 0.5s; }
        .path-step[data-step="6"] { animation-delay: 0.6s; }

        .step-left {
            position: relative;
            flex-shrink: 0;
        }

        .step-circle {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 20px rgba(32, 178, 170, 0.3);
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step-circle:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.4);
        }

        /* Colores espec√≠ficos por paso */
        .step-circle-1 {
            background: linear-gradient(135deg, var(--step1-primary), var(--step1-light)) !important;
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3) !important;
        }
        .step-circle-1:hover {
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4) !important;
        }

        .step-circle-2 {
            background: linear-gradient(135deg, var(--step2-primary), var(--step2-light)) !important;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3) !important;
        }
        .step-circle-2:hover {
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4) !important;
        }

        .step-circle-3 {
            background: linear-gradient(135deg, var(--step3-primary), var(--step3-light)) !important;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3) !important;
        }
        .step-circle-3:hover {
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4) !important;
        }

        .step-circle-4 {
            background: linear-gradient(135deg, var(--step4-primary), var(--step4-light)) !important;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3) !important;
        }
        .step-circle-4:hover {
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4) !important;
        }

        .step-circle-5 {
            background: linear-gradient(135deg, var(--step5-primary), var(--step5-light)) !important;
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.3) !important;
        }
        .step-circle-5:hover {
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4) !important;
        }

        .step-circle-6 {
            background: linear-gradient(135deg, var(--step6-primary), var(--step6-light)) !important;
            box-shadow: 0 6px 20px rgba(5, 150, 105, 0.3) !important;
        }
        .step-circle-6:hover {
            box-shadow: 0 8px 25px rgba(5, 150, 105, 0.4) !important;
        }

        .step-circle.success {
            background: linear-gradient(135deg, #10B981, #34D399);
        }

        .step-emoji {
            font-size: 2rem;
            margin-bottom: 0.2rem;
        }

        .step-num {
            font-size: 0.85rem;
            font-weight: 800;
            color: white;
            background: rgba(0,0,0,0.2);
            padding: 0.15rem 0.5rem;
            border-radius: 10px;
            letter-spacing: 1px;
        }

        .connecting-line {
            position: absolute;
            left: 45px;
            top: 90px;
            width: 3px;
            height: calc(100% + 2rem);
            background: linear-gradient(180deg, var(--aqua-primary), var(--aqua-pale));
            z-index: 1;
        }

        /* L√≠neas conectoras con colores por paso */
        .connecting-line-1 {
            background: linear-gradient(180deg, var(--step1-primary), var(--step1-pale)) !important;
        }
        .connecting-line-2 {
            background: linear-gradient(180deg, var(--step2-primary), var(--step2-pale)) !important;
        }
        .connecting-line-3 {
            background: linear-gradient(180deg, var(--step3-primary), var(--step3-pale)) !important;
        }
        .connecting-line-4 {
            background: linear-gradient(180deg, var(--step4-primary), var(--step4-pale)) !important;
        }
        .connecting-line-5 {
            background: linear-gradient(180deg, var(--step5-primary), var(--step5-pale)) !important;
        }

        .path-step:last-child .connecting-line {
            display: none;
        }

        .step-right {
            flex: 1;
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 4px solid var(--aqua-pale);
            transition: all 0.3s ease;
        }

        .step-right:hover {
            border-left-color: var(--aqua-primary);
            box-shadow: 0 6px 20px rgba(32, 178, 170, 0.15);
            transform: translateX(5px);
        }

        /* Bordes y hover por paso */
        .step-right-1 {
            border-left-color: var(--step1-pale) !important;
        }
        .step-right-1:hover {
            border-left-color: var(--step1-primary) !important;
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.15) !important;
        }

        .step-right-2 {
            border-left-color: var(--step2-pale) !important;
        }
        .step-right-2:hover {
            border-left-color: var(--step2-primary) !important;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.15) !important;
        }

        .step-right-3 {
            border-left-color: var(--step3-pale) !important;
        }
        .step-right-3:hover {
            border-left-color: var(--step3-primary) !important;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.15) !important;
        }

        .step-right-4 {
            border-left-color: var(--step4-pale) !important;
        }
        .step-right-4:hover {
            border-left-color: var(--step4-primary) !important;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.15) !important;
        }

        .step-right-5 {
            border-left-color: var(--step5-pale) !important;
        }
        .step-right-5:hover {
            border-left-color: var(--step5-primary) !important;
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.15) !important;
        }

        .step-right-6 {
            border-left-color: var(--step6-pale) !important;
        }
        .step-right-6:hover {
            border-left-color: var(--step6-primary) !important;
            box-shadow: 0 6px 20px rgba(5, 150, 105, 0.15) !important;
        }

        .step-title {
            font-size: 1.25rem;
            color: var(--dark-text);
            margin: 0 0 0.75rem 0;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-info {
            font-size: 0.95rem;
            color: var(--warm-gray);
            line-height: 1.7;
            margin: 0 0 1rem 0;
        }

        .step-duration {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--aqua-bg);
            color: var(--aqua-dark);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Duraci√≥n con colores por paso */
        .step-duration-1 {
            background: var(--step1-bg) !important;
            color: var(--step1-primary) !important;
        }
        .step-duration-2 {
            background: var(--step2-bg) !important;
            color: var(--step2-primary) !important;
        }
        .step-duration-3 {
            background: var(--step3-bg) !important;
            color: var(--step3-primary) !important;
        }
        .step-duration-4 {
            background: var(--step4-bg) !important;
            color: var(--step4-primary) !important;
        }
        .step-duration-5 {
            background: var(--step5-bg) !important;
            color: var(--step5-primary) !important;
        }
        .step-duration-6 {
            background: var(--step6-bg) !important;
            color: var(--step6-primary) !important;
        }

        /* Old journey-steps styles - keep for compatibility */
        .journey-steps {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 20px;
            position: relative;
        }

        .journey-step {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            background: white;
            padding: 1.5rem 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            animation: slideIn 0.5s ease forwards;
            opacity: 0;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .journey-step[data-step="1"] {
            animation-delay: 0.1s;
            transform: translateX(-30px);
        }
        .journey-step[data-step="2"] {
            animation-delay: 0.2s;
            transform: translateX(-30px);
        }
        .journey-step[data-step="3"] {
            animation-delay: 0.3s;
            transform: translateX(-30px);
        }
        .journey-step[data-step="4"] {
            animation-delay: 0.4s;
            transform: translateX(-30px);
        }
        .journey-step[data-step="5"] {
            animation-delay: 0.5s;
            transform: translateX(-30px);
        }
        .journey-step[data-step="6"] {
            animation-delay: 0.6s;
            transform: translateX(-30px);
        }

        .journey-step:hover {
            transform: translateX(10px) scale(1.02);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.15);
            border-left: 4px solid var(--aqua-primary);
        }

        .step-icon-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            min-width: 80px;
        }

        .step-icon {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--aqua-pale), var(--aqua-bg));
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(32, 178, 170, 0.2);
        }

        .step-number {
            font-size: 0.75rem;
            font-weight: 800;
            color: var(--aqua-dark);
            background: var(--aqua-pale);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            letter-spacing: 1px;
        }

        .step-content {
            flex: 1;
        }

        .step-content h4 {
            font-size: 1.15rem;
            color: var(--dark-text);
            margin-bottom: 0.4rem;
            font-weight: 700;
        }

        .step-content p {
            font-size: 0.9rem;
            color: var(--warm-gray);
            line-height: 1.5;
            margin: 0;
        }

        .step-arrow {
            font-size: 2rem;
            color: var(--aqua-primary);
            font-weight: bold;
            margin-left: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }

        .journey-step:last-child .step-arrow {
            display: none;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.6;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        /* Old process-flow styles - keep for compatibility */
        .process-flow {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        .process-card {
            background: linear-gradient(135deg, #FFFFFF, var(--cream));
            border: 2px solid var(--aqua-pale);
            border-radius: 15px;
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .process-card:hover {
            border-color: var(--aqua-primary);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.2);
            transform: translateY(-5px);
        }

        .process-number {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.4rem;
            margin: 0 auto 1rem;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
        }

        .process-card h4 {
            font-size: 1.05rem;
            color: var(--dark-text);
            margin-bottom: 0.6rem;
            font-weight: 600;
        }

        .process-card p {
            font-size: 0.88rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Alerts */
        .alert {
            padding: 1.8rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border-left: 4px solid;
        }

        .alert-warning {
            background: #FFF8E1;
            border-color: #FFB74D;
            color: #E65100;
        }

        .alert-info {
            background: #E3F2FD;
            border-color: #64B5F6;
            color: #0D47A1;
        }

        .alert-success {
            background: #E8F5E9;
            border-color: #81C784;
            color: #1B5E20;
        }

        .alert h3 {
            margin-bottom: 1rem;
            font-size: 1.15rem;
            font-weight: 600;
        }

        .alert p, .alert ul {
            line-height: 1.8;
        }

        .alert ul {
            list-style: none;
            padding: 0;
        }

        .alert li {
            margin-bottom: 1rem;
            padding-left: 2rem;
            position: relative;
        }

        .alert-info li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #1976D2;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .alert a {
            color: var(--terracota-primary);
            font-weight: 600;
            text-decoration: none;
        }

        .alert a:hover {
            text-decoration: underline;
        }

        /* Selection Cards */
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .selection-card {
            border: 2px solid var(--aqua-pale);
            border-radius: 15px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .selection-card:hover {
            border-color: var(--aqua-primary);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.15);
            transform: translateY(-3px);
        }

        .selection-card.selected {
            border-color: var(--aqua-dark);
            background: linear-gradient(135deg, var(--aqua-pale), #FFFFFF);
            box-shadow: 0 8px 25px rgba(32, 178, 170, 0.25);
        }

        .selection-card h3 {
            font-size: 1.2rem;
            color: var(--dark-text);
            margin-bottom: 0.7rem;
            font-weight: 600;
        }

        .selection-card p {
            font-size: 0.95rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Document List */
        .doc-list {
            background: var(--cream);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
        }

        .doc-list h3 {
            color: var(--terracota-dark);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .doc-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.8rem;
            background: white;
            border-radius: 10px;
            border-left: 4px solid var(--terracota-primary);
            transition: all 0.3s ease;
        }

        .doc-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateX(3px);
        }

        .doc-number {
            background: linear-gradient(135deg, var(--terracota-primary), var(--terracota-light));
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .doc-content h4 {
            font-size: 1rem;
            color: var(--dark-text);
            margin-bottom: 0.4rem;
            font-weight: 600;
        }

        .doc-content p {
            font-size: 0.88rem;
            color: var(--warm-gray);
            line-height: 1.6;
        }

        /* Form */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.3rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.6rem;
        }

        .form-group label .required {
            color: var(--terracota-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 2px solid var(--terracota-pale);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--terracota-primary);
            box-shadow: 0 0 0 3px rgba(200, 90, 79, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Upload */
        .upload-grid {
            display: grid;
            gap: 1.8rem;
        }

        .upload-section h4 {
            color: var(--dark-text);
            margin-bottom: 1rem;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .upload-area {
            border: 2px dashed var(--terracota-pale);
            border-radius: 15px;
            padding: 2.5rem;
            text-align: center;
            cursor: pointer;
            background: var(--cream);
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: var(--terracota-primary);
            background: var(--terracota-pale);
        }

        .upload-area.has-file {
            border-color: #4CAF50;
            background: #E8F5E9;
            border-style: solid;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 0.7rem;
        }

        .upload-text {
            font-size: 0.95rem;
            color: var(--warm-gray);
        }

        .file-name {
            margin-top: 0.8rem;
            font-size: 0.9rem;
            color: #2E7D32;
            font-weight: 600;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 2.5rem;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.7rem;
            font-family: 'Poppins', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-light));
            color: white;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--aqua-dark), var(--aqua-primary));
            box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--cream);
            color: var(--dark-text);
            border: 2px solid var(--terracota-pale);
        }

        .btn-secondary:hover {
            background: var(--terracota-pale);
            border-color: var(--terracota-primary);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid var(--terracota-pale);
            border-top: 4px solid var(--terracota-primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        /* Print Styles */
        @media print {
            @page {
                size: letter;
                margin: 1.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            #printableChecklist, 
            #printableChecklist * {
                visibility: visible;
            }
            
            #printableChecklist {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white;
                padding: 0;
            }
            
            .no-print {
                display: none !important;
            }
            
            /* Evitar que se corten elementos al imprimir */
            * {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .logo-badge {
                width: 50px;
                height: 50px;
            }

            .logo-badge-text {
                font-size: 0.85rem;
            }

            .logo-text h1 {
                font-size: 1.3rem;
            }

            .logo-text p {
                font-size: 0.7rem;
            }

            .applicant-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .lang-selector {
                margin-top: 0.5rem;
                gap: 0.25rem;
            }

            .lang-flag-btn {
                min-width: 32px;
                height: 28px;
                font-size: 0.7rem;
                padding: 0.25rem 0.4rem;
            }

            .journey-path {
                padding: 1rem 0;
            }

            .path-step {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
                text-align: center;
            }

            .step-circle {
                width: 80px;
                height: 80px;
            }

            .step-emoji {
                font-size: 1.8rem;
            }

            .connecting-line {
                left: 50%;
                margin-left: -1.5px;
                top: 80px;
            }

            .step-right {
                width: 100%;
            }

            .step-title {
                justify-content: center;
            }

            .journey-steps {
                padding: 1rem;
                gap: 1rem;
            }

            .journey-step {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem 1rem;
                gap: 1rem;
            }

            .journey-step:hover {
                transform: scale(1.02);
            }

            .step-icon {
                font-size: 2rem;
                width: 60px;
                height: 60px;
            }

            .step-arrow {
                transform: rotate(90deg);
                margin: 0;
            }

            .process-flow {
                grid-template-columns: 1fr;
            }

            .quick-nav {
                flex-direction: column;
            }

            .quick-nav-steps {
                width: 100%;
                flex-direction: column;
            }

            .quick-nav-btn {
                width: 100%;
                text-align: left;
                padding: 0.7rem 1rem;
            }

            .home-btn {
                width: 100%;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .process-flow {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        /* Footer Art√≠stico - Compacto y Profesional */
        .artistic-footer {
            background: linear-gradient(135deg, var(--aqua-primary) 0%, var(--aqua-dark) 50%, #0d7377 100%);
            color: white;
            padding: 2rem 2rem 1rem;
            margin-top: 4rem;
            position: relative;
            overflow: hidden;
        }

        .footer-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255,255,255,0.04) 0%, transparent 50%),
                linear-gradient(45deg, transparent 48%, rgba(255,255,255,0.02) 49%, rgba(255,255,255,0.02) 51%, transparent 52%);
            background-size: 
                400px 400px,
                300px 300px,
                80px 80px;
            background-position: 
                0% 0%,
                100% 100%,
                0 0;
            animation: patternMove 20s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes patternMove {
            0%, 100% {
                background-position: 0% 0%, 100% 100%, 0 0;
            }
            50% {
                background-position: 100% 100%, 0% 0%, 10px 10px;
            }
        }

        .footer-wave {
            position: absolute;
            top: -30px;
            left: 0;
            width: 100%;
            height: 30px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="%2320B2AA"/></svg>') no-repeat;
            background-size: cover;
        }

        .footer-content {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .footer-badge {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }

        .footer-badge span {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.7rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--aqua-primary), var(--aqua-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.5px;
        }

        .footer-text h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0 0 0.1rem 0;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .footer-text p {
            margin: 0;
            opacity: 0.85;
            font-size: 0.75rem;
        }

        .footer-contact {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            transform: translateY(-2px);
        }

        .contact-icon {
            font-size: 1.2rem;
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .contact-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.7;
            font-weight: 600;
        }

        .contact-info a {
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .contact-info a:hover {
            color: var(--aqua-pale);
            letter-spacing: 0.5px;
        }

        .footer-bottom {
            width: 100%;
            text-align: center;
            padding-top: 1rem;
            margin-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .footer-bottom p {
            margin: 0;
            opacity: 0.7;
            font-size: 0.75rem;
        }

        .footer-maple {
            font-size: 1rem;
            animation: mapleFloat 3s ease-in-out infinite;
        }

        @keyframes mapleFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-5px) rotate(10deg);
            }
        }

        /* Responsive Footer */
        @media (max-width: 768px) {
            .artistic-footer {
                padding: 1.5rem 1rem 0.75rem;
            }

            .footer-content {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
                text-align: center;
            }

            .footer-logo {
                flex-direction: column;
            }

            .footer-badge {
                width: 40px;
                height: 40px;
            }

            .footer-badge span {
                font-size: 0.65rem;
            }

            .footer-text h3 {
                font-size: 1rem;
            }

            .footer-text p {
                font-size: 0.7rem;
            }

            .footer-contact {
                flex-direction: column;
                gap: 0.75rem;
                width: 100%;
            }

            .contact-item {
                justify-content: center;
            }

            .contact-icon {
                font-size: 1rem;
                width: 28px;
                height: 28px;
            }

            .contact-info a {
                font-size: 0.8rem;
            }

            .footer-bottom {
                padding-top: 0.75rem;
                margin-top: 0.75rem;
            }

            .footer-bottom p {
                font-size: 0.7rem;
            }
        }

    </style>
    
    <!-- ============================================ -->
    <!-- PDF and ZIP Libraries -->
    <!-- ============================================ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- ============================================ -->
    <!-- EmailJS Library for sending emails -->
    <!-- ============================================ -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            // ‚ö†Ô∏è IMPORTANTE: Reemplaza "TU_PUBLIC_KEY_AQUI" con tu Public Key de EmailJS
            // Para obtenerlo: https://dashboard.emailjs.com/admin/account
            emailjs.init("TU_PUBLIC_KEY_AQUI");
        })();
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-container">
                    <div class="logo-badge">
                        <span class="logo-badge-text">LMBI</span>
                    </div>
                    <div class="logo-text">
                        <h1>LMBI Immigration</h1>
                        <p>Solicitud de Visa de Turismo Canadiense</p>
                    </div>
                </div>
            </div>
            <div class="applicant-info" id="applicantInfo">
                <div class="applicant-info-item">
                    <span>üë§</span>
                    <span id="headerName">-</span>
                </div>
                <div class="applicant-info-item">
                    <span>üìß</span>
                    <span id="headerEmail">-</span>
                </div>
                <div class="applicant-info-item">
                    <span>üì±</span>
                    <span id="headerPhone">-</span>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="header-home-btn" onclick="goToStep(0)" title="Volver al inicio">
                    <span>üè†</span>
                    <span class="home-btn-text">Inicio</span>
                </button>
                <div class="lang-selector">
                    <button class="lang-flag-btn active" data-lang="es" onclick="changeLanguageFromFlag('es')" title="Espa√±ol">
                        ES
                    </button>
                    <button class="lang-flag-btn" data-lang="en" onclick="changeLanguageFromFlag('en')" title="English">
                        EN
                    </button>
                    <button class="lang-flag-btn" data-lang="fr" onclick="changeLanguageFromFlag('fr')" title="Fran√ßais">
                        FR
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Barra de Progreso Global -->
    <div class="global-progress">
        <div class="global-progress-inner">
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="globalProgressBar" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Paso 0 de 6: Bienvenida</div>
        </div>
    </div>

    <div class="container">
        <!-- Navegaci√≥n R√°pida -->
        <div class="quick-nav" id="quickNav">
            <div class="quick-nav-steps">
                <button class="quick-nav-btn" data-step="1" onclick="goToStep(1)"><span class="nav-btn-1">Tipo de Solicitud</span></button>
                <button class="quick-nav-btn" data-step="2" onclick="goToStep(2)"><span class="nav-btn-2">Documentos Requeridos</span></button>
                <button class="quick-nav-btn" data-step="3" onclick="goToStep(3)"><span class="nav-btn-3">Subir Documentos</span></button>
                <button class="quick-nav-btn" data-step="4" onclick="goToStep(4)"><span class="nav-btn-4">Informaci√≥n Personal</span></button>
                <button class="quick-nav-btn" data-step="5" onclick="goToStep(5)"><span class="nav-btn-5">Motivo del Viaje</span></button>
                <button class="quick-nav-btn" data-step="6" onclick="goToStep(6)"><span class="nav-btn-6">Revisi√≥n y Env√≠o</span></button>
            </div>
        </div>
        <!-- Welcome Page (Step 0) -->
        <div class="step-content active" id="stepWelcome">
            <div class="card">
                <h2 class="card-title"><span class="text-welcomeTitle">üè† Bienvenido(a) a LMBI Immigration</span></h2>
                
                <p class="welcome-intro">
                    <span class="text-welcomeIntro">¬°Nos alegra que est√©s aqu√≠! Estamos listos para acompa√±arte en tu proceso de solicitud de visa de turismo canadiense. 
                    Hemos dise√±ado este portal para que sea f√°cil, claro y profesional. ¬°Vamos juntos hacia tu sue√±o canadiense!</span>
                </p>
                
                <!-- Nota de lenguaje -->
                <div style="background: #f8f9fa; border-left: 3px solid var(--warm-gray); padding: 0.75rem 1rem; margin: 1.5rem 0; border-radius: 4px; font-size: 0.85rem; color: var(--warm-gray);">
                    <span class="text-languageNote">*Para facilitar la lectura, en este formulario utilizaremos el g√©nero masculino de manera gen√©rica, pero nuestros servicios est√°n dirigidos a todas las personas sin distinci√≥n.</span>
                </div>

                <div class="alert alert-warning">
                    <h3><span class="text-importantTitle">‚ö†Ô∏è Informaci√≥n Importante - IRCC</span></h3>
                    <p>
                        <span class="text-importantText"><strong>Debes saber:</strong> La decisi√≥n final sobre tu visa la toman exclusivamente los Agentes de Inmigraci√≥n de <strong>IRCC</strong> 
                        (Immigration, Refugees and Citizenship Canada). En LMBI Immigration te ayudamos profesionalmente a preparar tus documentos de la mejor manera posible, 
                        pero no podemos garantizar la aprobaci√≥n de tu visa.</span>
                    </p>
                    <p style="margin-top: 1rem;">
                        <span class="text-importantLink">Para informaci√≥n oficial, siempre puedes consultar directamente con IRCC:</span>
                        <a href="https://www.canada.ca/en/immigration-refugees-citizenship.html" target="_blank" style="font-weight: 600;">www.canada.ca</a>
                    </p>
                </div>

                <h3 style="font-size: 1.6rem; color: var(--terracota-dark); margin: 2.5rem 0 0.5rem; font-weight: 700; text-align: center;">
                    <span class="text-processTitle">üõ§Ô∏è Tu Camino hacia Canad√°</span>
                </h3>
                <p style="color: var(--warm-gray); margin-bottom: 2.5rem; text-align: center; font-size: 1.05rem;">
                    <span class="text-processSubtitle">Completa tu solicitud en 6 pasos simples - Te guiaremos en cada uno</span>
                </p>

                <div class="journey-path">
                    <!-- Step 1 -->
                    <div class="path-step" data-step="1" onclick="goToStep(1)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-1">
                                <span class="step-emoji">üìã</span>
                                <span class="step-num">1</span>
                            </div>
                        </div>
                        <div class="step-right step-right-1">
                            <h4 class="step-title"><span class="text-process1Title">Tipo de Solicitud</span></h4>
                            <p class="step-info"><span class="text-process1Info">¬øQu√© tipo de visa de turismo necesitas? Selecciona si est√°s dentro o fuera de Canad√°, o si aplicas para un menor de edad.</span></p>
                            <div class="step-duration step-duration-1">‚è±Ô∏è <span class="text-duration1">1 minuto</span></div>
                        </div>
                        <div class="connecting-line connecting-line-1"></div>
                    </div>

                    <!-- Step 2 -->
                    <div class="path-step" data-step="2" onclick="goToStep(2)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-2">
                                <span class="step-emoji">üìù</span>
                                <span class="step-num">2</span>
                            </div>
                        </div>
                        <div class="step-right step-right-2">
                            <h4 class="step-title"><span class="text-process2Title">Documentos Requeridos</span></h4>
                            <p class="step-info"><span class="text-process2Info">Revisa la lista personalizada de documentos que necesitas. Te mostraremos exactamente qu√© preparar seg√∫n tu situaci√≥n.</span></p>
                            <div class="step-duration step-duration-2">‚è±Ô∏è <span class="text-duration2">3 minutos</span></div>
                        </div>
                        <div class="connecting-line connecting-line-2"></div>
                    </div>

                    <!-- Step 3 -->
                    <div class="path-step" data-step="3" onclick="goToStep(3)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-3">
                                <span class="step-emoji">üì§</span>
                                <span class="step-num">3</span>
                            </div>
                        </div>
                        <div class="step-right step-right-3">
                            <h4 class="step-title"><span class="text-process3Title">Cargar Documentos</span></h4>
                            <p class="step-info"><span class="text-process3Info">Sube tus documentos de forma segura. Puedes arrastrar y soltar archivos. Aceptamos PDF, JPG y PNG.</span></p>
                            <div class="step-duration step-duration-3">‚è±Ô∏è <span class="text-duration3">10 minutos</span></div>
                        </div>
                        <div class="connecting-line connecting-line-3"></div>
                    </div>

                    <!-- Step 4 -->
                    <div class="path-step" data-step="4" onclick="goToStep(4)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-4">
                                <span class="step-emoji">üë§</span>
                                <span class="step-num">4</span>
                            </div>
                        </div>
                        <div class="step-right step-right-4">
                            <h4 class="step-title"><span class="text-process4Title">Informaci√≥n Personal</span></h4>
                            <p class="step-info"><span class="text-process4Info">Completa tus datos personales, familiares, educaci√≥n y experiencia laboral. Toda la informaci√≥n es confidencial y segura.</span></p>
                            <div class="step-duration step-duration-4">‚è±Ô∏è <span class="text-duration4">15-20 minutos</span></div>
                        </div>
                        <div class="connecting-line connecting-line-4"></div>
                    </div>

                    <!-- Step 5 -->
                    <div class="path-step" data-step="5" onclick="goToStep(5)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-5">
                                <span class="step-emoji">‚úàÔ∏è</span>
                                <span class="step-num">5</span>
                            </div>
                        </div>
                        <div class="step-right step-right-5">
                            <h4 class="step-title"><span class="text-process5Title">Motivo de tu Viaje</span></h4>
                            <p class="step-info"><span class="text-process5Info">Explica por qu√© deseas visitar Canad√°, qu√© lugares visitar√°s y por qu√© volver√°s a tu pa√≠s. S√© honesto y detallado.</span></p>
                            <div class="step-duration step-duration-5">‚è±Ô∏è <span class="text-duration5">10 minutos</span></div>
                        </div>
                        <div class="connecting-line connecting-line-5"></div>
                    </div>

                    <!-- Step 6 -->
                    <div class="path-step" data-step="6" onclick="goToStep(6)" style="cursor: pointer;">
                        <div class="step-left">
                            <div class="step-circle step-circle-6 success">
                                <span class="step-emoji">üéâ</span>
                                <span class="step-num">6</span>
                            </div>
                        </div>
                        <div class="step-right step-right-6">
                            <h4 class="step-title"><span class="text-process6Title">Revisi√≥n y Env√≠o</span></h4>
                            <p class="step-info"><span class="text-process6Info">Revisa toda tu informaci√≥n, descarga tu paquete completo en ZIP y env√≠alo por email a nuestro equipo. ¬°Listo!</span></p>
                            <div class="step-duration step-duration-6">‚è±Ô∏è <span class="text-duration6">5 minutos</span></div>
                        </div>
                    </div>
                </div>

                <!-- Total Time Indicator -->
                <div style="background: linear-gradient(135deg, #E6FFFA, #B2F5EA); padding: 1.5rem; border-radius: 15px; text-align: center; margin-top: 2rem; border: 2px solid var(--aqua-pale);">
                    <h4 style="color: var(--aqua-dark); margin: 0; font-size: 1.2rem; font-weight: 700;">
                        <span class="text-totalTime">‚è∞ Tiempo Total Estimado: 40-50 minutos</span>
                    </h4>
                </div>

                <div class="alert alert-info">
                    <h3><span class="text-considerationsTitle">üí° Aspectos Importantes a Considerar</span></h3>
                    <ul>
                        <li>
                            <span class="text-consideration1"><strong>Documentos Completos:</strong> Recuerde que es importante tener todos los documentos 
                            completos en el momento de enviar, de lo contrario, el proceso de realizaci√≥n de la visa 
                            podr√≠a tomar m√°s tiempo.</span>
                        </li>
                        <li>
                            <span class="text-consideration2"><strong>Arraigo en su Pa√≠s:</strong> Es importante tener en cuenta que el Gobierno de Canad√° 
                            tiene muy en cuenta el arraigo que usted pueda tener en su pa√≠s (familiar, propiedades, 
                            trabajo, empresa, etc.).</span>
                        </li>
                        <li>
                            <span class="text-consideration3"><strong>Aspectos Financieros:</strong> Los aspectos financieros son muy tenidos en cuenta. 
                            Tenga en cuenta que las <strong>tarjetas de cr√©dito NO son consideradas como activos</strong> 
                            para el gobierno de Canad√°.</span>
                        </li>
                        <li>
                            <span class="text-consideration4"><strong>Honestidad:</strong> Es importante siempre decir la verdad en toda la aplicaci√≥n. 
                            La falsificaci√≥n de informaci√≥n puede resultar en la prohibici√≥n permanente de ingresar a Canad√°.</span>
                        </li>
                    </ul>
                </div>

                <div class="btn-group" style="justify-content: center;">
                    <button class="btn btn-primary" onclick="goToStep(1)" style="font-size: 1.15rem; padding: 1.2rem 3rem;">
                        <span class="text-startButton">Iniciar Solicitud ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 1: Application Type -->
        <div class="step-content" id="step1">
            <div class="card">
                <h2 class="card-title"><span class="text-step1Title">üìã Seleccione el tipo de solicitud</span></h2>
                
                <div class="alert alert-info">
                    <span class="text-step1Info">Por favor, seleccione su situaci√≥n para mostrarle los documentos espec√≠ficos que necesita.</span>
                    <br><br>
                    <small style="opacity: 0.8;"><span class="text-step1Tip">üí° <strong>Consejo:</strong> Haga doble click en su opci√≥n para avanzar autom√°ticamente.</span></small>
                </div>

                <div class="selection-grid">
                    <div class="selection-card" data-type="adult-outside">
                        <h3><span class="text-step1Option1Title">üë®‚Äçüíº Adulto fuera de Canad√°</span></h3>
                        <p><span class="text-step1Option1Desc">Para personas adultas que se encuentran actualmente fuera de Canad√°.</span></p>
                    </div>
                    <div class="selection-card" data-type="adult-inside">
                        <h3><span class="text-step1Option2Title">üë®‚Äçüíº Adulto dentro de Canad√°</span></h3>
                        <p><span class="text-step1Option2Desc">Para personas adultas que se encuentran actualmente en Canad√°.</span></p>
                    </div>
                    <div class="selection-card" data-type="child">
                        <h3><span class="text-step1Option3Title">üë∂ Ni√±os/Menores</span></h3>
                        <p><span class="text-step1Option3Desc">Para solicitudes de visa de turismo para ni√±os menores de 18 a√±os.</span></p>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(0)">
                        <span class="text-backToHome">‚Üê Volver a Inicio</span>
                    </button>
                    <button class="btn btn-primary" id="nextStep1" disabled>
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Required Documents -->
        <div class="step-content" id="step2">
            <div class="card">
                <h2 class="card-title"><span class="text-step2Title">üìë Documentos Requeridos</span></h2>
                
                <!-- Botones al inicio -->
                <div class="btn-group" style="margin-top: 0; margin-bottom: 2rem;">
                    <button class="btn btn-secondary" onclick="goToStep(1)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(3)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
                
                <div class="alert alert-success" style="text-align: center; margin: 2rem 0; background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-left: 5px solid #4CAF50;">
                    <h3 style="margin-bottom: 1rem; color: #2E7D32; font-size: 1.4rem;"><span class="text-step2DownloadTitle">üì• Descargue su Checklist en PDF</span></h3>
                    <p style="margin-bottom: 1.5rem; font-size: 1.05rem; color: #1B5E20; line-height: 1.7;">
                        <span class="text-step2DownloadText"><strong>¬°Importante!</strong> Descargue la lista completa de documentos requeridos en formato PDF. 
                        Este checklist incluye el <strong>nombre exacto de cada archivo PDF</strong> que debe preparar, 
                        junto con descripciones detalladas de cada documento.</span>
                    </p>
                    <button class="print-btn" onclick="downloadCurrentChecklist()" style="font-size: 1.1rem; padding: 1.2rem 2.5rem; background: linear-gradient(135deg, #4CAF50, #66BB6A); box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);">
                        <span class="text-step2DownloadButton">üìÑ Descargar Checklist PDF</span>
                    </button>
                    <p style="margin-top: 1.5rem; font-size: 0.95rem; color: #558B2F; line-height: 1.6;">
                        <span class="text-step2DownloadTip">üí° <strong>Tip:</strong> Imprima el checklist y m√°rquelo a medida que re√∫ne cada documento. 
                        Cada documento est√° claramente identificado con su nombre de archivo PDF correspondiente.</span>
                    </p>
                </div>
                
                <div class="alert alert-warning">
                    <h3 style="margin-bottom: 1rem; font-size: 1.05rem;"><span class="text-step2WarningTitle">‚ö†Ô∏è Informaci√≥n Importante sobre Documentos</span></h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #F59E0B;">‚Ä¢</span>
                            <span class="text-step2WarningLanguage"><strong>Idioma:</strong> Todos los documentos que no est√©n en franc√©s o ingl√©s deben estar traducidos y acompa√±ados del documento original.</span>
                        </li>
                        <li style="padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #F59E0B;">‚Ä¢</span>
                            <span class="text-step2WarningFormat"><strong>Formato y Tama√±o:</strong> Los documentos deben subirse en formato PDF con un peso m√°ximo de 3.8 MB por archivo. La fotograf√≠a puede subirse tambi√©n en formato JPEG.</span>
                        </li>
                    </ul>
                </div>

                <div id="documentList"></div>

                <!-- Botones al final -->
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(1)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(3)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Checklist Imprimible (hidden) -->
        <div id="printableChecklist" style="display: none;">
            <!-- Contenido generado din√°micamente -->
        </div>

        <!-- Step 3: Upload Documents -->
        <div class="step-content" id="step3">
            <div class="card">
                <h2 class="card-title"><span class="text-step3Title">üì§ Subir Documentos</span></h2>
                
                <!-- Botones al inicio -->
                <div class="btn-group" style="margin-top: 0; margin-bottom: 2rem;">
                    <button class="btn btn-secondary" onclick="goToStep(2)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(4)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
                
                <div class="alert alert-info">
                    <h3 style="margin-bottom: 1rem; font-size: 1.05rem;"><span class="text-step3AlertTitle">üì§ Instrucciones para Subir Documentos</span></h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info1"><strong>Formato PDF:</strong> Todos los documentos deben subirse en formato PDF con un tama√±o m√°ximo de 3.8 MB por archivo.</span>
                        </li>
                        <li style="margin-bottom: 0.75rem; padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info2"><strong>Fotograf√≠a:</strong> La fotograf√≠a es el √∫nico documento que puede subirse tambi√©n en formato JPG/JPEG.</span>
                        </li>
                        <li style="padding-left: 1.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: #1976D2;">‚Ä¢</span>
                            <span class="text-step3Info3"><strong>Documentos no aplicables:</strong> Si alg√∫n documento no aplica a su situaci√≥n, puede marcarlo como "No Aplica" para continuar.</span>
                        </li>
                    </ul>
                </div>

                <div class="upload-grid" id="uploadGrid"></div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(2)">
                        <span class="text-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" onclick="goToStep(4)">
                        <span class="text-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Personal Information -->
        <div class="step-content" id="step4">
            <div class="card">
                <h2 class="card-title" id="step4TitleHeader">‚úèÔ∏è Informaci√≥n Personal</h2>
                
                <!-- NOTA IMPORTANTE -->
                <div class="alert alert-info" style="background: linear-gradient(135deg, #FFF4E6, #FFE8CC); border-left: 5px solid #F59E0B; margin-bottom: 2rem;">
                    <h3 style="color: #F59E0B; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
                        <span class="text-step4ImportantNote">‚ö†Ô∏è Informaci√≥n Importante</span>
                    </h3>
                    <p style="margin: 0; line-height: 1.6; color: #78350F;">
                        <span class="text-step4ImportantText">
                            <strong>Por favor, diligencia toda la informaci√≥n de este formulario.</strong> Toda la informaci√≥n es necesaria para el correcto llenado de los formularios oficiales de inmigraci√≥n.
                            <br><br>
                            Solo marca <strong>N/A</strong> (No Aplica) cuando la pregunta realmente no se aplique a tu situaci√≥n espec√≠fica. Por ejemplo:
                            <br>‚Ä¢ Si nunca has estado casado(a), marca N/A en informaci√≥n de matrimonio previo.
                            <br>‚Ä¢ Si no tienes hijos, marca N/A en informaci√≥n de hijos.
                            <br><br>
                            <strong>Recuerda:</strong> La calidad y completitud de esta informaci√≥n es fundamental para el √©xito de tu solicitud de visa.
                        </span>
                    </p>
                </div>
                
                <form id="personalInfoForm">
                    <!-- INFORMACI√ìN B√ÅSICA -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section1-title">üìã 1. Informaci√≥n del / la Solicitante</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-firstName">Nombres</span> </label>
                            <input type="text" name="firstName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-lastName">Apellidos</span> </label>
                            <input type="text" name="lastName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-applicationDate">Fecha de diligenciamiento</span> </label>
                            <input type="date" name="applicationDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-birthDate">Fecha de Nacimiento</span> </label>
                            <input type="date" name="birthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-birthPlace">Lugar de Nacimiento</span> </label>
                            <input type="text" name="birthPlace">
                        </div>
                        <div class="form-group">
                            <label><span class="label-citizenship">Pa√≠s de Ciudadan√≠a</span> </label>
                            <input type="text" name="citizenship">
                        </div>
                        <div class="form-group">
                            <label><span class="label-passportNumber">N√∫mero de Pasaporte</span> </label>
                            <input type="text" name="passportNumber">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section1" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTADO CIVIL ACTUAL -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section2-title">üíë 2. Estado Civil Actual</span></h3>
                    <div class="form-grid" id="section2-fields">
                        <div class="form-group">
                            <label><span class="label-maritalStatusLabel">A. Estado civil</span> </label>
                            <select name="maritalStatus">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-currentPartnerName">B. Nombres completos de la pareja actual</span> </label>
                            <input type="text" name="currentPartnerName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-relationshipStartDate">C. Fecha inicio de la relaci√≥n</span> </label>
                            <input type="date" name="relationshipStartDate">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section2" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTADO CIVIL ANTERIOR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section3-title">üìú 3. Estado Civil Anterior</span></h3>
                    <div class="form-grid" id="section3-fields">
                        <div class="form-group">
                            <label><span class="label-previousRelationshipLabel">A. ¬øTuvo una relaci√≥n anterior?</span> </label>
                            <select name="previousRelationship" id="previousRelationship">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="no" class="opt-no">No</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                            </select>
                        </div>
                    </div>
                    <div id="previousRelationshipFields" style="display: none;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label><span class="label-previousRelationType">B. Tipo de relaci√≥n</span> </label>
                                <select name="previousRelationType">
                                    <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                    <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                    <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousPartnerName">C. Nombre completo pareja anterior</span> </label>
                                <input type="text" name="previousPartnerName">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousPartnerBirthDate">D. Fecha nacimiento pareja anterior</span> </label>
                                <input type="date" name="previousPartnerBirthDate">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousRelationshipStart">E. Fecha inicio de la relaci√≥n anterior</span> </label>
                                <input type="date" name="previousRelationshipStart">
                            </div>
                            <div class="form-group">
                                <label><span class="label-previousRelationshipEnd">F. Fecha de finalizaci√≥n de la relaci√≥n anterior</span> </label>
                                <input type="date" name="previousRelationshipEnd">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section3" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- IDIOMAS -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section4-title">üó£Ô∏è 4. Idiomas</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-nativeLanguage">A. Lengua materna</span> </label>
                            <select name="nativeLanguage">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="spanish" class="opt-nativeLanguageSpanish">Espa√±ol</option>
                                <option value="english" class="opt-nativeLanguageEnglish">Ingl√©s</option>
                                <option value="french" class="opt-nativeLanguageFrench">Franc√©s</option>
                                <option value="portuguese" class="opt-nativeLanguagePortuguese">Portugu√©s</option>
                                <option value="other" class="opt-nativeLanguageOther">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-languageAbility">B. ¬øEn qu√© otro idioma se puede comunicar?</span> </label>
                            <select name="languageAbility">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="english" class="opt-languageAbilityEnglish">Ingl√©s</option>
                                <option value="french" class="opt-languageAbilityFrench">Franc√©s</option>
                                <option value="both" class="opt-languageAbilityBoth">En los dos idiomas</option>
                                <option value="neither" class="opt-languageAbilityNeither">En ninguno</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-preferredLanguage">¬øEn cu√°l idioma se sentir√≠a m√°s confiable?</span> </label>
                            <select name="preferredLanguage">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="english" class="opt-languageAbilityEnglish">Ingl√©s</option>
                                <option value="french" class="opt-languageAbilityFrench">Franc√©s</option>
                                <option value="spanish" class="opt-nativeLanguageSpanish">Espa√±ol</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-languageTest">¬øHa hecho alguna prueba de ingl√©s o franc√©s?</span> </label>
                            <select name="languageTest" id="languageTest">
                                <option value="" class="opt-nativeLanguageSelect">Seleccione</option>
                                <option value="no" class="opt-no">No</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                            </select>
                        </div>
                    </div>
                    <div id="languageTestFields" style="display: none;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label><span class="label-languageTestType">¬øCu√°l prueba?</span> </label>
                                <input type="text" name="languageTestType" placeholder="IELTS, TOEFL, TEF, etc.">
                            </div>
                            <div class="form-group">
                                <label><span class="label-languageTestYear">¬øEn qu√© a√±o?</span> </label>
                                <input type="number" name="languageTestYear" min="1990" max="2030">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section4" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- DIRECCI√ìN -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section5-title">üè† 5. Direcci√≥n del / la Solicitante</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-addressLabel">A. Direcci√≥n actual</span> </label>
                            <input type="text" name="address">
                        </div>
                        <div class="form-group">
                            <label><span class="label-city">B. Ciudad</span> </label>
                            <input type="text" name="city">
                        </div>
                        <div class="form-group">
                            <label><span class="label-region">C. Regi√≥n, Provincia, Depto</span> </label>
                            <input type="text" name="region">
                        </div>
                        <div class="form-group">
                            <label><span class="label-country">D. Pa√≠s</span> </label>
                            <input type="text" name="country">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postalCode">E. C√≥digo Postal (si aplica)</span> </label>
                            <input type="text" name="postalCode">
                        </div>
                        <div class="form-group">
                            <label><span class="label-phone">F. N√∫mero telef√≥nico</span> </label>
                            <input type="tel" name="phone">
                        </div>
                        <div class="form-group">
                            <label><span class="label-email">G. Email</span> </label>
                            <input type="email" name="email">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section5" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- DETALLES DEL VIAJE -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section6-title">‚úàÔ∏è 6. Detalles del Viaje a Canad√°</span></h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-arrivalDate">A. Fecha de llegada a Canad√°</span> </label>
                            <input type="date" name="travelDateStart">
                        </div>
                        <div class="form-group">
                            <label><span class="label-departureDate">B. Fecha de salida de Canad√°</span> </label>
                            <input type="date" name="travelDateEnd">
                        </div>
                        <div class="form-group">
                            <label><span class="label-availableFunds">C. Dinero disponible (en d√≥lares CAD)</span> </label>
                            <input type="number" name="availableFunds" placeholder="">
                        </div>
                        <div class="form-group">
                            <label><span class="label-whoToVisit">D. ¬øA qui√©n visita?</span> </label>
                            <input type="text" name="whoToVisit">
                        </div>
                        <div class="form-group">
                            <label><span class="label-personToVisit">E. Nombre de la persona que visita</span> </label>
                            <input type="text" name="personToVisit">
                        </div>
                        <div class="form-group">
                            <label><span class="label-visitPersonAddress">F. Direcci√≥n de la persona que visita</span> </label>
                            <input type="text" name="visitPersonAddress">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section6" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- ESTUDIOS DE POSTGRADO -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section7-title">üéì 7. Estudios de Postgrado</span></h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;"><span class="section7-subtitle">(comprendre estudios universitarios, diplomados o una formaci√≥n de aprendizaje). Si no tienes, colocar N/A en √°rea de estudios.</span></p>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-postgraduateStartDate">Fecha inicio</span></label>
                            <input type="date" name="postgraduateStartDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateEndDate">Fecha final</span></label>
                            <input type="date" name="postgraduateEndDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateCity">Ciudad</span></label>
                            <input type="text" name="postgraduateCity">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateCountry">Pa√≠s</span></label>
                            <input type="text" name="postgraduateCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateArea">√Årea de estudios</span></label>
                            <input type="text" name="postgraduateArea">
                        </div>
                        <div class="form-group">
                            <label><span class="label-postgraduateInstitution">Nombre del establecimiento educativo</span></label>
                            <input type="text" name="postgraduateInstitution">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section7" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- EMPLEOS (√∫ltimos 10 a√±os) -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section8-title">üíº 8. Empleos Ocupados en los 10 √öltimos A√±os</span></h3>
                    
                    <div id="employmentContainer">
                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job1StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job1EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job1City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job1Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job1Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job1Company">
                                </div>
                            </div>
                        </div>

                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="employment2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job2StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job2EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job2City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job2Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job2Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job2Company">
                                </div>
                            </div>
                        </div>

                        <div class="employment-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="employment3">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-jobStartDate">Fecha inicio empleo</span></label>
                                    <input type="date" name="job3StartDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobEndDate">Fecha final empleo</span></label>
                                    <input type="date" name="job3EndDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCity">Ciudad</span></label>
                                    <input type="text" name="job3City">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCountry">Pa√≠s</span></label>
                                    <input type="text" name="job3Country">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobPosition">Cargo</span></label>
                                    <input type="text" name="job3Position">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-jobCompany">Empresa</span></label>
                                    <input type="text" name="job3Company">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addEmploymentBtn" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-addEmployment">Adicionar otro empleo</span></button>

                    <!-- INFORMACI√ìN FAMILIAR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section9-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ 9. Informaci√≥n Familiar</span></h3>
                    
                    <!-- 9.1 Esposo(a) o Pareja -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section91-title">9.1. Informaci√≥n del Esposo(a) o Pareja actual (si aplica). Si es soltero(a) escribir N/A</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-spouseName">A. Nombre Completo</span></label>
                            <input type="text" name="spouseName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseBirthDate">B. Fecha Nacimiento</span></label>
                            <input type="date" name="spouseBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseBirthCountry">C. Pa√≠s Nacimiento</span></label>
                            <input type="text" name="spouseBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseAddress">D. Direcci√≥n actual</span></label>
                            <input type="text" name="spouseAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="spouseOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-spouseWillTravel">Su pareja lo acompa√±ar√° en el Viaje?</span></label>
                            <select name="spouseWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section91" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.2 Madre -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section92-title">9.2. Informaci√≥n de la Madre. Si su madre esta viva, diligencie las casillas A,B,C,D,F,G,H,I. Si su madre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-motherName">A. Nombre completo</span></label>
                            <input type="text" name="motherName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherBirthDate">B. Fecha nacimiento</span></label>
                            <input type="date" name="motherBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherBirthCountry">C. Pa√≠s nacimiento</span></label>
                            <input type="text" name="motherBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherAlive">D. Su madre vive?</span></label>
                            <select name="motherAlive" id="motherAlive">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherDeceasedDate">E. Fecha deceso</span></label>
                            <input type="date" name="motherDeceasedDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherAddress">F. Direcci√≥n actual</span></label>
                            <input type="text" name="motherAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="motherOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherMaritalStatus">H. Estado Civil</span></label>
                            <select name="motherMaritalStatus">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-motherWillTravel">I. Su madre lo acompa√±ar√° en el viaje?</span></label>
                            <select name="motherWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section92" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.3 Padre -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section93-title">9.3. Informaci√≥n del Padre. Si su padre esta vivo, diligencie las casillas A,B,C,D,F,G,H,I. Si su padre falleci√≥, diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label><span class="label-fatherName">A. Nombre completo</span></label>
                            <input type="text" name="fatherName">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherBirthDate">B. Fecha nacimiento</span></label>
                            <input type="date" name="fatherBirthDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherBirthCountry">C. Pa√≠s nacimiento</span></label>
                            <input type="text" name="fatherBirthCountry">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherAlive">D. Su padre vive?</span></label>
                            <select name="fatherAlive" id="fatherAlive">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherDeceasedDate">E. Fecha deceso</span></label>
                            <input type="date" name="fatherDeceasedDate">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherAddress">F. Direcci√≥n actual</span></label>
                            <input type="text" name="fatherAddress">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherOccupation">G. Ocupaci√≥n</span></label>
                            <input type="text" name="fatherOccupation">
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherMaritalStatus">H. Estado civil</span></label>
                            <select name="fatherMaritalStatus">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><span class="label-fatherWillTravel">I. Su padre lo acompa√±ar√° en el viaje?</span></label>
                            <select name="fatherWillTravel">
                                <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                <option value="yes" class="opt-yes">S√≠</option>
                                <option value="no" class="opt-no">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section93" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                    <!-- 9.4 Hijos -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section94-title">9.4. Informaci√≥n de Hijos o Hijas. Si su(s) hijo(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hijo(a)s fallecio(eron), diligencie √∫nicamente casillas A,B,C,D,E.</span></h4>
                    
                    <div id="childrenContainer">
                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-childName">A. Nombre completo</span></label>
                                    <input type="text" name="child1Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="child1BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="child1Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="daughter" class="opt-childDaughter">Hija</option>
                                        <option value="son" class="opt-childSon">Hijo</option>
                                        <option value="stepdaughter" class="opt-childStepdaughter">Hijastra</option>
                                        <option value="stepson" class="opt-childStepson">Hijastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAlive">D. Su hijo(a) vive?</span></label>
                                    <select name="child1Alive">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childDeceasedDate">E. Fecha deceso</span></label>
                                    <input type="date" name="child1DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAddress">F. Direcci√≥n actual</span></label>
                                    <input type="text" name="child1Address">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childOccupation">G. Ocupaci√≥n</span></label>
                                    <input type="text" name="child1Occupation">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childMaritalStatus">H. Estado civil</span></label>
                                    <select name="child1MaritalStatus">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                        <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                        <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                        <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                        <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                        <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childWillTravel">I. Su hijo(a) lo acompa√±ara en el viaje?</span></label>
                                    <select name="child1WillTravel">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="child2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-childName">A. Nombre completo</span></label>
                                    <input type="text" name="child2Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="child2BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="child2Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="daughter" class="opt-childDaughter">Hija</option>
                                        <option value="son" class="opt-childSon">Hijo</option>
                                        <option value="stepdaughter" class="opt-childStepdaughter">Hijastra</option>
                                        <option value="stepson" class="opt-childStepson">Hijastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAlive">D. Su hijo(a) vive?</span></label>
                                    <select name="child2Alive">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childDeceasedDate">E. Fecha deceso</span></label>
                                    <input type="date" name="child2DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childAddress">F. Direcci√≥n actual</span></label>
                                    <input type="text" name="child2Address">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childOccupation">G. Ocupaci√≥n</span></label>
                                    <input type="text" name="child2Occupation">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childMaritalStatus">H. Estado civil</span></label>
                                    <select name="child2MaritalStatus">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="married" class="opt-maritalStatusMarried">Casado(a)</option>
                                        <option value="single" class="opt-maritalStatusSingle">Soltero(a)</option>
                                        <option value="common-law" class="opt-maritalStatusCommonLaw">Uni√≥n de hecho</option>
                                        <option value="separated" class="opt-maritalStatusSeparated">Separado(a) legalmente</option>
                                        <option value="divorced" class="opt-maritalStatusDivorced">Divorciado(a)</option>
                                        <option value="widowed" class="opt-maritalStatusWidowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-childWillTravel">I. Su hijo(a) lo acompa√±ara en el viaje?</span></label>
                                    <select name="child2WillTravel">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="yes" class="opt-yes">S√≠</option>
                                        <option value="no" class="opt-no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addChildBtn" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-addChild">Adicionar otro hijo(a)</span></button>

                    <!-- 9.5 Hermanos -->
                    <h4 style="color: var(--terracota-dark); margin: 1.5rem 0 0.5rem;"><span class="section95-title">9.5. Informaci√≥n de Hermanos(as). Si su(s) hermano(a)s est√°(n) vivo(a)s, diligencie las casillas A,B,C,D,F,G,H,I. Si su(s) hermano(a)s fallecio(eron) diligencie √∫nicamente casillas A,B,C,D,E</span></h4>
                    
                    <div id="siblingsContainer">
                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><span class="label-siblingName">A. Nombre completo</span></label>
                                    <input type="text" name="sibling1Name">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingBirthDate">B. Fecha nacimiento</span></label>
                                    <input type="date" name="sibling1BirthDate">
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingRelationship">C. Relaci√≥n familiar</span></label>
                                    <select name="sibling1Relationship">
                                        <option value="" class="opt-maritalStatusSelect">Seleccione</option>
                                        <option value="sister" class="opt-siblingSister">Hermana</option>
                                        <option value="brother" class="opt-siblingBrother">Hermano</option>
                                        <option value="stepsister" class="opt-siblingStepsister">Hermanastra</option>
                                        <option value="stepbrother" class="opt-siblingStepbrother">Hermanastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label><span class="label-siblingAlive">D. Hermano(a) vive?</span></label>
                                    <select name="sibling1Alive">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>E. Fecha deceso</label>
                                    <input type="date" name="sibling1DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label>F. Direcci√≥n actual</label>
                                    <input type="text" name="sibling1Address">
                                </div>
                                <div class="form-group">
                                    <label>G. Ocupaci√≥n</label>
                                    <input type="text" name="sibling1Occupation">
                                </div>
                                <div class="form-group">
                                    <label>H. Estado civil</label>
                                    <select name="sibling1MaritalStatus">
                                        <option value="">Seleccione</option>
                                        <option value="married">Casado(a)</option>
                                        <option value="single">Soltero(a)</option>
                                        <option value="common-law">Uni√≥n de hecho</option>
                                        <option value="separated">Separado(a) legalmente</option>
                                        <option value="divorced">Divorciado(a)</option>
                                        <option value="widowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>I. Su hermano(a) lo acompa√±ar√° en el viaje?</label>
                                    <select name="sibling1WillTravel">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="family-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="sibling2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>A. Nombre completo</label>
                                    <input type="text" name="sibling2Name">
                                </div>
                                <div class="form-group">
                                    <label>B. Fecha nacimiento</label>
                                    <input type="date" name="sibling2BirthDate">
                                </div>
                                <div class="form-group">
                                    <label>C. Relaci√≥n familiar</label>
                                    <select name="sibling2Relationship">
                                        <option value="">Seleccione</option>
                                        <option value="sister">Hermana</option>
                                        <option value="brother">Hermano</option>
                                        <option value="stepsister">Hermanastra</option>
                                        <option value="stepbrother">Hermanastro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>D. Hermano(a) vive?</label>
                                    <select name="sibling2Alive">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>E. Fecha deceso</label>
                                    <input type="date" name="sibling2DeceasedDate">
                                </div>
                                <div class="form-group">
                                    <label>F. Direcci√≥n actual</label>
                                    <input type="text" name="sibling2Address">
                                </div>
                                <div class="form-group">
                                    <label>G. Ocupaci√≥n</label>
                                    <input type="text" name="sibling2Occupation">
                                </div>
                                <div class="form-group">
                                    <label>H. Estado civil</label>
                                    <select name="sibling2MaritalStatus">
                                        <option value="">Seleccione</option>
                                        <option value="married">Casado(a)</option>
                                        <option value="single">Soltero(a)</option>
                                        <option value="common-law">Uni√≥n de hecho</option>
                                        <option value="separated">Separado(a) legalmente</option>
                                        <option value="divorced">Divorciado(a)</option>
                                        <option value="widowed">Viudo(a)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>I. Su hermano(a) lo acompa√±ar√° en el viaje?</label>
                                    <select name="sibling2WillTravel">
                                        <option value="">Seleccione</option>
                                        <option value="yes">S√≠</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addSiblingBtn" style="margin-top: 1rem; background-color: #B0B8C4;">Adicionar otro hermano(a)</button>

                    <!-- ANTECEDENTES -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section10-title">‚ö†Ô∏è 10. Antecedentes</span></h3>
                    
                    <div style="overflow-x: auto; margin: 1rem 0; border-radius: 15px; box-shadow: 0 6px 25px rgba(0,0,0,0.2); overflow: hidden;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="background: linear-gradient(135deg, #00897B, #00ACC1); color: white; padding: 1.3rem; text-align: left; width: 70%; font-size: 1.05rem; font-weight: 700;"></th>
                                    <th style="background: linear-gradient(135deg, #00897B, #00ACC1); color: white; padding: 1.3rem; text-align: center; width: 15%; font-size: 1.1rem; font-weight: 700;">S√ç</th>
                                    <th style="background: linear-gradient(135deg, #00897B, #00ACC1); color: white; padding: 1.3rem; text-align: center; width: 15%; font-size: 1.1rem; font-weight: 700;">NO</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent1">1. Usted o alguien de su familia ha tenido tuberculosis en los √∫ltimos dos a√±os?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="tuberculosis" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="tuberculosis" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent2">2. Tiene alg√∫n desorden f√≠sico o mental que necesite servicios sociales o medicamentos durante su estad√≠a en Canad√° ?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="medicalCondition" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="medicalCondition" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent3">3. Ha permanecido en suelo canadiense despu√©s de la expiraci√≥n de su estatus?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="overstayedCanada" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="overstayedCanada" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent4">4. Le han negado una visa o permiso o le han impedido antes la entrada a territorio canadiense o a otro pa√≠s?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="visaDenied" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="visaDenied" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent5">5. Ha presentado anteriormente una solicitud de entrada a Canad√°?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="previousApplication" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="previousApplication" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent6">6. Ha sido acusado, retenido o reconocido culpable de alguna infracci√≥n penal en alg√∫n otro pa√≠s o territorio?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="criminalRecord" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="criminalRecord" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent7">7. Ha hecho parte de un grupo armado, unidad contra la defensa civil o de un cuerpo de polic√≠a?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="armedGroup" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="armedGroup" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent8">8. Ha sido miembro o afiliado de alg√∫n partido pol√≠tico o de un grupo u organizaci√≥n que haya utilizado la violencia con el fin de alcanzar los objetivos pol√≠ticos o religiosos o que haya estado implicado en actividades criminales?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="politicalAffiliation" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="politicalAffiliation" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                                <tr style="transition: all 0.3s;" onmouseover="this.style.background='#E0F7FA'" onmouseout="this.style.background=''">
                                    <td style="background: linear-gradient(135deg, #26C6DA, #00BCD4); color: white; padding: 1.2rem; border-bottom: 3px solid white; font-weight: 500; line-height: 1.6;"><span class="label-antecedent9">9. Ha sido testigo de malos tratamientos infrigidos a prisioneros, civiles, o ha realizado actos de vandalismo o de profanaci√≥n de edificios religiosos?</span></td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="witnessAbuse" value="yes" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                    <td style="background-color: #F0FDFF; padding: 1.2rem; text-align: center; border-bottom: 3px solid #B2EBF2;">
                                        <input type="radio" name="witnessAbuse" value="no" class="antecedent-radio" style="width: 26px; height: 26px; cursor: pointer; accent-color: #00BCD4;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div id="antecedentJustificationContainer" style="margin: 2rem 0; display: none;">
                        <div style="background: linear-gradient(135deg, #FFF3E0, #FFE0B2); padding: 1.5rem; border-radius: 10px; border-left: 5px solid #FF9800; margin-bottom: 1rem;">
                            <p style="color: #E65100; margin: 0; font-weight: 600; font-size: 1rem;">
                                ‚ö†Ô∏è <span class="label-antecedentJustification">Ha respondido S√ç a alguna pregunta. Por favor justifique su respuesta brevemente e indique el n√∫mero de la pregunta (ejemplo: "4. Me negaron visa a USA en 2020 porque..."):</span>
                            </p>
                        </div>
                        <textarea id="backgroundJustification" name="backgroundJustification" rows="6" style="width: 100%; padding: 1.2rem; border: 3px solid #00BCD4; border-radius: 10px; font-family: inherit; font-size: 1rem; transition: all 0.3s; box-shadow: 0 4px 15px rgba(0, 188, 212, 0.2);" placeholder="Escriba aqu√≠ su justificaci√≥n indicando el n√∫mero de la pregunta..."></textarea>
                    </div>

                    <!-- HISTORIAL DE VIAJES -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;"><span class="section11-title">üåç 11. Historial de Viajes Efectuados en los 10 √öltimos A√±os</span></h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;"><span class="section11-subtitle">En caso que no haya realizado viajes, colocar N/A en ciudad y pa√≠s.</span></p>
                    
                    <div id="travelContainer">
                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel1StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel1EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel1City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel1Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel1Purpose">
                                </div>
                            </div>
                        </div>

                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="travel2">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel2StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel2EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel2City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel2Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel2Purpose">
                                </div>
                            </div>
                        </div>

                        <div class="travel-entry" style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; display: none;" id="travel3">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Fecha inicial</label>
                                    <input type="date" name="travel3StartDate">
                                </div>
                                <div class="form-group">
                                    <label>Fecha final</label>
                                    <input type="date" name="travel3EndDate">
                                </div>
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" name="travel3City">
                                </div>
                                <div class="form-group">
                                    <label>Pa√≠s</label>
                                    <input type="text" name="travel3Country">
                                </div>
                                <div class="form-group full-width">
                                    <label>Motivo del Viaje</label>
                                    <input type="text" name="travel3Purpose">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary" id="addTravelBtn" style="margin-top: 1rem; background-color: #B0B8C4;">Adicionar otro viaje</button>

                    <!-- SERVICIO MILITAR -->
                    <h3 style="color: var(--terracota-dark); margin: 2rem 0 1rem; border-bottom: 2px solid var(--terracota-primary); padding-bottom: 0.5rem;">üéñÔ∏è 12. Servicio Militar (si aplica)</h3>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.95rem;">En caso que no haya realizado servicio militar, colocar N/A en ciudad y pa√≠s.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Fecha inicial</label>
                            <input type="date" name="militaryStartDate">
                        </div>
                        <div class="form-group">
                            <label>Fecha final</label>
                            <input type="date" name="militaryEndDate">
                        </div>
                        <div class="form-group">
                            <label>Ciudad</label>
                            <input type="text" name="militaryCity">
                        </div>
                        <div class="form-group">
                            <label>Pa√≠s</label>
                            <input type="text" name="militaryCountry">
                        </div>
                        <div class="form-group full-width">
                            <label>Rango</label>
                            <input type="text" name="militaryRank">
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary na-section-btn" data-section="section12" style="margin-top: 1rem; background-color: #B0B8C4;"><span class="btn-naButton">N/A</span></button>

                </form>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(3)">
                        <span class="btn-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" id="nextStep4" onclick="goToStep(5)">
                        <span class="btn-continue">Continuar ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 5: Travel Purpose / Motivo del Viaje -->
        <div class="step-content" id="step5">
            <div class="card">
                <h2 class="card-title"><span class="text-step5Title">‚úàÔ∏è Motivo del Viaje</span></h2>
                
                <div class="alert alert-info">
                    <h3><span class="text-step5AlertTitle">üìù Instrucciones Importantes</span></h3>
                    <p style="margin-bottom: 1rem;">
                        <span class="text-step5AlertIntro"><strong>Por favor, sea lo m√°s detallado y claro posible al describir el motivo de su viaje.</strong></span>
                    </p>
                    <p>
                        <span class="text-step5AlertSubtitle">Es fundamental que mencione:</span>
                    </p>
                    <ul style="margin-top: 0.5rem;">
                        <li><span class="text-step5Tip1"><strong>Prop√≥sito principal:</strong> ¬øPor qu√© desea viajar a Canad√°? (turismo, visitar familia, negocios, etc.)</span></li>
                        <li><span class="text-step5Tip2"><strong>Lugares a visitar:</strong> Ciudades y sitios espec√≠ficos que planea conocer</span></li>
                        <li><span class="text-step5Tip3"><strong>Duraci√≥n:</strong> Tiempo exacto que permanecer√° en Canad√°</span></li>
                        <li><span class="text-step5Tip4"><strong>Arraigo:</strong> Razones por las cuales regresar√° a su pa√≠s de origen (trabajo, familia, propiedades, estudios, etc.)</span></li>
                        <li><span class="text-step5Tip5"><strong>Itinerario:</strong> Si tiene un plan espec√≠fico de actividades</span></li>
                    </ul>
                    <p style="margin-top: 1rem;">
                        <span class="text-step5AlertReminder"><strong>Recuerde:</strong> La honestidad y el detalle son fundamentales. Una carta bien elaborada aumenta las posibilidades de aprobaci√≥n.</span>
                    </p>
                </div>

                <div class="alert alert-warning">
                    <span class="text-step5Warning"><strong>‚ö†Ô∏è Importante:</strong> Esta informaci√≥n es revisada cuidadosamente por los oficiales de IRCC. 
                    Aseg√∫rese de que coincida con la documentaci√≥n que ha presentado.</span>
                </div>

                <form id="travelPurposeForm">
                    <div class="form-section">
                        <h3 class="form-section-title"><span class="text-step5FormTitle">üìã Carta de Motivaci√≥n</span></h3>
                        
                        <div class="form-group full-width">
                            <label for="travelPurpose">
                                Describa detalladamente el motivo de su viaje a Canad√°
                            </label>
                            <textarea 
                                id="travelPurpose" 
                                name="travelPurpose" 
                                required
                                style="min-height: 300px;"
                                placeholder="Ejemplo:

El prop√≥sito de mi viaje a Canad√° es visitar a mi hermana [Nombre] quien reside en Toronto desde hace 5 a√±os. Planeo quedarme durante 3 semanas (del [fecha] al [fecha]).

Durante mi estancia, tengo planeado:
- Visitar las Cataratas del Ni√°gara
- Conocer el centro de Toronto
- Pasar tiempo con mi familia

Tengo fuertes lazos con mi pa√≠s de origen que garantizan mi retorno:
- Soy propietario de [negocio/propiedad]
- Tengo un empleo estable como [cargo] en [empresa] desde hace [X] a√±os
- Mi familia (esposa e hijos) permanecer√°n en [pa√≠s]
- Mis estudios universitarios contin√∫an en [universidad]

Adjunto toda la documentaci√≥n que respalda esta informaci√≥n..."
                            ></textarea>
                            <small style="display: block; margin-top: 0.5rem; color: var(--warm-gray);">
                                M√≠nimo 200 palabras recomendadas. Sea espec√≠fico y honesto.
                            </small>
                        </div>
                    </div>
                </form>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(4)">
                        ‚Üê Atr√°s
                    </button>
                    <button class="btn btn-primary" id="nextStep5" onclick="goToStep(6)">
                        Continuar ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 6: Review and Submit -->
        <div class="step-content" id="step6">
            <div class="card">
                <h2 class="card-title" id="step6TitleHeader">‚úÖ Revisi√≥n y Env√≠o</h2>
                
                <div class="alert alert-success" id="step6AlertSuccess">
                    Por favor, revise toda la informaci√≥n antes de enviar. Una vez enviada, se generar√° un PDF con todos sus documentos y se enviar√° a LMBI Immigration.
                </div>

                <div id="reviewContent"></div>

                <!-- Confirmaci√≥n de Datos del Aplicante -->
                <div class="alert alert-warning" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;" id="step6ConfirmTitle">‚ö†Ô∏è Confirmaci√≥n de Datos</h3>
                    <p style="margin-bottom: 1rem;" id="step6ConfirmText">
                        <strong>Importante:</strong> Por favor, confirme sus datos de contacto antes de enviar la solicitud. 
                        Estos datos ser√°n utilizados para todas las comunicaciones relacionadas con su visa.
                    </p>
                    
                    <form id="finalConfirmationForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="confirmName">
                                    Nombre Completo
                                </label>
                                <input 
                                    type="text" 
                                    id="confirmName" 
                                    name="confirmName" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>

                            <div class="form-group">
                                <label for="confirmEmail">
                                    Correo Electr√≥nico
                                </label>
                                <input 
                                    type="email" 
                                    id="confirmEmail" 
                                    name="confirmEmail" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>

                            <div class="form-group">
                                <label for="confirmPhone">
                                    Tel√©fono
                                </label>
                                <input 
                                    type="tel" 
                                    id="confirmPhone" 
                                    name="confirmPhone" 
                                    required
                                    readonly
                                    style="background: #F5F5F5; cursor: not-allowed;"
                                />
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; padding: 1.5rem; background: white; border: 2px solid var(--terracota-primary); border-radius: 10px;">
                            <div class="checkbox-group" style="flex-direction: column; gap: 1rem;">
                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmDocuments" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        Confirmo que he adjuntado todos los documentos requeridos seg√∫n mi tipo de solicitud.
                                    </span>
                                </label>

                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmInfo" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        Confirmo que toda la informaci√≥n proporcionada es verdadera y completa.
                                    </span>
                                </label>

                                <label style="cursor: pointer; display: flex; align-items: flex-start; gap: 0.7rem;">
                                    <input 
                                        type="checkbox" 
                                        id="confirmReview" 
                                        required
                                        style="margin-top: 0.2rem; flex-shrink: 0;"
                                    >
                                    <span style="font-weight: 500; line-height: 1.6;">
                                        He revisado cuidadosamente toda mi solicitud y estoy listo para enviarla.
                                    </span>
                                </label>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="loading" id="loadingSubmit">
                    <div class="spinner"></div>
                    <p>Generando PDF y enviando solicitud...</p>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="goToStep(4)">
                        <span class="btn-back">‚Üê Atr√°s</span>
                    </button>
                    <button class="btn btn-primary" id="submitApplication">
                        <span class="btn-submit">üì® Enviar Solicitud</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Art√≠stico -->
    <footer class="artistic-footer">
        <div class="footer-pattern"></div>
        <div class="footer-content">
            <div class="footer-logo">
                <div class="footer-badge">
                    <span>LMBI</span>
                </div>
                <div class="footer-text">
                    <h3>LMBI Immigration</h3>
                    <p>Tu camino hacia Canad√° comienza aqu√≠</p>
                </div>
            </div>
            
            <div class="footer-contact">
                <div class="contact-item">
                    <div class="contact-icon">üìß</div>
                    <div class="contact-info">
                        <span class="contact-label">Email</span>
                        <a href="/cdn-cgi/l/email-protection#771b1a151e591e1a1a1e100516031e181937101a161e1b5914181a"><span class="__cf_email__" data-cfemail="c8a4a5aaa1e6a1a5a5a1afbaa9bca1a7a688afa5a9a1a4e6aba7a5">[email&#160;protected]</span></a>
                    </div>
                </div>
                
                <div class="contact-item">
                    <div class="contact-icon">üì±</div>
                    <div class="contact-info">
                        <span class="contact-label">WhatsApp</span>
                        <a href="https://wa.me/15147734708" target="_blank">+1 (514) 773-4708</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 LMBI Immigration. Todos los derechos reservados.</p>
                <div class="footer-maple">üçÅ</div>
            </div>
        </div>
        <div class="footer-wave"></div>
    </footer>


    <script>
        // ============================================
        // LMBI IMMIGRATION - SCRIPT PRINCIPAL
        // ============================================
        
        console.log('üéØ LMBI Immigration - Aplicaci√≥n iniciada');
        
        // Definir goToStep INMEDIATAMENTE
        window.goToStep = function(stepNumber) {
            console.log('üöÄ Navegando a paso:', stepNumber);
            
            try {
                // Ocultar todos los pasos
                const allSteps = document.querySelectorAll('.step-content');
                allSteps.forEach(step => step.classList.remove('active'));
                
                // Mostrar el paso solicitado
                const stepId = stepNumber === 0 ? 'stepWelcome' : `step${stepNumber}`;
                const stepElement = document.getElementById(stepId);
                
                if (stepElement) {
                    stepElement.classList.add('active');
                    console.log('‚úÖ Paso activado:', stepId);
                    
                    // Si es paso 2, mostrar lista de documentos
                    if (stepNumber === 2) {
                        showDocumentList();
                    }
                    
                    // Si es paso 3, mostrar campos de upload
                    if (stepNumber === 3) {
                        showUploadFields();
                    }
                    
                    // Scroll arriba
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // Actualizar navegaci√≥n
                    const quickNav = document.getElementById('quickNav');
                    if (quickNav) {
                        if (stepNumber === 0) {
                            quickNav.classList.remove('show');
                        } else {
                            quickNav.classList.add('show');
                        }
                    }
                    
                    // Actualizar botones
                    document.querySelectorAll('.quick-nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                        if (parseInt(btn.dataset.step) === stepNumber) {
                            btn.classList.add('active');
                        }
                    });
                } else {
                    console.error('‚ùå No se encontr√≥:', stepId);
                    alert('Error: No se pudo cargar la p√°gina.');
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
                alert('Error: ' + error.message);
            }
        };
        
        console.log('‚úÖ goToStep definido - Tipo:', typeof window.goToStep);
        
        // ============================================
        // BASE DE DATOS COMPLETA DE DOCUMENTOS POR TIPO
        // ============================================
        
        const documentRequirements = {
            'adult-outside': [
                { id: 'passport', title: 'Pasaportes (actual y anteriores)', filename: 'PASAPORTE.pdf', description: 'Debe digitalizar todas las p√°ginas de su pasaporte actual y de cualquier pasaporte anterior que haya tenido, asegur√°ndose de incluir toda la informaci√≥n personal y los sellos de inmigraci√≥n. Es fundamental que tambi√©n incluya las p√°ginas que contengan visas previas, si las posee.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'id', title: 'Documento de identidad', filename: 'DOCUMENTO_IDENTIDAD.pdf', description: 'Escanear recto-verso el documento de identidad de su pa√≠s (ej: c√©dula de ciudadan√≠a).', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'photo', title: 'Fotograf√≠a', filename: 'FOTOGRAFIA.jpg', description: 'Ver especificaciones de las fotograf√≠as. Este documento se puede enviar en PDF o JPG. Consulte las especificaciones en la p√°gina oficial de IRCC.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'invitation', title: 'Carta de invitaci√≥n (affidavit) + pruebas', filename: 'CARTA_INVITACION.pdf', description: 'La carta de invitaci√≥n debe especificar de manera expl√≠cita que el invitado se alojar√° en su residencia, recibiendo hospedaje y alimentaci√≥n a lo largo de su estancia en Canad√°. La persona que invita debe adjuntar: pasaporte escaneado, prueba de status migratorio (si tiene status temporal), carta de empleo y dos √∫ltimos comprobantes de pago o declaraci√≥n de impuestos, y documento que pruebe la relaci√≥n (ej: certificado de nacimiento). Si no est√° en franc√©s o ingl√©s, debe traducirse.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'employment', title: 'Prueba de ocupaci√≥n + dos √∫ltimos comprobantes de pago', filename: 'PRUEBA_EMPLEO.pdf', description: 'Si es empleado: Carta laboral indicando fecha de inicio, tiempo en la empresa, cargo y salario mensual (si es posible). Si es trabajador independiente: Carta de contador indicando actividad e ingresos mensuales (adjuntar tarjeta profesional del contador). Si es pensionado: Comprobante de pensi√≥n. La carta laboral debe traducirse si no est√° en franc√©s o ingl√©s.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'bank', title: 'Extractos bancarios', filename: 'EXTRACTOS_BANCARIOS.pdf', description: 'Adjuntar los 4 √∫ltimos extractos bancarios. En caso de dep√≥sitos de montos altos, adjuntar recibos que comprueben el origen de los fondos. Este documento es fundamental para que el oficial de inmigraci√≥n compruebe que cuenta con recursos para el viaje. Incluir certificado bancario con el saldo de la cuenta (generalmente se puede descargar directamente en ingl√©s del banco).', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'property', title: 'Documentos de propiedad', filename: 'PROPIEDAD_INMUEBLES.pdf', description: 'Adjuntar documentos de propiedad de casas, terrenos, lotes, bien ra√≠z, etc. (ej: escrituras, compraventas, futuras herencias). Deben estar traducidos. Si el documento es muy largo, traducir solo las p√°ginas con informaci√≥n importante del inmueble.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'vacation', title: 'Carta de vacaciones o de licencia laboral', filename: 'CARTA_VACACIONES.pdf', description: 'La carta debe ser expedida por la empresa donde trabaja, especificando el tiempo de vacaciones o licencia para el viaje a Canad√°. Es importante que las fechas de vacaciones est√©n acorde con la duraci√≥n del viaje.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'tickets', title: 'Reservaci√≥n de los tiquetes de viaje (ida y regreso)', filename: 'TIQUETES_VIAJE.pdf', description: 'La reservaci√≥n debe tener los nombres de las personas que van a viajar y las fechas deben coincidir con el formulario de inmigraci√≥n y la carta de vacaciones. Considere que el tiempo de procesamiento es discrecional. Si compra los tiquetes, h√°galo con posibilidad de cambio de fechas.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'cv', title: 'CV actualizada en FR o ENG', filename: 'CV_HOJA_VIDA.pdf', description: 'Incluir la hoja de vida actualizada. Este documento debe estar en franc√©s o ingl√©s.', badge: 'Opcional', badgeColor: '#3B82F6' },
                { id: 'diploma', title: 'Diploma de estudios', filename: 'DIPLOMAS.pdf', description: 'Incluir los diplomas de estudio principales (no es necesario enviar diplomas de cursos de perfeccionamiento). Debe ir traducido. SOLO SI ENV√çA EL CV.', badge: 'Opcional', badgeColor: '#3B82F6' },
                { id: 'other-property', title: 'Otras propiedades', filename: 'OTRAS_PROPIEDADES.pdf', description: 'Veh√≠culos, compraventas, compromisos de compra, futuras herencias, etc. Estos documentos deben ir traducidos.', badge: 'Opcional', badgeColor: '#3B82F6' },
                { id: 'company-docs', title: 'Documentos de la empresa', filename: 'DOCUMENTOS_EMPRESA.pdf', description: 'Si es propietario o socio de una empresa: documentos de registro, documentos de constituci√≥n, y documento notariado dejando representante durante su estad√≠a en Canad√°. Todos deben estar traducidos.', badge: 'Si Aplica', badgeColor: '#8B5CF6' },
                { id: 'marriage', title: 'Certificado de matrimonio o uni√≥n libre', filename: 'CERTIFICADO_MATRIMONIO.pdf', description: 'Adjuntar seg√∫n su caso. Este documento debe traducirse.', badge: 'Si Aplica', badgeColor: '#8B5CF6' },
                { id: 'birth-children', title: 'Certificados de nacimiento de los hijos', filename: 'CERTIFICADOS_HIJOS.pdf', description: 'Adjuntar los certificados de nacimiento de los hijos. Si no viaja con ellos, es importante para comprobar arraigo con el pa√≠s de origen. Debe traducirse.', badge: 'Si Aplica', badgeColor: '#8B5CF6' }
            ],
            'adult-inside': [
                { id: 'passport', title: 'Pasaportes (actual y anteriores)', filename: 'PASAPORTE.pdf', description: 'Debe digitalizar todas las p√°ginas de su pasaporte actual y de cualquier pasaporte anterior que haya tenido, asegur√°ndose de incluir toda la informaci√≥n personal y los sellos de inmigraci√≥n. Es fundamental que tambi√©n incluya las p√°ginas que contengan visas previas, si las posee.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'id', title: 'Documento de identidad', filename: 'DOCUMENTO_IDENTIDAD.pdf', description: 'Escanear recto-verso el documento de identidad de su pa√≠s (ej: c√©dula de ciudadan√≠a).', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'photo', title: 'Fotograf√≠a', filename: 'FOTOGRAFIA.jpg', description: 'Ver especificaciones de las fotograf√≠as seg√∫n est√°ndares canadienses. Este documento se puede enviar en PDF o JPG.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'status', title: 'Prueba de status migratorio', filename: 'STATUS_MIGRATORIO.pdf', description: 'Enviar una copia escaneada (por ambos lados) del permiso de trabajo o permiso de estudio vigente.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'employment', title: 'Prueba de ocupaci√≥n + desprendibles de pago', filename: 'PRUEBA_EMPLEO.pdf', description: 'Carta laboral donde se indique la fecha de inicio del empleo y el tiempo que lleva en la empresa, el cargo. Incluir los dos √∫ltimos comprobantes de pago de salario.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'bank', title: 'Extractos bancarios', filename: 'EXTRACTOS_BANCARIOS.pdf', description: 'Adjuntar los 4 √∫ltimos extractos bancarios.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'marriage', title: 'Certificado de matrimonio o uni√≥n libre', filename: 'CERTIFICADO_MATRIMONIO.pdf', description: 'Adjuntar el certificado seg√∫n su caso. Este documento debe traducirse.', badge: 'Si Aplica', badgeColor: '#8B5CF6' },
                { id: 'birth-children', title: 'Certificados de nacimiento de los hijos', filename: 'CERTIFICADOS_HIJOS.pdf', description: 'Adjuntar los certificados de nacimiento de los hijos. Si no viaja con ellos, es importante para comprobar arraigo con el pa√≠s de origen. Debe traducirse.', badge: 'Si Aplica', badgeColor: '#8B5CF6' }
            ],
            'child': [
                { id: 'passport', title: 'Pasaportes (actual y anteriores)', filename: 'PASAPORTE_MENOR.pdf', description: 'Scanner de todas las p√°ginas del pasaporte donde se encuentren los datos personales y los sellos de inmigraci√≥n. Es importante incluir las visas que haya tenido.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'id', title: 'Tarjeta de identidad', filename: 'TARJETA_IDENTIDAD.pdf', description: 'Escanear la tarjeta de identidad por ambos lados (si aplica).', badge: 'Si Aplica', badgeColor: '#8B5CF6' },
                { id: 'photo', title: 'Fotograf√≠a', filename: 'FOTOGRAFIA_MENOR.jpg', description: 'Ver especificaciones de las fotograf√≠as seg√∫n est√°ndares canadienses.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'travel-history', title: 'Viajes realizados', filename: 'HISTORIAL_VIAJES.pdf', description: 'Historial de viajes: Pa√≠s de viaje, fecha de ida y regreso, motivo de viaje. Es importante que los viajes concuerden con los sellos del pasaporte. Puede ir en un documento aparte.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'invitation', title: 'Carta de invitaci√≥n (host) + pruebas', filename: 'CARTA_INVITACION.pdf', description: 'Carta especificando hospedaje y alimentaci√≥n durante la estad√≠a en Canad√°. Debe ir sellada por notario o comisario. Incluir itinerarios de viaje, carta laboral del anfitri√≥n, dos √∫ltimos desprendibles de pago o declaraci√≥n de impuestos, y prueba de relaci√≥n (ej: certificado de nacimiento). Si no est√° en franc√©s o ingl√©s, traducir.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'school', title: 'Certificado de estudios', filename: 'CERTIFICADO_ESTUDIOS.pdf', description: 'Certificado emitido por la escuela mencionando que el estudiante est√° activo. Debe ir traducida. Si realiza actividad extra, art√≠stica o deportiva, anexar carta (traducida).', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'birth', title: 'Registro civil', filename: 'REGISTRO_CIVIL.pdf', description: 'Adjuntar el registro civil de nacimiento. Este documento debe estar traducido.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'tickets', title: 'Reservaci√≥n o compra de tiquetes (ida y regreso)', filename: 'TIQUETES_VIAJE.pdf', description: 'Este documento es necesario para enviar la aplicaci√≥n. El Gobierno de Canad√° procesa las visas discrecionalmente, as√≠ que es mejor comprar los tiquetes con posibilidad de cambio de fechas.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'parental', title: 'Autorizaci√≥n parental para salida al extranjero', filename: 'AUTORIZACION_PARENTAL.pdf', description: 'Si el ni√±o viaja con uno solo de los padres: autorizaci√≥n de salida del padre que no viaja, con identificaci√≥n. Preguntar en la oficina de inmigraci√≥n de su pa√≠s cu√°l es el documento correcto. Si los padres est√°n separados, adjuntar documentos de custodia. Deben estar traducidos.', badge: 'Obligatorio', badgeColor: '#DC2626' },
                { id: 'motivation', title: 'Carta de motivaci√≥n', filename: 'CARTA_MOTIVACION.pdf', description: 'Expresar el inter√©s del viaje a Canad√°, lugares que quisiera visitar. Incluir las fechas pensadas para el viaje. Diligenciar en el documento de informaci√≥n adicional.', badge: 'Obligatorio', badgeColor: '#DC2626' }
            ]
        };
        
        // Variable para almacenar el tipo seleccionado
        let selectedType = null;
        
        // Variable para almacenar archivos subidos
        let uploadedFiles = {};
        
        // ============================================
        // FUNCI√ìN PARA MOSTRAR CAMPOS DE UPLOAD
        // ============================================
        
        function showUploadFields() {
            console.log('üì§ Mostrando campos de upload para:', selectedType);
            
            const uploadGrid = document.getElementById('uploadGrid');
            
            if (!selectedType || !documentRequirements[selectedType]) {
                uploadGrid.innerHTML = `
                    <div class="alert alert-warning">
                        <h3>‚ö†Ô∏è Tipo de solicitud no seleccionado</h3>
                        <p>Por favor, regrese al Paso 1 y seleccione su tipo de solicitud.</p>
                        <button class="btn btn-primary" onclick="goToStep(1)">‚Üê Volver al Paso 1</button>
                    </div>
                `;
                return;
            }
            
            const docs = documentRequirements[selectedType];
            
            let html = `
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: var(--aqua-dark); font-size: 1.3rem;">
                        üìÅ Documentos a Subir (${docs.length} documentos)
                    </h3>
                    <p style="color: #666; margin-top: 0.5rem;">
                        Complete todos los documentos marcados como <strong style="color: #DC2626;">Obligatorios</strong>. 
                        Los documentos <strong style="color: #8B5CF6;">Si Aplica</strong> solo s√∫balos si corresponden a su situaci√≥n.
                    </p>
                </div>
            `;
            
            docs.forEach((doc, index) => {
                const fileId = `file-${doc.id}`;
                const isUploaded = uploadedFiles[doc.id];
                const isNA = uploadedFiles[doc.id] === 'N/A';
                
                html += `
                    <div class="upload-item" id="upload-${doc.id}" style="background: white; border: 2px solid ${doc.badgeColor}30; border-left: 5px solid ${doc.badgeColor}; padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 10px; position: relative;">
                        
                        <!-- Badge -->
                        <div style="position: absolute; top: 1rem; right: 1rem;">
                            <span style="background: ${doc.badgeColor}; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600;">
                                ${doc.badge}
                            </span>
                        </div>
                        
                        <!-- Header con n√∫mero y t√≠tulo -->
                        <div style="display: flex; align-items: start; gap: 1rem; margin-bottom: 1rem; padding-right: 100px;">
                            <div style="background: ${doc.badgeColor}20; width: 45px; height: 45px; min-width: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: ${doc.badgeColor}; font-size: 1.2rem;">
                                ${index + 1}
                            </div>
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 0.5rem 0; color: #2D3748; font-size: 1.1rem; font-weight: 600;">
                                    ${doc.title}
                                </h4>
                                <p style="margin: 0; color: #718096; font-size: 0.9rem; line-height: 1.5;">
                                    ${doc.description}
                                </p>
                            </div>
                        </div>
                        
                        <!-- Nombre del archivo esperado -->
                        <div style="background: ${doc.badgeColor}10; padding: 0.6rem 1rem; border-radius: 6px; margin-bottom: 1rem; border: 1px solid ${doc.badgeColor}30;">
                            <strong style="color: ${doc.badgeColor}; font-size: 0.9rem;">üìé Nombre del archivo:</strong> 
                            <code style="background: white; padding: 0.25rem 0.6rem; border-radius: 4px; font-family: 'Courier New', monospace; color: #2D3748; font-weight: 600; border: 1px solid #E2E8F0; font-size: 0.85rem;">${doc.filename}</code>
                        </div>
                        
                        <!-- √Årea de upload -->
                        <div class="upload-area" id="upload-area-${doc.id}" style="border: 2px dashed ${isNA ? '#ccc' : doc.badgeColor}; border-radius: 8px; padding: 1.5rem; text-align: center; background: ${isNA ? '#f5f5f5' : '#f9fafb'}; transition: all 0.3s; cursor: ${isNA ? 'not-allowed' : 'pointer'}; ${isNA ? 'opacity: 0.5;' : ''}" 
                             onclick="${isNA ? '' : `document.getElementById('${fileId}').click()`}"
                             ondragover="event.preventDefault(); ${isNA ? '' : `this.style.borderColor='${doc.badgeColor}'; this.style.background='${doc.badgeColor}10';`}"
                             ondragleave="${isNA ? '' : `this.style.borderColor='${doc.badgeColor}80'; this.style.background='#f9fafb';`}"
                             ondrop="${isNA ? 'event.preventDefault();' : `handleFileDrop(event, '${doc.id}', '${doc.filename}')`}">
                            
                            ${isNA ? `
                                <div style="color: #666;">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üö´</div>
                                    <div style="font-weight: 600;">Documento marcado como No Aplica</div>
                                </div>
                            ` : isUploaded ? `
                                <div style="color: #059669;">
                                    <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚úÖ</div>
                                    <div style="font-weight: 600; font-size: 1.05rem;">Archivo subido: ${isUploaded.name}</div>
                                    <div style="font-size: 0.85rem; color: #6B7280; margin-top: 0.25rem;">
                                        ${(isUploaded.size / (1024 * 1024)).toFixed(2)} MB
                                    </div>
                                    <button onclick="event.stopPropagation(); removeFile('${doc.id}')" 
                                            style="margin-top: 0.75rem; padding: 0.4rem 1rem; background: #EF4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                                        üóëÔ∏è Eliminar archivo
                                    </button>
                                </div>
                            ` : `
                                <div style="color: ${doc.badgeColor};">
                                    <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üì§</div>
                                    <div style="font-weight: 600; font-size: 1.05rem;">Click para subir o arrastre el archivo aqu√≠</div>
                                    <div style="font-size: 0.85rem; color: #6B7280; margin-top: 0.5rem;">
                                        PDF (m√°x. 3.8 MB)${doc.filename.includes('.jpg') ? ' o JPG/JPEG' : ''}
                                    </div>
                                </div>
                            `}
                            
                            <input type="file" 
                                   id="${fileId}" 
                                   accept="${doc.filename.includes('.jpg') ? '.pdf,.jpg,.jpeg' : '.pdf'}"
                                   style="display: none;"
                                   onchange="handleFileSelect(event, '${doc.id}', '${doc.filename}')"
                                   ${isNA ? 'disabled' : ''}>
                        </div>
                        
                        <!-- Botones N/A -->
                        <div style="margin-top: 1rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
                            ${doc.badge !== 'Obligatorio' ? `
                                <button type="button" 
                                        class="btn-na-doc ${isNA ? 'active-na' : ''}" 
                                        onclick="toggleNA('${doc.id}')"
                                        style="padding: 0.5rem 1.2rem; border: 2px solid ${isNA ? '#059669' : '#8B5CF6'}; background: ${isNA ? '#059669' : 'white'}; color: ${isNA ? 'white' : '#8B5CF6'}; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.3s;">
                                    ${isNA ? '‚úì Marcado como N/A' : 'üö´ Marcar como N/A'}
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            uploadGrid.innerHTML = html;
            console.log('‚úÖ Campos de upload mostrados:', docs.length, 'documentos');
        }
        
        // ============================================
        // FUNCIONES PARA MANEJAR ARCHIVOS
        // ============================================
        
        function handleFileSelect(event, docId, expectedFilename) {
            const file = event.target.files[0];
            if (file) {
                validateAndUploadFile(file, docId, expectedFilename);
            }
        }
        
        function handleFileDrop(event, docId, expectedFilename) {
            event.preventDefault();
            event.stopPropagation();
            
            const uploadArea = event.currentTarget;
            uploadArea.style.borderColor = '';
            uploadArea.style.background = '';
            
            const file = event.dataTransfer.files[0];
            if (file) {
                validateAndUploadFile(file, docId, expectedFilename);
            }
        }
        
        function validateAndUploadFile(file, docId, expectedFilename) {
            console.log('üìÑ Validando archivo:', file.name, 'para', docId);
            
            // Validar tama√±o (3.8 MB = 3.8 * 1024 * 1024 bytes)
            const maxSize = 3.8 * 1024 * 1024;
            if (file.size > maxSize) {
                alert(`‚ùå Error: El archivo es demasiado grande.\n\nTama√±o: ${(file.size / (1024 * 1024)).toFixed(2)} MB\nM√°ximo permitido: 3.8 MB\n\nPor favor, reduzca el tama√±o del archivo e intente nuevamente.`);
                return;
            }
            
            // Validar tipo de archivo
            const allowedTypes = expectedFilename.includes('.jpg') ? 
                ['application/pdf', 'image/jpeg', 'image/jpg'] : 
                ['application/pdf'];
            
            if (!allowedTypes.includes(file.type)) {
                const expectedType = expectedFilename.includes('.jpg') ? 'PDF o JPG/JPEG' : 'PDF';
                alert(`‚ùå Error: Tipo de archivo no v√°lido.\n\nArchivo subido: ${file.type}\nSe esperaba: ${expectedType}\n\nPor favor, convierta el archivo al formato correcto.`);
                return;
            }
            
            // Guardar archivo
            uploadedFiles[docId] = file;
            console.log('‚úÖ Archivo guardado:', file.name);
            
            // Actualizar UI
            showUploadFields();
        }
        
        function removeFile(docId) {
            console.log('üóëÔ∏è Eliminando archivo de:', docId);
            delete uploadedFiles[docId];
            showUploadFields();
        }
        
        function toggleNA(docId) {
            console.log('üö´ Toggle N/A para:', docId);
            
            if (uploadedFiles[docId] === 'N/A') {
                // Quitar N/A
                delete uploadedFiles[docId];
            } else {
                // Marcar como N/A
                uploadedFiles[docId] = 'N/A';
            }
            
            showUploadFields();
        }
        
        // ============================================
        // FUNCI√ìN PARA MOSTRAR DOCUMENTOS
        // ============================================
        
        function showDocumentList() {
            console.log('üìã Mostrando lista de documentos para:', selectedType);
            
            const documentList = document.getElementById('documentList');
            
            if (!selectedType || !documentRequirements[selectedType]) {
                documentList.innerHTML = `
                    <div class="alert alert-warning">
                        <h3>‚ö†Ô∏è Tipo de solicitud no seleccionado</h3>
                        <p>Por favor, regrese al Paso 1 y seleccione su tipo de solicitud.</p>
                        <button class="btn btn-primary" onclick="goToStep(1)">‚Üê Volver al Paso 1</button>
                    </div>
                `;
                return;
            }
            
            const docs = documentRequirements[selectedType];
            
            let html = `
                <h3 style="color: var(--aqua-dark); margin: 2rem 0 1.5rem; font-size: 1.4rem; border-bottom: 3px solid var(--aqua-primary); padding-bottom: 0.75rem;">
                    üìë Lista de Documentos Requeridos (${docs.length} documentos)
                </h3>
                
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 20px; height: 20px; background: #DC2626; border-radius: 4px;"></span>
                        <span style="font-size: 0.9rem; color: #555;"><strong>Obligatorio</strong></span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 20px; height: 20px; background: #3B82F6; border-radius: 4px;"></span>
                        <span style="font-size: 0.9rem; color: #555;"><strong>Opcional</strong></span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 20px; height: 20px; background: #8B5CF6; border-radius: 4px;"></span>
                        <span style="font-size: 0.9rem; color: #555;"><strong>Si Aplica</strong></span>
                    </div>
                </div>
                
                <div class="document-list">
            `;
            
            docs.forEach((doc, index) => {
                html += `
                    <div class="document-item" style="background: white; border-left: 5px solid ${doc.badgeColor}; padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); position: relative;">
                        <div style="position: absolute; top: 1rem; right: 1rem;">
                            <span style="background: ${doc.badgeColor}; color: white; padding: 0.35rem 0.75rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">
                                ${doc.badge}
                            </span>
                        </div>
                        <div style="display: flex; align-items: start; gap: 1rem;">
                            <div style="background: ${doc.badgeColor}15; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold; color: ${doc.badgeColor}; font-size: 1.2rem;">
                                ${index + 1}
                            </div>
                            <div style="flex: 1; padding-right: 80px;">
                                <h4 style="margin: 0 0 0.5rem 0; color: var(--dark-text); font-size: 1.15rem;">
                                    ${doc.title}
                                </h4>
                                <p style="margin: 0 0 0.75rem 0; color: var(--warm-gray); line-height: 1.6; font-size: 0.95rem;">
                                    ${doc.description}
                                </p>
                                <div style="background: ${doc.badgeColor}10; padding: 0.6rem 1rem; border-radius: 6px; display: inline-block; border: 1px solid ${doc.badgeColor}30;">
                                    <strong style="color: ${doc.badgeColor};">üìé Nombre del archivo:</strong> 
                                    <code style="background: white; padding: 0.25rem 0.6rem; border-radius: 4px; font-family: 'Courier New', monospace; color: #2D3748; font-weight: 600; border: 1px solid #E2E8F0;">${doc.filename}</code>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                </div>
                <div class="alert alert-info" style="margin-top: 2rem;">
                    <strong>üí° Nota Importante:</strong><br>
                    ‚Ä¢ Los documentos marcados como <strong style="color: #DC2626;">Obligatorios</strong> son esenciales para su solicitud.<br>
                    ‚Ä¢ Los documentos <strong style="color: #3B82F6;">Opcionales</strong> pueden fortalecer su aplicaci√≥n.<br>
                    ‚Ä¢ Los documentos <strong style="color: #8B5CF6;">Si Aplica</strong> solo deben incluirse si corresponden a su situaci√≥n.<br>
                    <br>
                    En el siguiente paso podr√° subir estos documentos. Aseg√∫rese de nombrar cada archivo PDF exactamente como se indica arriba.
                </div>
            `;
            
            documentList.innerHTML = html;
            console.log('‚úÖ Lista de documentos mostrada:', docs.length, 'documentos');
        }
        
        // ============================================
        // FUNCI√ìN PARA GENERAR Y DESCARGAR PDF
        // ============================================
        
        function downloadCurrentChecklist() {
            console.log('üì• Generando PDF checklist para:', selectedType);
            
            if (!selectedType || !documentRequirements[selectedType]) {
                alert('Por favor, primero seleccione su tipo de solicitud en el Paso 1.');
                goToStep(1);
                return;
            }
            
            const docs = documentRequirements[selectedType];
            
            // Determinar t√≠tulo seg√∫n tipo
            let title = 'Checklist de Documentos';
            if (selectedType === 'adult-outside') title = 'Checklist - Adulto fuera de Canad√°';
            if (selectedType === 'adult-inside') title = 'Checklist - Adulto dentro de Canad√°';
            if (selectedType === 'child') title = 'Checklist - Menor de edad';
            
            // Crear contenido HTML para el PDF
            let content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
                        .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #20B2AA; padding-bottom: 20px; }
                        .header h1 { color: #20B2AA; margin: 0; }
                        .header p { color: #666; margin: 5px 0; }
                        .document { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; page-break-inside: avoid; }
                        .document h3 { color: #2D3748; margin: 0 0 10px 0; }
                        .document p { color: #555; margin: 10px 0; }
                        .filename { background: #E6FFFA; padding: 8px 12px; border-radius: 4px; font-family: monospace; display: inline-block; margin-top: 10px; }
                        .checkbox { display: inline-block; width: 20px; height: 20px; border: 2px solid #20B2AA; margin-right: 10px; vertical-align: middle; }
                        .footer { margin-top: 40px; padding-top: 20px; border-top: 2px solid #ddd; text-align: center; color: #666; font-size: 0.9em; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üìã ${title}</h1>
                        <p><strong>LMBI Immigration</strong></p>
                        <p>Solicitud de Visa de Turismo Canadiense</p>
                        <p style="color: #20B2AA;"><strong>Fecha:</strong> ${new Date().toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                    </div>
                    
                    <p style="background: #FFF4E6; padding: 15px; border-left: 4px solid #F59E0B; margin-bottom: 30px;">
                        <strong>‚ö†Ô∏è Instrucciones:</strong> Marque cada casilla a medida que re√∫ne y prepara cada documento. 
                        Aseg√∫rese de nombrar cada archivo PDF exactamente como se indica.
                    </p>
            `;
            
            docs.forEach((doc, index) => {
                const badgeStyle = doc.badge === 'Obligatorio' ? 'background: #FEE2E2; color: #991B1B; border: 2px solid #DC2626;' :
                                   doc.badge === 'Opcional' ? 'background: #DBEAFE; color: #1E40AF; border: 2px solid #3B82F6;' :
                                   'background: #EDE9FE; color: #5B21B6; border: 2px solid #8B5CF6;';
                
                content += `
                    <div class="document">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                            <h3 style="flex: 1; margin: 0;">
                                <span class="checkbox"></span>
                                ${index + 1}. ${doc.title}
                            </h3>
                            <span style="padding: 6px 12px; border-radius: 6px; font-weight: bold; font-size: 0.85em; ${badgeStyle}">
                                ${doc.badge}
                            </span>
                        </div>
                        <p>${doc.description}</p>
                        <div class="filename">
                            <strong>üìé Nombre del archivo:</strong> ${doc.filename}
                        </div>
                    </div>
                `;
            });
            
            content += `
                    <div class="footer">
                        <p><strong>LMBI Immigration</strong></p>
                        <p>üìß lmbi.immigration@gmail.com | üì± +1 (514) 773-4708</p>
                        <p style="margin-top: 15px; color: #888;">
                            Este checklist es una gu√≠a de los documentos requeridos. 
                            Consulte siempre la informaci√≥n oficial en el sitio web de IRCC para requisitos actualizados.
                        </p>
                    </div>
                </body>
                </html>
            `;
            
            // Crear ventana para imprimir/guardar como PDF
            const printWindow = window.open('', '', 'width=800,height=600');
            printWindow.document.write(content);
            printWindow.document.close();
            
            // Esperar a que se cargue y luego abrir di√°logo de impresi√≥n
            setTimeout(() => {
                printWindow.print();
                console.log('‚úÖ Di√°logo de impresi√≥n abierto');
            }, 250);
        }
        
        // Funci√≥n para manejar selecci√≥n de tarjetas
        function selectCard(card) {
            console.log('üéØ Tarjeta clickeada');
            
            // Remover selecci√≥n de todas las tarjetas
            document.querySelectorAll('.selection-card').forEach(c => {
                c.classList.remove('selected');
            });
            
            // Marcar esta tarjeta como seleccionada
            card.classList.add('selected');
            selectedType = card.dataset.type;
            
            console.log('‚úÖ Tipo seleccionado:', selectedType);
            
            // Habilitar bot√≥n de continuar
            const nextBtn = document.getElementById('nextStep1');
            if (nextBtn) {
                nextBtn.disabled = false;
                nextBtn.style.opacity = '1';
                nextBtn.style.cursor = 'pointer';
            }
        }
        
        // ============================================
        // CONFIGURACI√ìN DE EMAILJS
        // ============================================
        
        const EMAILJS_CONFIG = {
            publicKey: "TU_PUBLIC_KEY_AQUI",      // ‚ö†Ô∏è REEMPLAZAR con tu Public Key
            serviceId: "TU_SERVICE_ID_AQUI",       // ‚ö†Ô∏è REEMPLAZAR con tu Service ID
            templateId: "TU_TEMPLATE_ID_AQUI"      // ‚ö†Ô∏è REEMPLAZAR con tu Template ID
        };
        
        // ============================================
        // FUNCI√ìN PARA ENVIAR SOLICITUD POR EMAIL
        // ============================================
        
        async function submitApplication() {
            console.log('üìß Iniciando proceso de env√≠o...');
            
            // 1. VALIDAR CONFIRMACIONES
            const confirmDocs = document.getElementById('confirmDocuments');
            const confirmInfo = document.getElementById('confirmInfo');
            const confirmReview = document.getElementById('confirmReview');
            
            if (!confirmDocs || !confirmInfo || !confirmReview) {
                alert('‚ö†Ô∏è Error: Required confirmation fields not found.');
                return;
            }
            
            if (!confirmDocs.checked || !confirmInfo.checked || !confirmReview.checked) {
                alert('‚ö†Ô∏è Please confirm all checkboxes before submitting:\n\n' +
                      '‚òê I have attached all required documents\n' +
                      '‚òê All information provided is true and complete\n' +
                      '‚òê I have carefully reviewed my application');
                return;
            }
            
            // 2. VALIDAR QUE HAYA SELECCIONADO TIPO DE VISA
            if (!selectedType) {
                alert('‚ö†Ô∏è Error: No visa type selected.\n\nPlease return to Step 1.');
                goToStep(1);
                return;
            }
            
            // 3. MOSTRAR INDICADOR DE CARGA
            const loadingDiv = document.getElementById('loadingSubmit');
            const submitBtn = document.getElementById('submitApplication');
            
            if (loadingDiv) {
                loadingDiv.style.display = 'block';
                loadingDiv.innerHTML = '<div class="spinner"></div><p>Generating PDF and packaging files...<br>This may take a moment...</p>';
            }
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.style.opacity = '0.5';
                submitBtn.style.cursor = 'not-allowed';
            }
            
            try {
                // 4. RECOPILAR INFORMACI√ìN
                console.log('üìã Collecting application data...');
                
                const personalForm = document.getElementById('personalInfoForm');
                const travelForm = document.getElementById('travelPurposeForm');
                
                if (!personalForm) {
                    throw new Error('Personal information form not found');
                }
                
                const formData = new FormData(personalForm);
                const travelData = travelForm ? new FormData(travelForm) : null;
                
                const firstName = formData.get('firstName') || '';
                const lastName = formData.get('lastName') || '';
                const email = formData.get('email') || document.getElementById('confirmEmail')?.value || '';
                
                // 5. GENERAR PDF CON INFORMACI√ìN DEL FORMULARIO
                console.log('üìÑ Generating application PDF...');
                const pdf = await generateApplicationPDF(formData, travelData);
                
                // 6. CREAR ZIP CON TODOS LOS ARCHIVOS
                console.log('üì¶ Creating ZIP package...');
                const zipBlob = await createZipPackage(pdf, firstName, lastName);
                
                // 7. DESCARGAR ZIP
                console.log('üíæ Preparing download...');
                const zipFileName = `VISA_APPLICATION_${firstName}_${lastName}_${Date.now()}.zip`.replace(/\s+/g, '_');
                downloadZipFile(zipBlob, zipFileName);
                
                // 8. MOSTRAR INSTRUCCIONES
                showEmailInstructions(email, firstName, lastName);
                
            } catch (error) {
                console.error('‚ùå Error during submission:', error);
                
                alert('‚ùå ERROR GENERATING PACKAGE\n\n' +
                      'There was an error creating your application package.\n\n' +
                      'Please try again or contact us directly:\n\n' +
                      '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n' +
                      'üìß Email: lmbi.immigration@gmail.com\n' +
                      'üì± WhatsApp: +1 (514) 773-4708');
            } finally {
                // 9. OCULTAR LOADING
                if (loadingDiv) loadingDiv.style.display = 'none';
                if (submitBtn) {
                    submitBtn.disabled = false;
                    submitBtn.style.opacity = '1';
                    submitBtn.style.cursor = 'pointer';
                }
            }
        }
        
        // ============================================
        // GENERAR PDF CON INFORMACI√ìN DEL FORMULARIO
        // ============================================
        
        async function generateApplicationPDF(formData, travelData) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            let y = 20;
            const lineHeight = 7;
            const leftMargin = 20;
            const pageHeight = doc.internal.pageSize.height;
            
            // Helper function to check if we need a new page
            function checkNewPage() {
                if (y > pageHeight - 30) {
                    doc.addPage();
                    y = 20;
                }
            }
            
            // HEADER
            doc.setFontSize(20);
            doc.setTextColor(0, 137, 123); // Teal color
            doc.text('CANADIAN TOURIST VISA APPLICATION', leftMargin, y);
            y += 10;
            
            doc.setFontSize(10);
            doc.setTextColor(100);
            doc.text('LMBI Immigration Services', leftMargin, y);
            y += 5;
            doc.text(`Generated: ${new Date().toLocaleString('en-US')}`, leftMargin, y);
            y += 10;
            
            // SECTION 1: PERSONAL INFORMATION
            doc.setFontSize(14);
            doc.setTextColor(0);
            doc.setFont(undefined, 'bold');
            doc.text('1. APPLICANT INFORMATION', leftMargin, y);
            y += lineHeight;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            
            const personalFields = [
                ['First Name', formData.get('firstName')],
                ['Last Name', formData.get('lastName')],
                ['Date of Birth', formData.get('birthDate')],
                ['Place of Birth', formData.get('birthPlace')],
                ['Citizenship', formData.get('citizenship')],
                ['Passport Number', formData.get('passportNumber')],
                ['Email', formData.get('email')],
                ['Phone', formData.get('phone')],
                ['Address', formData.get('address')],
                ['City', formData.get('city')],
                ['Country', formData.get('country')],
                ['Postal Code', formData.get('postalCode')]
            ];
            
            personalFields.forEach(([label, value]) => {
                checkNewPage();
                doc.setFont(undefined, 'bold');
                doc.text(`${label}:`, leftMargin, y);
                doc.setFont(undefined, 'normal');
                doc.text(value || 'N/A', leftMargin + 50, y);
                y += lineHeight;
            });
            
            y += 5;
            checkNewPage();
            
            // SECTION 2: MARITAL STATUS
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('2. MARITAL STATUS', leftMargin, y);
            y += lineHeight;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            
            const maritalStatus = formData.get('maritalStatus');
            const maritalStatusNames = {
                'married': 'Married',
                'single': 'Single',
                'common-law': 'Common-law',
                'separated': 'Legally Separated',
                'divorced': 'Divorced',
                'widowed': 'Widowed'
            };
            
            doc.text(`Status: ${maritalStatusNames[maritalStatus] || maritalStatus || 'N/A'}`, leftMargin, y);
            y += lineHeight + 5;
            
            // SECTION 3: TRAVEL PURPOSE
            if (travelData) {
                checkNewPage();
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.text('3. PURPOSE OF TRAVEL', leftMargin, y);
                y += lineHeight;
                doc.setFont(undefined, 'normal');
                doc.setFontSize(10);
                
                const purpose = travelData.get('travelPurpose') || 'N/A';
                const lines = doc.splitTextToSize(purpose, 170);
                lines.forEach(line => {
                    checkNewPage();
                    doc.text(line, leftMargin, y);
                    y += lineHeight;
                });
                y += 5;
            }
            
            // SECTION 4: BACKGROUND INFORMATION
            checkNewPage();
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('4. BACKGROUND INFORMATION', leftMargin, y);
            y += lineHeight;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            
            const backgroundQuestions = [
                ['Tuberculosis', formData.get('tuberculosis')],
                ['Medical Condition', formData.get('medicalCondition')],
                ['Overstayed Canada', formData.get('overstayedCanada')],
                ['Visa Denied', formData.get('visaDenied')],
                ['Previous Application', formData.get('previousApplication')],
                ['Criminal Record', formData.get('criminalRecord')],
                ['Armed Group', formData.get('armedGroup')],
                ['Political Affiliation', formData.get('politicalAffiliation')],
                ['Witness Abuse', formData.get('witnessAbuse')]
            ];
            
            let hasYes = false;
            backgroundQuestions.forEach(([label, value]) => {
                checkNewPage();
                doc.text(`${label}: ${value === 'yes' ? 'YES' : 'NO'}`, leftMargin, y);
                if (value === 'yes') hasYes = true;
                y += lineHeight;
            });
            
            if (hasYes) {
                y += 5;
                checkNewPage();
                doc.setFont(undefined, 'bold');
                doc.text('Justification:', leftMargin, y);
                y += lineHeight;
                doc.setFont(undefined, 'normal');
                const justification = formData.get('backgroundJustification') || 'N/A';
                const justLines = doc.splitTextToSize(justification, 170);
                justLines.forEach(line => {
                    checkNewPage();
                    doc.text(line, leftMargin, y);
                    y += lineHeight;
                });
            }
            
            // SECTION 5: DOCUMENTS
            y += 10;
            checkNewPage();
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('5. UPLOADED DOCUMENTS', leftMargin, y);
            y += lineHeight;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            
            let docCount = 0;
            for (const [docId, file] of Object.entries(uploadedFiles || {})) {
                if (file === 'N/A') {
                    checkNewPage();
                    doc.text(`${++docCount}. ${docId} - MARKED AS N/A`, leftMargin, y);
                    y += lineHeight;
                } else if (file && file.name) {
                    checkNewPage();
                    const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    doc.text(`${++docCount}. ${file.name} (${sizeMB} MB)`, leftMargin, y);
                    y += lineHeight;
                }
            }
            
            if (docCount === 0) {
                doc.text('No documents uploaded yet', leftMargin, y);
            }
            
            // FOOTER
            const totalPages = doc.internal.pages.length - 1;
            for (let i = 1; i <= totalPages; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.setTextColor(150);
                doc.text(`Page ${i} of ${totalPages}`, leftMargin, pageHeight - 10);
                doc.text('LMBI Immigration - Tourist Visa Application', 105, pageHeight - 10, { align: 'center' });
            }
            
            return doc.output('blob');
        }
        
        // ============================================
        // CREAR ZIP CON PDF Y DOCUMENTOS
        // ============================================
        
        async function createZipPackage(pdfBlob, firstName, lastName) {
            const zip = new JSZip();
            
            // Add PDF
            const pdfFileName = `Application_Form_${firstName}_${lastName}.pdf`.replace(/\s+/g, '_');
            zip.file(pdfFileName, pdfBlob);
            
            // Add uploaded documents
            const documentsFolder = zip.folder('Uploaded_Documents');
            let docCount = 0;
            
            for (const [docId, file] of Object.entries(uploadedFiles || {})) {
                if (file && file !== 'N/A' && file.name) {
                    documentsFolder.file(file.name, file);
                    docCount++;
                }
            }
            
            // Add README
            const readmeContent = `CANADIAN TOURIST VISA APPLICATION PACKAGE
============================================

Applicant: ${firstName} ${lastName}
Generated: ${new Date().toLocaleString('en-US')}
Package ID: ${Date.now()}

CONTENTS:
---------
1. Application_Form_${firstName}_${lastName}.pdf
   Complete filled application form with all information

2. Uploaded_Documents/ folder
   ${docCount} document(s) uploaded by applicant

INSTRUCTIONS:
-------------
1. Review all documents in this package
2. Compose an email to: lmbi.immigration@gmail.com
3. Subject: "Immigration Documents for Tourist Visa"
4. Attach this entire ZIP file to the email
5. Use the email body template provided in the download instructions

Thank you for choosing LMBI Immigration!

Contact:
--------
Email: lmbi.immigration@gmail.com
WhatsApp: +1 (514) 773-4708
Website: https://luzmabedoya.github.io/immigration/
`;
            
            zip.file('README.txt', readmeContent);
            
            // Generate ZIP
            return await zip.generateAsync({ type: 'blob' });
        }
        
        // ============================================
        // DESCARGAR ARCHIVO ZIP
        // ============================================
        
        function downloadZipFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // ============================================
        // MOSTRAR INSTRUCCIONES DE EMAIL
        // ============================================
        
        function showEmailInstructions(applicantEmail, firstName, lastName) {
            const emailBody = `Dear LMBI Immigration Team,

I am submitting my application for a Canadian Tourist Visa. Please find attached a ZIP file containing:

1. Completed application form (PDF) with all my personal information
2. All required supporting documents

The attached ZIP file contains my complete visa application package. Please review the documents and let me know if any additional information is needed.

Applicant Name: ${firstName} ${lastName}
Contact Email: ${applicantEmail}
Submission Date: ${new Date().toLocaleDateString('en-US', { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric' 
})}

Thank you for your assistance with my visa application.

Best regards,
${firstName} ${lastName}`;

            const emailSubject = 'Immigration Documents for Tourist Visa';
            
            // Create modal with instructions
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; padding: 2.5rem; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
                        <h2 style="color: #00897B; margin: 0 0 0.5rem 0; font-size: 1.8rem;">Package Generated Successfully!</h2>
                        <p style="color: #666; margin: 0;">Your application package has been downloaded</p>
                    </div>
                    
                    <div style="background: #E0F7FA; border-left: 5px solid #00BCD4; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                        <h3 style="color: #00897B; margin: 0 0 1rem 0; font-size: 1.2rem;">üìß Email Instructions</h3>
                        <ol style="margin: 0; padding-left: 1.5rem; color: #333; line-height: 1.8;">
                            <li style="margin-bottom: 0.5rem;">Locate the downloaded ZIP file on your computer</li>
                            <li style="margin-bottom: 0.5rem;">Open your email client (Gmail, Outlook, etc.)</li>
                            <li style="margin-bottom: 0.5rem;">Create a new email to: <strong style="color: #00897B;">lmbi.immigration@gmail.com</strong></li>
                            <li style="margin-bottom: 0.5rem;">Copy the subject and body text below</li>
                            <li style="margin-bottom: 0.5rem;">Attach the ZIP file to your email</li>
                            <li>Click Send!</li>
                        </ol>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; font-weight: 600; color: #333; margin-bottom: 0.5rem;">
                            üìã Email Subject:
                        </label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="emailSubjectField" value="${emailSubject}" readonly 
                                   style="flex: 1; padding: 0.8rem; border: 2px solid #00BCD4; border-radius: 6px; font-size: 0.95rem; background: #F0FDFF;">
                            <button onclick="copyToClipboard('emailSubjectField', this)" 
                                    style="padding: 0.8rem 1.5rem; background: #00BCD4; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; white-space: nowrap;">
                                üìã Copy
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 2rem;">
                        <label style="display: block; font-weight: 600; color: #333; margin-bottom: 0.5rem;">
                            ‚úâÔ∏è Email Body:
                        </label>
                        <div style="position: relative;">
                            <textarea id="emailBodyField" readonly 
                                      style="width: 100%; height: 280px; padding: 1rem; border: 2px solid #00BCD4; border-radius: 6px; font-size: 0.9rem; font-family: inherit; resize: vertical; background: #F0FDFF; line-height: 1.6;">${emailBody}</textarea>
                            <button onclick="copyToClipboard('emailBodyField', this)" 
                                    style="position: absolute; top: 10px; right: 10px; padding: 0.6rem 1.2rem; background: #00BCD4; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                üìã Copy Text
                            </button>
                        </div>
                    </div>
                    
                    <div style="background: #FFF3E0; border-left: 5px solid #FF9800; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
                        <p style="margin: 0; color: #E65100; font-size: 0.9rem; line-height: 1.6;">
                            <strong>‚ö†Ô∏è Important:</strong> Make sure to attach the downloaded ZIP file to your email before sending. 
                            The file contains both your application form and all supporting documents.
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button onclick="this.closest('[style*=\\'position: fixed\\']').remove()" 
                                style="flex: 1; min-width: 200px; padding: 1rem 2rem; background: #00897B; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600;">
                            ‚úì Got It!
                        </button>
                        <a href="mailto:lmbi.immigration@gmail.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}"
                           style="flex: 1; min-width: 200px; padding: 1rem 2rem; background: #2196F3; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600; text-decoration: none; text-align: center; display: block;">
                            üìß Open Email Client
                        </a>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // ============================================
        // COPY TO CLIPBOARD HELPER
        // ============================================
        
        function copyToClipboard(elementId, button) {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            
            const originalText = button.textContent;
            button.textContent = '‚úì Copied!';
            button.style.background = '#4CAF50';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '#00BCD4';
            }, 2000);
        }
        
        // Funci√≥n auxiliar: Nombre del tipo de visa
        function getVisaTypeName(type) {
            const names = {
                'adult-outside': 'Visa de Turismo - Adulto fuera de Canad√°',
                'adult-inside': 'Visa de Turismo - Adulto dentro de Canad√°',
                'child': 'Visa de Turismo - Menor de edad'
            };
            return names[type] || 'Tipo no especificado';
        }
        
        // Funci√≥n auxiliar: Lista de documentos
        function generateDocumentsList() {
            if (!uploadedFiles || Object.keys(uploadedFiles).length === 0) {
                return 'Ning√∫n documento adjunto.\n\nNOTA: Puede enviarlos por WhatsApp: +1 (514) 773-4708';
            }
            
            let list = '';
            let count = 0;
            let totalSize = 0;
            
            for (const [docId, file] of Object.entries(uploadedFiles)) {
                if (file === 'N/A') {
                    count++;
                    list += `${count}. ${docId} - MARCADO COMO N/A\n`;
                } else if (file && file.name) {
                    count++;
                    const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    totalSize += file.size;
                    list += `${count}. ${file.name} (${sizeMB} MB)\n`;
                }
            }
            
            if (count === 0) return 'Ning√∫n documento';
            
            const totalMB = (totalSize / (1024 * 1024)).toFixed(2);
            list += `\nTOTAL: ${count} archivo(s) - ${totalMB} MB`;
            
            return list;
        }
        
        // Funci√≥n auxiliar: Resumen de aplicaci√≥n
        function generateApplicationSummary(formData, travelData) {
            let summary = '';
            
            summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            summary += '   INFORMACI√ìN PERSONAL\n';
            summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            
            summary += `Nombre: ${formData.get('firstName')} ${formData.get('lastName')}\n`;
            summary += `Fecha Nacimiento: ${formData.get('birthDate') || 'N/A'}\n`;
            summary += `Lugar Nacimiento: ${formData.get('birthPlace') || 'N/A'}\n`;
            summary += `Ciudadan√≠a: ${formData.get('citizenship') || 'N/A'}\n`;
            summary += `Pasaporte: ${formData.get('passportNumber') || 'N/A'}\n\n`;
            
            summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            summary += '   CONTACTO\n';
            summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            
            summary += `Email: ${formData.get('email') || 'N/A'}\n`;
            summary += `Tel√©fono: ${formData.get('phone') || 'N/A'}\n`;
            summary += `Direcci√≥n: ${formData.get('address') || 'N/A'}\n\n`;
            
            if (travelData) {
                summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
                summary += '   MOTIVO DEL VIAJE\n';
                summary += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
                summary += `${travelData.get('travelPurpose') || 'N/A'}\n\n`;
            }
            
            return summary;
        }
        
        // Evento DOM cargado
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM cargado - Aplicaci√≥n lista');
            
            // Configurar bot√≥n de env√≠o
            const submitBtn = document.getElementById('submitApplication');
            if (submitBtn) {
                submitBtn.onclick = null; // Remover onclick anterior
                submitBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    submitApplication();
                });
                console.log('‚úÖ Bot√≥n de env√≠o configurado');
            }
            
            // Agregar eventos a las tarjetas de selecci√≥n
            const selectionCards = document.querySelectorAll('.selection-card');
            console.log('üìã Tarjetas encontradas:', selectionCards.length);
            
            selectionCards.forEach(card => {
                // Click simple
                card.addEventListener('click', function() {
                    selectCard(this);
                });
                
                // Doble click para avanzar autom√°ticamente
                card.addEventListener('dblclick', function() {
                    selectCard(this);
                    setTimeout(() => {
                        console.log('‚è© Avanzando autom√°ticamente...');
                        goToStep(2);
                    }, 300);
                });
            });
            
            // Agregar evento al bot√≥n de continuar
            const nextBtn = document.getElementById('nextStep1');
            if (nextBtn) {
                nextBtn.addEventListener('click', function() {
                    if (selectedType) {
                        console.log('‚û°Ô∏è Continuando a paso 2 con tipo:', selectedType);
                        goToStep(2);
                    }
                });
            }
            
            // ============================================
            // CONTROL DE TEXTAREA DE ANTECEDENTES
            // ============================================
            
            const antecedentRadios = document.querySelectorAll('.antecedent-radio');
            const justificationContainer = document.getElementById('antecedentJustificationContainer');
            const justificationTextarea = document.getElementById('backgroundJustification');
            
            console.log('üìã Radios de antecedentes encontrados:', antecedentRadios.length);
            
            function checkAntecedentAnswers() {
                let hasYes = false;
                
                // Revisar si alg√∫n radio "yes" est√° seleccionado
                antecedentRadios.forEach(radio => {
                    if (radio.value === 'yes' && radio.checked) {
                        hasYes = true;
                    }
                });
                
                console.log('üîç ¬øAlg√∫n S√ç seleccionado?', hasYes);
                
                // Mostrar u ocultar el textarea
                if (hasYes) {
                    justificationContainer.style.display = 'block';
                    justificationTextarea.required = true;
                    justificationTextarea.focus();
                    console.log('‚úÖ Textarea activado - Se requiere justificaci√≥n');
                } else {
                    justificationContainer.style.display = 'none';
                    justificationTextarea.required = false;
                    justificationTextarea.value = '';
                    console.log('‚ùå Textarea desactivado');
                }
            }
            
            // Agregar evento a cada radio button
            antecedentRadios.forEach(radio => {
                radio.addEventListener('change', checkAntecedentAnswers);
            });
            
            // Verificar estado inicial
            checkAntecedentAnswers();
            
            console.log('‚úÖ Eventos de tarjetas configurados');
            console.log('‚úÖ Control de antecedentes configurado');
        });
        
    </script>
</body>
</html>
